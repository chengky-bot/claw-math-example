<!DOCTYPE html>
<html lang="zh-HK"><head><script>(function(firebaseConfig, initialAuthToken, appId) {
        window.__firebase_config = firebaseConfig;
        window.__initial_auth_token = initialAuthToken;
        window.__app_id = appId;
            })("\n{\n  \"apiKey\": \"AIzaSyCqyCcs2R2e7AegGjvFAwG98wlamtbHvZY\",\n  \"authDomain\": \"bard-frontend.firebaseapp.com\",\n  \"projectId\": \"bard-frontend\",\n  \"storageBucket\": \"bard-frontend.firebasestorage.app\",\n  \"messagingSenderId\": \"175205271074\",\n  \"appId\": \"1:175205271074:web:2b7bd4d34d33bf38e6ec7b\"\n}\n","eyJhbGciOiJSUzI1NiIsImtpZCI6ImVkMTFlZDM5MmY5YzMwZjkyMGE1OGIzYmQ1NGUyZTI3MjIxZTkwMjQiLCJ0eXAiOiJKV1QifQ.eyJzdWIiOiJmaXJlYmFzZS1hZG1pbnNkay1mYnN2Y0BiYXJkLWZyb250ZW5kLmlhbS5nc2VydmljZWFjY291bnQuY29tIiwiYXVkIjoiaHR0cHM6Ly9pZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb20vZ29vZ2xlLmlkZW50aXR5LmlkZW50aXR5dG9vbGtpdC52MS5JZGVudGl0eVRvb2xraXQiLCJ1aWQiOiIwNDg5MDY4NTEwMDAxNjQ3NzA5NSIsImlzcyI6ImZpcmViYXNlLWFkbWluc2RrLWZic3ZjQGJhcmQtZnJvbnRlbmQuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLCJjbGFpbXMiOnsiYXBwSWQiOiJjX2E3ODE4ZjZmNTFlYTk1MjFfaGFwcHlfYWRkaXRpb25fZ2FtZS5odG1sLTMyOSJ9LCJleHAiOjE3Njc4ODc5NDksImlhdCI6MTc2Nzg4NDM0OSwiYWxnIjoiUlMyNTYifQ.dbOHuJSwyz_DDG6IQeK7MyGRXrurhfQBgdih-yOkfrHU4Y2rxoCaAWY8C09Cxk58W5R7mZjJ6XAgw-7UCm-amWP4ZO-176e61QZs88qUR7950Sv47emEkFqNHStLJgIBOEUMwTxxzKRJciCGLlLVSixeus27srSpJ48zTqDClG6PRzYl_OEOwPRwYSJ4PPyfxeRyA5u2741jgwBtWmOqbRu_LeAAt1K2sSq5Ev5SQwiHqmwLdB8K3ESHHWggkkr3KyuOXpk3B_xVorSvhE4dLfP0GvOS9yFX2fUCBuVYyW-nSkGrMWGXUFefQT5U7dlMTaHDbJuPxWAdRyiqsxCCXg","c_a7818f6f51ea9521_happy_addition_game.html-329")</script><script>'use strict';var h=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,b,d){if(a==Array.prototype||a==Object.prototype)return a;a[b]=d.value;return a};function l(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");}var n=l(this);
function p(a,b){if(b)a:{var d=n;a=a.split(".");for(var c=0;c<a.length-1;c++){var e=a[c];if(!(e in d))break a;d=d[e]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&b!=null&&h(d,a,{configurable:!0,writable:!0,value:b})}}function r(a){function b(c){return a.next(c)}function d(c){return a.throw(c)}return new Promise(function(c,e){function f(g){g.done?c(g.value):Promise.resolve(g.value).then(b,d).then(f,e)}f(a.next())})}function t(a){return r(a())}
p("Object.values",function(a){return a?a:function(b){var d=[],c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&d.push(b[c]);return d}});p("Array.prototype.includes",function(a){return a?a:function(b,d){var c=this;c instanceof String&&(c=String(c));var e=c.length;d=d||0;for(d<0&&(d=Math.max(d+e,0));d<e;d++){var f=c[d];if(f===b||Object.is(f,b))return!0}return!1}});/*

 MIT License

 Copyright (c) 2017-2023 W.Y.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 SOFTWARE.

*/
function u(a,b){const d=a.style;b.backgroundColor&&(d.backgroundColor=b.backgroundColor);b.width&&(d.width=`${b.width}px`);b.height&&(d.height=`${b.height}px`);const c=b.style;c!=null&&Object.keys(c).forEach(e=>{d[e]=c[e]})};var v=(()=>{let a=0;return()=>{a+=1;return`u${`0000${(Math.random()*1679616<<0).toString(36)}`.slice(-4)}${a}`}})();function w(a){const b=[];for(let d=0,c=a.length;d<c;d++)b.push(a[d]);return b}let x=null;function y(a={}){return x?x:a.l?x=a.l:x=w(window.getComputedStyle(document.documentElement))}function z(a,b){return(a=(a.ownerDocument.defaultView||window).getComputedStyle(a).getPropertyValue(b))?parseFloat(a.replace("px","")):0}
function A(a,b={}){var d;if(!(d=b.width)){d=z(a,"border-left-width");var c=z(a,"border-right-width");d=a.clientWidth+d+c}(b=b.height)||(b=z(a,"border-top-width"),c=z(a,"border-bottom-width"),b=a.clientHeight+b+c);return{width:d,height:b}}function B(a){return new Promise((b,d)=>{const c=new Image;c.onload=()=>{c.decode().then(()=>{requestAnimationFrame(()=>b(c))})};c.onerror=d;c.crossOrigin="anonymous";c.decoding="async";c.src=a})}
function C(a){return t(function*(){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(a)).then(encodeURIComponent).then(b=>`data:image/svg+xml;charset=utf-8,${b}`)})}
function D(a,b,d){return t(function*(){const c=document.createElementNS("http://www.w3.org/2000/svg","svg"),e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");c.setAttribute("width",`${b}`);c.setAttribute("height",`${d}`);c.setAttribute("viewBox",`0 0 ${b} ${d}`);e.setAttribute("width","100%");e.setAttribute("height","100%");e.setAttribute("x","0");e.setAttribute("y","0");e.setAttribute("externalResourcesRequired","true");c.appendChild(e);e.appendChild(a);return C(c)})}
var E=(a,b)=>{if(a instanceof b)return!0;a=Object.getPrototypeOf(a);return a===null?!1:a.constructor.name===b.name||E(a,b)};function F(a,b){return y(b).map(d=>{const c=a.getPropertyValue(d),e=a.getPropertyPriority(d);return`${d}: ${c}${e?" !important":""};`}).join(" ")}
function G(a,b,d,c){a=window.getComputedStyle(a,d);var e=a.getPropertyValue("content");if(e!==""&&e!=="none"){var f=v();try{b.className=`${b.className} ${f}`}catch(k){return}e=document.createElement("style");var g=e.appendChild;d=`.${f}:${d}`;a.cssText?(c=a.getPropertyValue("content"),c=`${a.cssText} content: '${c.replace(/'|"/g,"")}';`):c=F(a,c);g.call(e,document.createTextNode(`${d}{${c}}`));b.appendChild(e)}};function H(a){return a.search(/^(data:)/)!==-1}function I(a,b,d){return t(function*(){const c=yield fetch(a,b);if(c.status===404)throw Error(`Resource "${c.url}" not found`);const e=yield c.blob();return new Promise((f,g)=>{const k=new FileReader;k.onerror=g;k.onloadend=()=>{try{f(d({o:c,result:k.result}))}catch(m){g(m)}};k.readAsDataURL(e)})})}const J={};function K(a,b,d){let c=a.replace(/\?.*/,"");d&&(c=a);/ttf|otf|eot|woff2?/i.test(c)&&(c=c.replace(/.*\//,""));return b?`[${b}]${c}`:c}
function L(a,b,d){return t(function*(){const c=K(a,b,d.C);if(J[c]!=null)return J[c];d.u&&(a+=(/\?/.test(a)?"&":"?")+(new Date).getTime());let e;try{const f=yield I(a,d.i,({o:g,result:k})=>{b||(b=g.headers.get("Content-Type")||"");return k.split(/,/)[1]});e=`data:${b};base64,${f}`}catch(f){e=d.B||""}return J[c]=e})};const M={P:"application/font-woff",R:"application/font-woff",N:"application/font-truetype",v:"application/vnd.ms-fontobject",H:"image/png",F:"image/jpeg",D:"image/jpeg",A:"image/gif",M:"image/tiff",L:"image/svg+xml",O:"image/webp"};function N(a){return(a=/\.([^./]*?)$/g.exec(a))?a[1]:""};function O(a){return t(function*(){const b=a.toDataURL();return b==="data:,"?a.cloneNode(!1):B(b)})}function aa(a,b){return t(function*(){if(a.currentSrc){var d=document.createElement("canvas");const c=d.getContext("2d");d.width=a.clientWidth;d.height=a.clientHeight;c==null||c.drawImage(a,0,0,d.width,d.height);d=d.toDataURL();return B(d)}d=a.poster;d=yield L(d,M[N(d).toLowerCase()]||"",b);return B(d)})}
function ba(a,b){return t(function*(){try{let d;if(a==null?0:(d=a.contentDocument)==null?0:d.body)return yield P(a.contentDocument.body,b,!0)}catch(d){}return a.cloneNode(!1)})}function ca(a,b){return t(function*(){return E(a,HTMLCanvasElement)?O(a):E(a,HTMLVideoElement)?aa(a,b):E(a,HTMLIFrameElement)?ba(a,b):a.cloneNode(a.tagName!=null&&a.tagName.toUpperCase()==="SVG")})}
function da(a,b,d){return t(function*(){if(b.tagName!=null&&b.tagName.toUpperCase()==="SVG")return b;let c=[];if(a.tagName!=null&&a.tagName.toUpperCase()==="SLOT"&&a.assignedNodes)c=w(a.assignedNodes());else{let e;if(E(a,HTMLIFrameElement)&&((e=a.contentDocument)==null?0:e.body))c=w(a.contentDocument.body.childNodes);else{let f;c=w(((f=a.shadowRoot)!=null?f:a).childNodes)}}if(c.length===0||E(a,HTMLVideoElement))return b;yield c.reduce((e,f)=>e.then(()=>P(f,d)).then(g=>{g&&b.appendChild(g)}),Promise.resolve());
return b})}function ea(a,b,d){const c=b.style;if(c){var e=window.getComputedStyle(a);e.cssText?(c.cssText=e.cssText,c.transformOrigin=e.transformOrigin):y(d).forEach(f=>{let g=e.getPropertyValue(f);f==="font-size"&&g.endsWith("px")&&(g=`${Math.floor(parseFloat(g.substring(0,g.length-2)))-.1}px`);E(a,HTMLIFrameElement)&&f==="display"&&g==="inline"&&(g="block");f==="d"&&b.getAttribute("d")&&(g=`path(${b.getAttribute("d")})`);c.setProperty(f,g,e.getPropertyPriority(f))})}}
function fa(a,b){E(a,HTMLSelectElement)&&(b=Array.from(b.children).find(d=>a.value===d.getAttribute("value")))&&b.setAttribute("selected","")}
function ha(a,b){return t(function*(){var d=a.querySelectorAll?a.querySelectorAll("use"):[];if(d.length===0)return a;var c={};for(var e=0;e<d.length;e++){var f=d[e].getAttribute("xlink:href");if(f){const g=document.querySelector(f);a.querySelector(f)||!g||c[f]||(c[f]=yield P(g,b,!0))}}d=Object.values(c);if(d.length){c=document.createElementNS("http://www.w3.org/1999/xhtml","svg");c.setAttribute("xmlns","http://www.w3.org/1999/xhtml");c.style.position="absolute";c.style.width="0";c.style.height="0";
c.style.overflow="hidden";c.style.display="none";e=document.createElementNS("http://www.w3.org/1999/xhtml","defs");c.appendChild(e);for(f=0;f<d.length;f++)e.appendChild(d[f]);a.appendChild(c)}return a})}
function P(a,b,d){return t(function*(){return d||!b.filter||b.filter(a)?Promise.resolve(a).then(c=>ca(c,b)).then(c=>da(a,c,b)).then(c=>{E(c,Element)&&(ea(a,c,b),G(a,c,":before",b),G(a,c,":after",b),E(a,HTMLTextAreaElement)&&(c.textContent=a.value),E(a,HTMLInputElement)&&c.setAttribute("value",a.value),fa(a,c));return c}).then(c=>ha(c,b)):null})};const Q=/url\((['"]?)([^'"]+?)\1\)/g,ia=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,ja=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function ka(a){const b=[];a.replace(Q,(d,c,e)=>{b.push(e);return d});return b.filter(d=>!H(d))}
function la(a,b,d,c){return t(function*(){try{const e=d?(new URL(b,d||void 0)).toString():b;let f;f=yield L(e,M[N(b).toLowerCase()]||"",c);return a.replace(new RegExp(`(url\\(['"]?)(${b.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")})(['"]?\\))`,"g"),`$1${f}$3`)}catch(e){}return a})}function ma(a,{I:b}){return b?a.replace(ja,d=>{for(;;){const [c,,e]=ia.exec(d)||[],f=c,g=e;if(!g)return"";if(g===b)return`src: ${f};`}}):a}
function R(a,b,d){return t(function*(){if(a.search(Q)===-1)return a;const c=ma(a,d);return ka(c).reduce((e,f)=>e.then(g=>la(g,f,b,d)),Promise.resolve(c))})};function S(a,b,d){return t(function*(){var c;const e=(c=b.style)==null?void 0:c.getPropertyValue(a);return e?(c=yield R(e,null,d),b.style.setProperty(a,c,b.style.getPropertyPriority(a)),!0):!1})}function na(a,b){return t(function*(){(yield S("background",a,b))||(yield S("background-image",a,b));(yield S("mask",a,b))||(yield S("-webkit-mask",a,b))||(yield S("mask-image",a,b))||(yield S("-webkit-mask-image",a,b))})}
function oa(a,b){return t(function*(){const d=E(a,HTMLImageElement);if(d&&!H(a.src)||E(a,SVGImageElement)&&!H(a.href.baseVal)){var c=d?a.src:a.href.baseVal,e=yield L(c,M[N(c).toLowerCase()]||"",b);yield new Promise((f,g)=>{a.onload=f;a.onerror=b.m?(...k)=>{try{f(b.m(...k))}catch(m){g(m)}}:g;a.decode&&(a.decode=f);a.loading==="lazy"&&(a.loading="eager");d?(a.srcset="",a.src=e):a.href.baseVal=e})}})}
function pa(a,b){return t(function*(){const d=w(a.childNodes).map(c=>T(c,b));yield Promise.all(d).then(()=>a)})}function T(a,b){return t(function*(){E(a,Element)&&(yield na(a,b),yield oa(a,b),yield pa(a,b))})};const U={};function V(a){return t(function*(){var b=U[a];if(b!=null)return b;b=yield(yield fetch(a)).text();b={url:a,cssText:b};return U[a]=b})}function W(a,b){return t(function*(){let d=a.cssText;const c=/url\(["']?([^"')]+)["']?\)/g,e=(d.match(/url\([^)]+\)/g)||[]).map(f=>t(function*(){let g=f.replace(c,"$1");g.startsWith("https://")||(g=(new URL(g,a.url)).href);return I(g,b.i,({result:k})=>{d=d.replace(f,`url(${k})`);return[f,k]})}));return Promise.all(e).then(()=>d)})}
function X(a){if(a==null)return[];const b=[];a=a.replace(/(\/\*[\s\S]*?\*\/)/gi,"");for(var d=RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");;){var c=d.exec(a);if(c===null)break;b.push(c[0])}a=a.replace(d,"");d=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi;for(c=RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");;){let e=d.exec(a);if(e===null)if(e=c.exec(a),e===null)break;else d.lastIndex=c.lastIndex;else c.lastIndex=
d.lastIndex;b.push(e[0])}return b}
function qa(a,b){return t(function*(){const d=[],c=[];a.forEach(e=>{if("cssRules"in e)try{w(e.cssRules||[]).forEach((f,g)=>{if(f.type===CSSRule.IMPORT_RULE){let k=g+1;f=V(f.href).then(m=>W(m,b)).then(m=>X(m).forEach(q=>{try{e.insertRule(q,q.startsWith("@import")?k+=1:e.cssRules.length)}catch(Da){}})).catch(()=>{});c.push(f)}})}catch(f){const g=a.find(k=>k.href==null)||document.styleSheets[0];e.href!=null&&c.push(V(e.href).then(k=>W(k,b)).then(k=>X(k).forEach(m=>{g.insertRule(m,g.cssRules.length)})).catch(()=>
{}))}});return Promise.all(c).then(()=>{a.forEach(e=>{if("cssRules"in e)try{w(e.cssRules||[]).forEach(f=>{d.push(f)})}catch(f){}});return d})})}function ra(a){return a.filter(b=>b.type===CSSRule.FONT_FACE_RULE).filter(b=>b.style.getPropertyValue("src").search(Q)!==-1)}function sa(a,b){return t(function*(){if(a.ownerDocument==null)throw Error("Provided element is not within a Document");var d=w(a.ownerDocument.styleSheets);d=yield qa(d,b);return ra(d)})}
function ta(a){function b(c){(c.style.fontFamily||getComputedStyle(c).fontFamily).split(",").forEach(e=>{d.add(e.trim().replace(/["']/g,""))});Array.from(c.children).forEach(e=>{e instanceof HTMLElement&&b(e)})}const d=new Set;b(a);return d}function ua(a,b){return t(function*(){const d=yield sa(a,b),c=ta(a);return(yield Promise.all(d.filter(e=>c.has(e.style.fontFamily.trim().replace(/["']/g,""))).map(e=>R(e.cssText,e.parentStyleSheet?e.parentStyleSheet.href:null,b)))).join("\n")})}
function va(a,b){return t(function*(){const d=b.j!=null?b.j:b.K?null:yield ua(a,b);if(d){const c=document.createElement("style");c.appendChild(document.createTextNode(d));a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)}})};function wa(a,b={}){return t(function*(){const {width:d,height:c}=A(a,b),e=yield P(a,b,!0);yield va(e,b);yield T(e,b);u(e,b);return yield D(e,d,c)})}
function xa(a,b={}){return t(function*(){const {width:d,height:c}=A(a,b);var e=yield wa(a,b);e=yield B(e);const f=document.createElement("canvas"),g=f.getContext("2d"),k=b.G||window.devicePixelRatio||1,m=b.h||d,q=b.g||c;f.width=m*k;f.height=q*k;!b.J&&(f.width>16384||f.height>16384)&&(f.width>16384&&f.height>16384?f.width>f.height?(f.height*=16384/f.width,f.width=16384):(f.width*=16384/f.height,f.height=16384):f.width>16384?(f.height*=16384/f.width,f.width=16384):(f.width*=16384/f.height,f.height=
16384));f.style.width=`${m}`;f.style.height=`${q}`;b.backgroundColor&&(g.fillStyle=b.backgroundColor,g.fillRect(0,0,f.width,f.height));g.drawImage(e,0,0,f.width,f.height);return f})}function ya(a,b={}){return t(function*(){return(yield xa(a,b)).toDataURL()})};const za=["gemini.google.com","corp.google.com","proxy.googlers.com"];function Y(){return document.body.querySelectorAll('[class*="animate"]').length>0}function Z(a){return t(function*(){try{return yield ya(a,{h:a.offsetWidth,g:a.offsetHeight})}catch(d){var b=a.offsetHeight;const c=document.createElement("canvas");c.width=a.offsetWidth;c.height=b;return c.toDataURL("image/png")}})}
function Aa(){return t(function*(){const a=document.body.offsetWidth,b=document.body.offsetHeight,d=document.body.cloneNode(!0);d.querySelectorAll('[class*="animate"]').forEach(c=>{c.classList.remove(...Array.from(c.classList).filter(e=>e.startsWith("animate")))});d.style.width=`${a}px`;d.style.height=`${b}px`;return d})}
function Ba(a){return t(function*(){let b=document.body;if(Y()){var d=yield Aa();b=d;document.body.appendChild(d)}d=yield Z(b);Y()&&document.body.removeChild(b);window.parent.postMessage({type:"SEND_SCREENSHOT",image:d,topOffset:document.documentElement.scrollTop},a.origin)})}function Ca(a){return t(function*(){const b={type:"SEND_SCREENSHOT_FOR_DATA_VISUALIZATION",image:yield Z(document.body),topOffset:0};window.parent.postMessage(b,a.origin)})}
window.addEventListener("message",a=>t(function*(){if(za.some(d=>a.origin.includes(d))){var b=a.data;b&&(b.type==="MAKE_SCREENSHOT"&&(yield Ba(a)),b.type==="MAKE_SCREENSHOT_FOR_DATA_VISUALIZATION"&&(yield Ca(a)))}}));
</script><script>(function() {
  // Ensure this script is executed only once
  if (window.firebaseAuthBridgeScriptLoaded) {
    return;
  }
  window.firebaseAuthBridgeScriptLoaded = true;

  let nextTokenPromiseId = 0;

  // Stores { resolve, reject } for ongoing token requests
  const pendingTokenPromises = {};

  // Listen for messages from the Host Application
  window.addEventListener('message', function(event) {

    const messageData = event.data;

  if (messageData && messageData.type === 'RESOLVE_NEW_FIREBASE_TOKEN') {
      const { success, token, error, promiseId } = messageData ?? {};
      if (pendingTokenPromises[promiseId]) {
        if (success) {
          pendingTokenPromises[promiseId].resolve(token);
        } else {
          pendingTokenPromises[promiseId].reject(new Error(error || 'Token refresh failed from host.'));
        }
        delete pendingTokenPromises[promiseId];
      }
    }
  });

  // Expose a function for the Generated App to request a new Firebase token
  window.requestNewFirebaseToken = function() {
    const currentPromiseId = nextTokenPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingTokenPromises[currentPromiseId] = { resolve, reject };
    });
    if (window.parent && window.parent !== window) {
      window.parent.postMessage({
        type: 'REQUEST_NEW_FIREBASE_TOKEN',
        promiseId: currentPromiseId
      }, '*');
    } else {
      pendingTokenPromises[currentPromiseId].reject(new Error('No parent window to request token from.'));
      delete pendingTokenPromises[currentPromiseId];
    }
    return promise;
  };
})();</script><script>
let realOriginalGetUserMedia = null;
if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
  realOriginalGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);
}

(function() {
  if (navigator.mediaDevices && navigator.mediaDevices.__proto__) {
    try {
      Object.defineProperty(navigator.mediaDevices.__proto__, 'getUserMedia', {
        get: function() {
          return undefined; // Or throw an error
        },
        configurable: false
      });
    } catch (error) {
      console.error("Error defining prototype getter:", error);
    }
  }
})();

(function() {
  const pendingMediaResolvers = {};
  let nextMediaPromiseId = 0;

  function requestMediaPermissions(constraints) {
    const mediaPromiseId = nextMediaPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingMediaResolvers[mediaPromiseId] = (granted) => {
        delete pendingMediaResolvers[mediaPromiseId];
        resolve(granted);
      };
    });

    window.parent.postMessage({
      type: 'requestMediaPermission',
      constraints: constraints,
      promiseId: mediaPromiseId,
    }, '*');

    return promise;
  }

  let originalGetUserMedia = realOriginalGetUserMedia;

  function interceptGetUserMedia() {
    if (navigator.mediaDevices) {
      Object.defineProperty(navigator.mediaDevices, 'getUserMedia', {
        value: function(constraints) {
          return requestMediaPermissions(constraints).then((granted) => {
            if (granted) {
              if (originalGetUserMedia) {
                return originalGetUserMedia(constraints);
              } else {
                throw new Error("Original getUserMedia not available.");
              }
            } else {
              throw new DOMException('Permission denied', 'NotAllowedError');
            }
          });
        },
        writable: false,
        configurable: false
      });
    }
  }

  interceptGetUserMedia();

  const observer = new MutationObserver(function(mutationsList, observer) {
    for (const mutation of mutationsList) {
      if (mutation.type === 'reconfigured' && mutation.name === 'getUserMedia' && mutation.object === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'attributes' && mutation.attributeName === 'getUserMedia' && mutation.target === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'childList' && mutation.addedNodes) {
        mutation.addedNodes.forEach(node => {
          if (node === navigator.mediaDevices) {
            interceptGetUserMedia();
          }
        });
      }
    }
  });

  function interceptSpeechRecognition() {
    if (!window.SpeechRecognition && !window.webkitSpeechRecognition) {
      return;
    }

    const OriginalSpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

    const SpeechRecognitionWrapper = function(...args) {
      const recognizer = new OriginalSpeechRecognition(...args);
      const originalStart = recognizer.start.bind(recognizer);

      recognizer.start = function() {
        requestMediaPermissions({ audio: true }).then(granted => {
          if (granted) {
            originalStart();
          } else {
            const errorEvent = new SpeechRecognitionErrorEvent('error');
            errorEvent.error = 'not-allowed'; // This is the standard error for permission denial.
            recognizer.dispatchEvent(errorEvent);
          }
        });
      };

      return recognizer;
    };

    SpeechRecognitionWrapper.prototype = OriginalSpeechRecognition.prototype;
    SpeechRecognitionWrapper.prototype.constructor = SpeechRecognitionWrapper;

    if (window.SpeechRecognition) {
      window.SpeechRecognition = SpeechRecognitionWrapper;
    }
    if (window.webkitSpeechRecognition) {
      window.webkitSpeechRecognition = SpeechRecognitionWrapper;
    }
  }

  interceptSpeechRecognition();

  window.addEventListener('message', function(event) {
    if (event.data) {
      if (event.data.type === 'resolveMediaPermission') {
        const { promiseId, granted } = event.data;
        if (pendingMediaResolvers[promiseId]) {
          pendingMediaResolvers[promiseId](granted);
        }
      }
    }
  });

})();</script><script>((function(modelInformation) {
  const originalFetch = window.fetch;
  // TODO: b/421908508 - Move these out of the script and match all generative AI model calls.
  let googleLlmBaseApiUrls = [
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':streamGenerateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageEditModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageTransformModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.ttsModelName + ':generateContent',
  ];
  modelInformation.deprecatedTextModelNames.forEach((modelName) => {
    googleLlmBaseApiUrls.push(
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':streamGenerateContent',
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':generateContent',
    );
  });
  modelInformation.deprecatedImageModelNames.forEach((modelName) => {
    googleLlmBaseApiUrls.push(
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':predict',
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':predictLongRunning',
    );
  });

  const pendingFetchResolvers = {};
  let nextPromiseId = 0;

  function handleStringInput(input, optionsArgument) {
    const actualUrl = input;
    const fetchCallArgs = [actualUrl, optionsArgument];
    const effectiveOptions = optionsArgument || {};
    const bodyForApiKeyCheck = effectiveOptions.body;
    const bodyForPostMessage = effectiveOptions.body;
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  function handleRequestInput(input, optionsArgument) {
    const actualUrl = input.url;
    const fetchCallArgs = [input, optionsArgument];
    const effectiveOptions = { method: input.method, headers: new Headers(input.headers) };
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (optionsArgument) {
      if (optionsArgument.method) effectiveOptions.method = optionsArgument.method;
      if (optionsArgument.headers) effectiveOptions.headers = new Headers(optionsArgument.headers);
      if ('body' in optionsArgument) {
        bodyForApiKeyCheck = optionsArgument.body;
        bodyForPostMessage = optionsArgument.body;
      } else {
        bodyForApiKeyCheck = undefined;
        bodyForPostMessage = input.body;
      }
    } else {
      bodyForApiKeyCheck = undefined;
      bodyForPostMessage = input.body;
    }
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  window.fetch = function(input, optionsArgument) {
    let actualUrl;
    let fetchCallArgs;
    let effectiveOptions = {};
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (typeof input === 'string') {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleStringInput(input, optionsArgument));
    } else if (input instanceof Request) {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleRequestInput(input, optionsArgument));
    } else {
      return originalFetch.apply(window, [input, optionsArgument]);
    }

    effectiveOptions.method = effectiveOptions.method || 'GET';
    if (!effectiveOptions.headers) {
      effectiveOptions.headers = new Headers();
    }


    if (typeof actualUrl === 'string' && googleLlmBaseApiUrls.some((url) => actualUrl.startsWith(url))) {
      let apiKeyIsNull = true;

      const regex = new RegExp("models/([^:]+)");
      const modelNameMatch = actualUrl.match(regex);
      const modelName = modelNameMatch ? modelNameMatch[1] : 'unspecified';


      try {
        const urlObject = new URL(actualUrl);  // Use URL object for robust parsing
        const apiKeyParam = urlObject.searchParams.get('key');
        if (apiKeyParam) {
          apiKeyIsNull = false;
        }
      } catch (e) {
        // Continue checks even if URL parsing fails
      }

      if (apiKeyIsNull && effectiveOptions.headers) {
        const h = new Headers(effectiveOptions.headers);
        const apiKeyHeaderValue = h.get('X-API-Key') || h.get('x-api-key');
        if (apiKeyHeaderValue) {
          apiKeyIsNull = false;
          return originalFetch.apply(window, fetchCallArgs);
        }
      }

      if (apiKeyIsNull && effectiveOptions.method && ['POST', 'PUT', 'PATCH'].includes(effectiveOptions.method.toUpperCase()) && typeof bodyForApiKeyCheck === 'string') {
        try {
          const bodyData = JSON.parse(bodyForApiKeyCheck);
          if (bodyData && bodyData.apiKey) {
            apiKeyIsNull = false;
            return originalFetch.apply(window, fetchCallArgs);
          }
        } catch (e) {
          // Ignore JSON parsing errors
        }
      }

      if(apiKeyIsNull) {
        const promiseId = nextPromiseId++;
        const promise = new Promise((resolve) => {
          pendingFetchResolvers[promiseId] = (resolvedResponse) => {
            delete pendingFetchResolvers[promiseId];
            resolve(resolvedResponse);
          };
        });

        let serializedBodyForPostMessage;
        if (typeof bodyForPostMessage === 'string' || bodyForPostMessage == null) {
            serializedBodyForPostMessage = bodyForPostMessage;
        } else if (bodyForPostMessage instanceof ReadableStream) {
            serializedBodyForPostMessage = null;
        } else {
            try {
                serializedBodyForPostMessage = JSON.stringify(bodyForPostMessage);
            } catch (e) {
                serializedBodyForPostMessage = null;
            }
        }

        const messageOptions = {
            method: effectiveOptions.method,
            headers: Object.fromEntries(new Headers(effectiveOptions.headers).entries()),
            body: serializedBodyForPostMessage
        };

        window.parent.postMessage({
          type: 'requestFetch',
          url: actualUrl,
          modelName: modelName,
          options: messageOptions,
          promiseId: promiseId,
        }, '*');

        return promise;
      }
      return originalFetch.apply(window, fetchCallArgs);
    }
    return originalFetch.apply(window, fetchCallArgs);
  };

  window.addEventListener('message', function(event) {
    if (event.data && event.data.type === 'resolveFetch') {
      const { promiseId, response } = event.data;
      if (pendingFetchResolvers[promiseId]) {
        try {
          const reconstructedResponse = new Response(response.body, {
            status: response.status,
            statusText: response.statusText,
            headers: new Headers(response.headers),
          });
          pendingFetchResolvers[promiseId](reconstructedResponse);
        } catch (error) {
          pendingFetchResolvers[promiseId](new Response(null, { status: 500, statusText: "Interceptor Response Reconstruction Error" }));
        }
      }
    }
  });

}))({"textModelName":"gemini-2.5-flash-preview-09-2025","imageModelName":"imagen-4.0-generate-001","imageEditModelName":"gemini-2.5-flash-image-preview","imageTransformModelName":"gemini-3-pro-image-preview-11-2025","videoModelName":"veo-2.0-generate-001","ttsModelName":"gemini-2.5-flash-preview-tts","deprecatedTextModelNames":["gemini-2.0-flash","gemini-2.5-flash-preview-04-17","gemini-2.5-flash-preview-05-20"],"deprecatedImageModelNames":["imagen-3.0-generate-001","imagen-3.0-generate-002"]})</script><script>(function() {
  const originalConsoleLog = console.log;
  const originalConsoleError = console.error;

    /**
   * Normalizes an error event or a promise rejection reason into a structured error object.
   * @param {*} errorEventOrReason The error object or reason.
   * @return {object} Structured error data { message, name, stack }.
   */
  function getErrorObject(errorEventOrReason) {
    if (errorEventOrReason instanceof Error) {
      return {
        message: errorEventOrReason.message,
        name: errorEventOrReason.name,
        stack: errorEventOrReason.stack,
      };
    }
    // Fallback for non-Error objects.
    try {
      return {
        message: JSON.stringify(errorEventOrReason),
        name: 'UnknownErrorType',
        stack: null,
      };
    } catch (e) {
      return {
        message: String(errorEventOrReason),
        name: 'UnknownErrorTypeNonStringifiable',
        stack: null,
      };
    }
  }

  /**
   * Converts an array of arguments (from log/error) into a single string.
   * Handles Error objects specially to include their message and stack.
   * @param {Array<*>} args - Arguments passed to console methods.
   * @return {string} A string representation of the arguments.
   */
  function stringifyArgs(args) {
    return args
      .map((arg) => {
        if (arg instanceof Error) {
          const {message, stack} = arg;
          return `Error: ${message}${stack ? ('\nStack: ' + stack) : ''}`;
        }
        if (typeof arg === 'object' && arg !== null) {
          try {
            return JSON.stringify(arg);
          } catch (error) {
            return '[Circular Object]';
          }
        } else {
          return String(arg);
        }
      })
      .join(' ');
  }

  console.log = function(...args) {
    const logString = stringifyArgs(args);
    window.parent.postMessage({ type: 'log', message: logString }, '*');
    originalConsoleLog.apply(console, args);
  };

  console.error = function(...args) {
    let errorData;
    if (args.length > 0 && args[0] instanceof Error) {
      const err = args[0];
      // If the first arg is an Error, capture its details.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        ...getErrorObject(err),
        rawArgsString: stringifyArgs(args.slice(1)),
        timestamp: new Date().toISOString(),
      };
    } else {
      // If not an Error object, treat all args as a general error message.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        message: stringifyArgs(args),
        name: 'ConsoleLoggedError',
        stack: null,
        timestamp: new Date().toISOString(),
      };
    }
    window.parent.postMessage(errorData, '*');
    originalConsoleError.apply(console, args);
  };

  // Listen for global unhandled synchronous errors.
  window.addEventListener('error', function(event) {
    const errorDetails = event.error ? getErrorObject(event.error) : {
      message: event.message,
      name: 'GlobalError',
      stack: null,
      filename: event.filename,
      lineno: event.lineno,
      colno: event.colno,
    };

    window.parent.postMessage({
      type: 'error',
      source: 'global',
      ...errorDetails,
      message: errorDetails.message || event.message,
      timestamp: new Date().toISOString(),
    }, '*');
  });

  // Listen for unhandled promise rejections (asynchronous errors).
  window.addEventListener('unhandledrejection', function(event) {
    const errorDetails = getErrorObject(event.reason);

    window.parent.postMessage({
      type: 'error',
      source: 'unhandledrejection',
      ...errorDetails,
      message: errorDetails.message || 'Unhandled Promise Rejection',
      timestamp: new Date().toISOString(),
    }, '*');
  });

})();</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>快樂學加法 - 夾公仔機版</title>

    <!-- React & ReactDOM -->
    <script crossorigin="anonymous" src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin="anonymous" src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js" crossorigin="anonymous"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Framer Motion -->
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js" crossorigin="anonymous"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest" crossorigin="anonymous"></script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&amp;family=Varela+Round&amp;display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Varela Round', 'Noto Sans TC', sans-serif;
            background-color: #FEF9C3; /* soft yellow */
            overflow-x: hidden;
            touch-action: manipulation; /* Disable double-tap zoom */
        }

        /* Glassmorphism Utilities */
        .glass {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .glass-dark {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Holographic Effect for FAB */
        .holographic {
            background: linear-gradient(135deg, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0.4) 100%),
                        linear-gradient(90deg, #ff00cc, #3333ff, #00ccff, #ff00cc);
            background-size: 200% 200%;
            animation: holoGradient 4s ease infinite;
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.6);
            box-shadow: 0 4px 15px rgba(0, 204, 255, 0.3);
        }

        @keyframes holoGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Custom Scrollbar for Settings */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #888; 
            border-radius: 3px;
        }

        /* Animations for Claw */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        .animate-float {
            animation: float 3s ease-in-out infinite;
        }
    </style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.fixed{position:fixed}.relative{position:relative}.bottom-4{bottom:1rem}.left-4{left:1rem}.right-4{right:1rem}.top-4{top:1rem}.z-50{z-index:50}.mb-2{margin-bottom:0.5rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.ml-1{margin-left:0.25rem}.mt-auto{margin-top:auto}.block{display:block}.flex{display:flex}.h-12{height:3rem}.min-h-\[80vh\]{min-height:80vh}.min-h-screen{min-height:100vh}.w-12{width:3rem}.w-full{width:100%}.max-w-0{max-width:0px}.max-w-md{max-width:28rem}.flex-grow{flex-grow:1}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-center{justify-content:center}.gap-2{gap:0.5rem}.overflow-hidden{overflow:hidden}.whitespace-nowrap{white-space:nowrap}.rounded-3xl{border-radius:1.5rem}.rounded-full{border-radius:9999px}.rounded-xl{border-radius:0.75rem}.border{border-width:1px}.border-2{border-width:2px}.border-slate-200{--tw-border-opacity:1;border-color:rgb(226 232 240 / var(--tw-border-opacity, 1))}.border-yellow-200{--tw-border-opacity:1;border-color:rgb(254 240 138 / var(--tw-border-opacity, 1))}.bg-blue-500{--tw-bg-opacity:1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.bg-gray-300{--tw-bg-opacity:1;background-color:rgb(209 213 219 / var(--tw-bg-opacity, 1))}.bg-slate-100{--tw-bg-opacity:1;background-color:rgb(241 245 249 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white\/60{background-color:rgb(255 255 255 / 0.6)}.bg-white\/80{background-color:rgb(255 255 255 / 0.8)}.bg-yellow-50\/50{background-color:rgb(254 252 232 / 0.5)}.p-3{padding:0.75rem}.p-6{padding:1.5rem}.px-4{padding-left:1rem;padding-right:1rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.py-4{padding-top:1rem;padding-bottom:1rem}.text-left{text-align:left}.text-center{text-align:center}.text-8xl{font-size:6rem;line-height:1}.text-xs{font-size:0.75rem;line-height:1rem}.font-bold{font-weight:700}.font-extrabold{font-weight:800}.text-blue-600{--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-slate-400{--tw-text-opacity:1;color:rgb(148 163 184 / var(--tw-text-opacity, 1))}.text-slate-500{--tw-text-opacity:1;color:rgb(100 116 139 / var(--tw-text-opacity, 1))}.text-slate-600{--tw-text-opacity:1;color:rgb(71 85 105 / var(--tw-text-opacity, 1))}.text-slate-700{--tw-text-opacity:1;color:rgb(51 65 85 / var(--tw-text-opacity, 1))}.text-slate-800{--tw-text-opacity:1;color:rgb(30 41 59 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.backdrop-blur-md{--tw-backdrop-blur:blur(12px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-sm{--tw-backdrop-blur:blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.duration-300{transition-duration:300ms}.ease-in-out{transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.hover\:scale-105:hover{--tw-scale-x:1.05;--tw-scale-y:1.05;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:border-blue-200:hover{--tw-border-opacity:1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1))}.hover\:bg-blue-50:hover{--tw-bg-opacity:1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.hover\:bg-blue-600:hover{--tw-bg-opacity:1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.hover\:text-blue-600:hover{--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.focus\:border-blue-400:focus{--tw-border-opacity:1;border-color:rgb(96 165 250 / var(--tw-border-opacity, 1))}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring-4:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(4px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.focus\:ring-blue-300:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(147 197 253 / var(--tw-ring-opacity, 1))}.group:hover .group-hover\:max-w-xs{max-width:20rem}</style><script>"use strict";

function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }
function _toConsumableArray(r) { return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread(); }
function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _iterableToArray(r) { if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r); }
function _arrayWithoutHoles(r) { if (Array.isArray(r)) return _arrayLikeToArray(r); }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == _typeof(i) ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != _typeof(i)) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }
function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
function _iterableToArrayLimit(r, l) { var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t["return"] && (u = t["return"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }
function _arrayWithHoles(r) { if (Array.isArray(r)) return r; }
var _React = React,
  useState = _React.useState,
  useEffect = _React.useEffect,
  useRef = _React.useRef,
  useMemo = _React.useMemo;
var _window$Motion = window.Motion,
  motion = _window$Motion.motion,
  AnimatePresence = _window$Motion.AnimatePresence;

// --- Icons ---
var Icons = {
  Settings: function Settings() {
    return /*#__PURE__*/React.createElement("i", {
      "data-lucide": "sliders-horizontal"
    });
  },
  Home: function Home() {
    return /*#__PURE__*/React.createElement("i", {
      "data-lucide": "home"
    });
  },
  Volume2: function Volume2() {
    return /*#__PURE__*/React.createElement("i", {
      "data-lucide": "volume-2"
    });
  },
  VolumeX: function VolumeX() {
    return /*#__PURE__*/React.createElement("i", {
      "data-lucide": "volume-x"
    });
  },
  Play: function Play() {
    return /*#__PURE__*/React.createElement("i", {
      "data-lucide": "play"
    });
  },
  ArrowLeft: function ArrowLeft() {
    return /*#__PURE__*/React.createElement("i", {
      "data-lucide": "arrow-left"
    });
  },
  Delete: function Delete() {
    return /*#__PURE__*/React.createElement("i", {
      "data-lucide": "delete"
    });
  },
  Check: function Check() {
    return /*#__PURE__*/React.createElement("i", {
      "data-lucide": "check"
    });
  },
  Coins: function Coins() {
    return /*#__PURE__*/React.createElement("i", {
      "data-lucide": "coins"
    });
  },
  Gift: function Gift() {
    return /*#__PURE__*/React.createElement("i", {
      "data-lucide": "gift"
    });
  },
  User: function User() {
    return /*#__PURE__*/React.createElement("i", {
      "data-lucide": "user"
    });
  },
  Star: function Star() {
    return /*#__PURE__*/React.createElement("i", {
      "data-lucide": "star"
    });
  },
  RefreshCw: function RefreshCw() {
    return /*#__PURE__*/React.createElement("i", {
      "data-lucide": "refresh-cw"
    });
  },
  Turtle: function Turtle() {
    return /*#__PURE__*/React.createElement("i", {
      "data-lucide": "turtle"
    });
  },
  Rabbit: function Rabbit() {
    return /*#__PURE__*/React.createElement("i", {
      "data-lucide": "rabbit"
    });
  },
  Computer: function Computer() {
    return /*#__PURE__*/React.createElement("i", {
      "data-lucide": "monitor"
    });
  },
  Download: function Download() {
    return /*#__PURE__*/React.createElement("i", {
      "data-lucide": "download"
    });
  }
};

// --- Utility: TTS ---
var speak = function speak(text) {
  var rate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
  var force = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
  if (!window.speechSynthesis) return;
  // Cancel previous speech if forcing a new one
  if (force) window.speechSynthesis.cancel();
  var utterance = new SpeechSynthesisUtterance(text);
  utterance.lang = 'zh-HK'; // Default to Cantonese
  utterance.rate = rate;
  window.speechSynthesis.speak(utterance);
};

// --- Components ---

// 1. Settings Module
var SettingsModule = function SettingsModule(_ref) {
  var settings = _ref.settings,
    setSettings = _ref.setSettings;
  var _useState = useState(false),
    _useState2 = _slicedToArray(_useState, 2),
    isOpen = _useState2[0],
    setIsOpen = _useState2[1];

  // Font Sizes mapping (1-6)
  var fontSizes = [14, 16, 18, 22, 26, 32];
  // Speech Rates mapping (1-6)
  var speechRates = [0.5, 0.6, 0.7, 0.8, 0.9, 1.0];
  useEffect(function () {
    lucide.createIcons();
  }, [isOpen]);
  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(motion.button, {
    className: "fixed top-4 right-4 z-50 w-12 h-12 bg-blue-500 text-white rounded-xl shadow-lg flex items-center justify-center hover:bg-blue-600 focus:outline-none focus:ring-4 focus:ring-blue-300",
    whileTap: {
      scale: 0.9
    },
    onClick: function onClick() {
      return setIsOpen(!isOpen);
    },
    "aria-label": "\u504F\u597D\u8A2D\u5B9A"
  }, /*#__PURE__*/React.createElement(Icons.Settings, null)), /*#__PURE__*/React.createElement(AnimatePresence, null, isOpen && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(motion.div, {
    className: "fixed inset-0 bg-black/20 z-40",
    initial: {
      opacity: 0
    },
    animate: {
      opacity: 1
    },
    exit: {
      opacity: 0
    },
    onClick: function onClick() {
      return setIsOpen(false);
    }
  }), /*#__PURE__*/React.createElement(motion.div, {
    className: "fixed top-20 right-4 w-80 bg-white rounded-2xl shadow-2xl z-50 p-6 border-2 border-blue-100",
    initial: {
      x: 100,
      opacity: 0
    },
    animate: {
      x: 0,
      opacity: 1
    },
    exit: {
      x: 100,
      opacity: 0
    }
  }, /*#__PURE__*/React.createElement("h3", {
    className: "text-xl font-bold text-slate-700 mb-6 flex items-center gap-2"
  }, /*#__PURE__*/React.createElement(Icons.Settings, null), " \u8A2D\u5B9A"), /*#__PURE__*/React.createElement("div", {
    className: "mb-8"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex justify-between mb-2"
  }, /*#__PURE__*/React.createElement("span", {
    className: "text-slate-600 font-medium"
  }, "\u5B57\u9AD4\u5927\u5C0F"), /*#__PURE__*/React.createElement("span", {
    className: "text-blue-600 font-bold"
  }, fontSizes[settings.fontSizeIdx], "px")), /*#__PURE__*/React.createElement("input", {
    type: "range",
    min: "0",
    max: "5",
    step: "1",
    value: settings.fontSizeIdx,
    onChange: function onChange(e) {
      return setSettings(_objectSpread(_objectSpread({}, settings), {}, {
        fontSizeIdx: parseInt(e.target.value)
      }));
    },
    className: "w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"
  }), /*#__PURE__*/React.createElement("div", {
    className: "flex justify-between text-xs text-gray-400 mt-1"
  }, /*#__PURE__*/React.createElement("span", null, "\u5C0F"), /*#__PURE__*/React.createElement("span", null, "\u5927"))), /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("div", {
    className: "flex justify-between mb-2"
  }, /*#__PURE__*/React.createElement("span", {
    className: "text-slate-600 font-medium"
  }, "\u8AAA\u8A71\u901F\u5EA6"), /*#__PURE__*/React.createElement("span", {
    className: "text-blue-600 font-bold"
  }, speechRates[settings.speechRateIdx], "x")), /*#__PURE__*/React.createElement("input", {
    type: "range",
    min: "0",
    max: "5",
    step: "1",
    value: settings.speechRateIdx,
    onChange: function onChange(e) {
      return setSettings(_objectSpread(_objectSpread({}, settings), {}, {
        speechRateIdx: parseInt(e.target.value)
      }));
    },
    className: "w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-green-500"
  }), /*#__PURE__*/React.createElement("div", {
    className: "flex justify-between items-center text-gray-500 mt-2"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center gap-1"
  }, /*#__PURE__*/React.createElement(Icons.Turtle, {
    size: 16
  }), " \u6162"), /*#__PURE__*/React.createElement("div", {
    className: "flex items-center gap-1"
  }, "\u5FEB ", /*#__PURE__*/React.createElement(Icons.Rabbit, {
    size: 16
  })))), /*#__PURE__*/React.createElement("div", {
    className: "mt-8 flex items-center justify-between p-3 bg-blue-50 rounded-xl"
  }, /*#__PURE__*/React.createElement("span", {
    className: "text-slate-700 font-medium"
  }, "\u97F3\u6548\u958B\u95DC"), /*#__PURE__*/React.createElement("button", {
    onClick: function onClick() {
      return setSettings(_objectSpread(_objectSpread({}, settings), {}, {
        soundOn: !settings.soundOn
      }));
    },
    className: "w-12 h-7 rounded-full p-1 transition-colors ".concat(settings.soundOn ? 'bg-green-500' : 'bg-gray-300')
  }, /*#__PURE__*/React.createElement("div", {
    className: "w-5 h-5 bg-white rounded-full shadow-sm transform transition-transform ".concat(settings.soundOn ? 'translate-x-5' : 'translate-x-0')
  })))))));
};

// New Component: Download HTML Button
var DownloadBtn = function DownloadBtn() {
  useEffect(function () {
    lucide.createIcons();
  }, []);
  var handleDownload = function handleDownload() {
    // Get the full HTML content
    var htmlContent = "<!DOCTYPE html>\n" + document.documentElement.outerHTML;
    var blob = new Blob([htmlContent], {
      type: "text/html"
    });
    var url = URL.createObjectURL(blob);

    // Create temp link to download
    var a = document.createElement("a");
    a.href = url;
    a.download = "happy_addition_game.html";
    document.body.appendChild(a);
    a.click();

    // Cleanup
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
  };
  return /*#__PURE__*/React.createElement(motion.button, {
    initial: {
      opacity: 0,
      x: -20
    },
    animate: {
      opacity: 1,
      x: 0
    },
    onClick: handleDownload,
    className: "fixed bottom-4 left-4 z-50 bg-white/80 backdrop-blur-md p-3 rounded-full shadow-lg border border-slate-200 text-slate-600 hover:bg-blue-50 hover:text-blue-600 hover:border-blue-200 transition-all flex items-center gap-2 group",
    title: "\u4E0B\u8F09\u7DB2\u9801\u539F\u59CB\u78BC"
  }, /*#__PURE__*/React.createElement(Icons.Download, null), /*#__PURE__*/React.createElement("span", {
    className: "max-w-0 overflow-hidden group-hover:max-w-xs transition-all duration-300 ease-in-out text-xs font-bold whitespace-nowrap"
  }, "\u4E0B\u8F09\u539F\u59CB\u78BC"));
};

// 2. Custom Keypad (For Input Questions)
var CustomKeypad = function CustomKeypad(_ref2) {
  var onInput = _ref2.onInput,
    onDelete = _ref2.onDelete,
    onSubmit = _ref2.onSubmit,
    disabled = _ref2.disabled;
  var keys = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0];
  return /*#__PURE__*/React.createElement("div", {
    className: "grid grid-cols-3 gap-3 max-w-sm mx-auto mt-6"
  }, keys.map(function (k) {
    return /*#__PURE__*/React.createElement(motion.button, {
      key: k,
      whileTap: {
        scale: 0.9
      },
      onClick: function onClick() {
        return onInput(k);
      },
      disabled: disabled,
      className: "h-16 bg-white border-2 border-blue-200 rounded-2xl text-2xl font-bold text-slate-700 shadow-[0_4px_0_rgb(219,234,254)] active:shadow-none active:translate-y-1 disabled:opacity-50"
    }, k);
  }), /*#__PURE__*/React.createElement(motion.button, {
    whileTap: {
      scale: 0.9
    },
    onClick: onDelete,
    disabled: disabled,
    className: "h-16 bg-red-100 border-2 border-red-200 rounded-2xl text-red-600 flex items-center justify-center shadow-[0_4px_0_rgb(254,226,226)] active:shadow-none active:translate-y-1 disabled:opacity-50"
  }, /*#__PURE__*/React.createElement(Icons.Delete, null)), /*#__PURE__*/React.createElement(motion.button, {
    whileTap: {
      scale: 0.9
    },
    onClick: onSubmit,
    disabled: disabled,
    className: "h-16 col-span-2 bg-green-500 border-2 border-green-600 rounded-2xl text-white font-bold text-xl flex items-center justify-center gap-2 shadow-[0_4px_0_rgb(22,163,74)] active:shadow-none active:translate-y-1 disabled:opacity-50"
  }, "\u78BA\u8A8D ", /*#__PURE__*/React.createElement(Icons.Check, null)));
};

// 3. Game Screens

// Welcome Screen
var WelcomeScreen = function WelcomeScreen(_ref3) {
  var onStart = _ref3.onStart,
    fontSize = _ref3.fontSize;
  var _useState3 = useState(""),
    _useState4 = _slicedToArray(_useState3, 2),
    name = _useState4[0],
    setName = _useState4[1];
  return /*#__PURE__*/React.createElement(motion.div, {
    initial: {
      opacity: 0,
      y: 20
    },
    animate: {
      opacity: 1,
      y: 0
    },
    exit: {
      opacity: 0,
      y: -20
    },
    className: "flex flex-col items-center justify-center min-h-[80vh] p-6 text-center"
  }, /*#__PURE__*/React.createElement("div", {
    className: "mb-8 p-6 bg-white/60 rounded-full shadow-xl backdrop-blur-sm animate-float"
  }, /*#__PURE__*/React.createElement("span", {
    className: "text-8xl"
  }, "\uD83C\uDFD7\uFE0F")), /*#__PURE__*/React.createElement("h1", {
    className: "text-blue-600 font-extrabold mb-2",
    style: {
      fontSize: "".concat(fontSize * 1.5, "px")
    }
  }, "\u5FEB\u6A02\u5B78\u52A0\u6CD5"), /*#__PURE__*/React.createElement("p", {
    className: "text-slate-500 mb-8",
    style: {
      fontSize: "".concat(fontSize, "px")
    }
  }, "\u6211\u5011\u53BB\u593E\u79AE\u7269\u7D66\u7238\u7238\u5ABD\u5ABD\u5427\uFF01"), /*#__PURE__*/React.createElement("div", {
    className: "w-full max-w-md bg-white p-6 rounded-3xl shadow-xl border-2 border-yellow-200"
  }, /*#__PURE__*/React.createElement("label", {
    className: "block text-left text-slate-600 font-bold mb-2 ml-1",
    style: {
      fontSize: "".concat(fontSize, "px")
    }
  }, "\u4F60\u53EB\u4EC0\u9EBC\u540D\u5B57\uFF1F"), /*#__PURE__*/React.createElement("input", {
    type: "text",
    value: name,
    onChange: function onChange(e) {
      return setName(e.target.value);
    },
    placeholder: "\u4F8B\u5982\uFF1A\u5C0F\u660E",
    className: "w-full bg-slate-100 border-2 border-slate-200 rounded-xl px-4 py-4 mb-6 focus:outline-none focus:border-blue-400 text-center font-bold text-slate-700",
    style: {
      fontSize: "".concat(fontSize, "px")
    }
  }), /*#__PURE__*/React.createElement(motion.button, {
    whileHover: {
      scale: 1.05
    },
    whileTap: {
      scale: 0.95
    },
    onClick: function onClick() {
      return name.trim() && onStart(name);
    },
    disabled: !name.trim(),
    className: "w-full py-4 rounded-xl font-bold text-white shadow-lg transition-all ".concat(name.trim() ? 'bg-gradient-to-r from-blue-500 to-indigo-500 shadow-blue-300/50' : 'bg-gray-300 cursor-not-allowed'),
    style: {
      fontSize: "".concat(fontSize * 1.1, "px")
    }
  }, "\u958B\u59CB\u904A\u6232 \uD83D\uDE80")));
};

// Dashboard (Level Selection)
var Dashboard = function Dashboard(_ref4) {
  var user = _ref4.user,
    score = _ref4.score,
    onSelectLevel = _ref4.onSelectLevel,
    fontSize = _ref4.fontSize;
  var levels = [{
    id: 'L1',
    title: '初階：簡單加法',
    sub: '1+1=?',
    icon: '🍎',
    color: 'bg-green-100 border-green-300 text-green-700'
  }, {
    id: 'L2',
    title: '中階：湊成十',
    sub: '2+8=?',
    icon: '👐',
    color: 'bg-yellow-100 border-yellow-300 text-yellow-800'
  }, {
    id: 'L3',
    title: '高階：進位加法',
    sub: '9+9=?',
    icon: '🚀',
    color: 'bg-red-100 border-red-300 text-red-800'
  }, {
    id: 'SELF',
    title: '自學模式',
    sub: '自己出題',
    icon: '📝',
    color: 'bg-purple-100 border-purple-300 text-purple-800'
  }];
  return /*#__PURE__*/React.createElement("div", {
    className: "p-4 max-w-4xl mx-auto pt-20"
  }, /*#__PURE__*/React.createElement("header", {
    className: "flex justify-between items-center mb-8"
  }, /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("h2", {
    className: "font-bold text-slate-700",
    style: {
      fontSize: "".concat(fontSize * 1.2, "px")
    }
  }, "\u55E8\uFF0C", user, "\uFF01"), /*#__PURE__*/React.createElement("p", {
    className: "text-slate-500"
  }, "\u4ECA\u5929\u60F3\u6311\u6230\u4EC0\u9EBC\uFF1F")), /*#__PURE__*/React.createElement("div", {
    className: "bg-white px-4 py-2 rounded-2xl shadow-sm border border-slate-100 flex items-center gap-2"
  }, /*#__PURE__*/React.createElement("span", {
    className: "text-2xl"
  }, "\uD83D\uDCB0"), /*#__PURE__*/React.createElement("span", {
    className: "font-bold text-slate-700 text-xl"
  }, score.tokens))), /*#__PURE__*/React.createElement("div", {
    className: "grid grid-cols-1 md:grid-cols-2 gap-4"
  }, levels.map(function (lvl) {
    return /*#__PURE__*/React.createElement(motion.button, {
      key: lvl.id,
      whileHover: {
        scale: 1.02,
        y: -2
      },
      whileTap: {
        scale: 0.98
      },
      onClick: function onClick() {
        return onSelectLevel(lvl.id);
      },
      className: "p-6 rounded-3xl border-b-4 text-left shadow-sm flex items-center gap-4 ".concat(lvl.color)
    }, /*#__PURE__*/React.createElement("div", {
      className: "text-4xl"
    }, lvl.icon), /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("div", {
      className: "font-bold",
      style: {
        fontSize: "".concat(fontSize, "px")
      }
    }, lvl.title), /*#__PURE__*/React.createElement("div", {
      className: "opacity-80 text-sm"
    }, lvl.sub)));
  })), /*#__PURE__*/React.createElement(motion.button, {
    whileTap: {
      scale: 0.98
    },
    onClick: function onClick() {
      return onSelectLevel('REPORT');
    },
    className: "mt-8 w-full bg-white border-2 border-slate-200 rounded-2xl p-4 text-slate-600 font-bold flex items-center justify-center gap-2"
  }, /*#__PURE__*/React.createElement(Icons.User, null), " \u67E5\u770B\u6211\u7684\u6210\u5C31\u5831\u544A"));
};

// Game Interface
var GameInterface = function GameInterface(_ref5) {
  var levelId = _ref5.levelId,
    fontSize = _ref5.fontSize,
    speechRate = _ref5.speechRate,
    onBack = _ref5.onBack,
    onComplete = _ref5.onComplete,
    onEarnToken = _ref5.onEarnToken;
  var _useState5 = useState(0),
    _useState6 = _slicedToArray(_useState5, 2),
    currentQ = _useState6[0],
    setCurrentQ = _useState6[1];
  var _useState7 = useState([]),
    _useState8 = _slicedToArray(_useState7, 2),
    questions = _useState8[0],
    setQuestions = _useState8[1];
  var _useState9 = useState(""),
    _useState0 = _slicedToArray(_useState9, 2),
    userInput = _useState0[0],
    setUserInput = _useState0[1];
  var _useState1 = useState(null),
    _useState10 = _slicedToArray(_useState1, 2),
    feedback = _useState10[0],
    setFeedback = _useState10[1]; // 'correct' | 'wrong' | null
  var _useState11 = useState(0),
    _useState12 = _slicedToArray(_useState11, 2),
    attempts = _useState12[0],
    setAttempts = _useState12[1]; // Track wrong attempts per question
  var _useState13 = useState(0),
    _useState14 = _slicedToArray(_useState13, 2),
    totalWrong = _useState14[0],
    setTotalWrong = _useState14[1]; // For grit score
  var _useState15 = useState(levelId === 'SELF'),
    _useState16 = _slicedToArray(_useState15, 2),
    selfSetup = _useState16[0],
    setSelfSetup = _useState16[1]; // Is user setting up self question?
  var _useState17 = useState({
      x: '',
      y: ''
    }),
    _useState18 = _slicedToArray(_useState17, 2),
    selfVals = _useState18[0],
    setSelfVals = _useState18[1];

  // Generate Questions based on logic
  useEffect(function () {
    if (levelId === 'SELF') return;
    var qList = [];
    for (var i = 0; i < 10; i++) {
      var a = void 0,
        b = void 0,
        _q = void 0,
        ans = void 0,
        opts = void 0;
      if (levelId === 'L1') {
        a = Math.floor(Math.random() * 5); // 0-4
        b = Math.floor(Math.random() * 5); // 0-4
        ans = a + b;
        // Options: Correct, +1, -1, Random
        var fake1 = ans + 1;
        var fake2 = Math.max(0, ans - 1);
        var fake3 = ans + 2;
        opts = [ans, fake1, fake2, fake3].sort(function () {
          return Math.random() - 0.5;
        });
        qList.push({
          q: "".concat(a, " + ").concat(b),
          ans: ans,
          a: a,
          b: b,
          opts: opts,
          type: 'MCQ'
        });
      } else if (levelId === 'L2') {
        a = Math.floor(Math.random() * 9) + 1; // 1-9
        b = 10 - a;
        ans = 10;
        opts = [10, 9, 11, 8].sort(function () {
          return Math.random() - 0.5;
        });
        qList.push({
          q: "".concat(a, " + ").concat(b),
          ans: ans,
          a: a,
          b: b,
          opts: opts,
          type: 'MCQ'
        });
      } else if (levelId === 'L3') {
        a = Math.floor(Math.random() * 5) + 5; // 5-9
        b = Math.floor(Math.random() * 5) + 5; // 5-9
        ans = a + b; // Result >= 10
        qList.push({
          q: "".concat(a, " + ").concat(b),
          ans: ans,
          a: a,
          b: b,
          type: 'INPUT'
        });
      }
    }
    setQuestions(qList);
  }, [levelId]);
  var playSound = function playSound(type) {
    // Simple synth simulation or placeholder
    // In a real app, use Audio() with assets
    if (type === 'correct') speak("答對了！好棒！", speechRate);
    if (type === 'wrong') speak("再試一次！", speechRate);
  };
  var handleAnswer = function handleAnswer(val) {
    var currentQuestion = questions[currentQ];
    if (parseInt(val) === currentQuestion.ans) {
      // Correct
      setFeedback('correct');
      playSound('correct');
      setTimeout(function () {
        onEarnToken(10 + attempts); // Score logic: Base + Effort tracking

        if (currentQ < questions.length - 1) {
          setFeedback(null);
          setCurrentQ(function (c) {
            return c + 1;
          });
          setUserInput("");
          setAttempts(0);
        } else {
          onComplete(totalWrong + attempts); // Pass total errors for Grit calculation
        }
      }, 2000);
    } else {
      // Wrong
      setFeedback('wrong');
      playSound('wrong');
      setAttempts(function (prev) {
        return prev + 1;
      });
      setTotalWrong(function (prev) {
        return prev + 1;
      });

      // Shake effect logic here visually via Framer Motion
      setTimeout(function () {
        return setFeedback(null);
      }, 1500);
    }
  };
  var handleSelfSetup = function handleSelfSetup() {
    if (!selfVals.x || !selfVals.y) return;
    var a = parseInt(selfVals.x);
    var b = parseInt(selfVals.y);
    if (a + b > 20) {
      speak("答案不能大於20哦", speechRate);
      return;
    }
    setQuestions([{
      q: "".concat(a, " + ").concat(b),
      ans: a + b,
      a: a,
      b: b,
      type: 'INPUT'
    }]);
    setSelfSetup(false);
  };

  // Renders
  if (selfSetup) {
    return /*#__PURE__*/React.createElement("div", {
      className: "pt-20 px-4 max-w-md mx-auto text-center"
    }, /*#__PURE__*/React.createElement("h2", {
      className: "text-xl font-bold mb-4"
    }, "\u81EA\u5DF1\u51FA\u984C\u8003\u8003\u81EA\u5DF1\uFF01"), /*#__PURE__*/React.createElement("div", {
      className: "flex items-center justify-center gap-4 text-4xl font-bold mb-8"
    }, /*#__PURE__*/React.createElement("input", {
      type: "number",
      className: "w-20 p-2 rounded-xl text-center",
      value: selfVals.x,
      onChange: function onChange(e) {
        return setSelfVals(_objectSpread(_objectSpread({}, selfVals), {}, {
          x: e.target.value
        }));
      }
    }), /*#__PURE__*/React.createElement("span", null, "+"), /*#__PURE__*/React.createElement("input", {
      type: "number",
      className: "w-20 p-2 rounded-xl text-center",
      value: selfVals.y,
      onChange: function onChange(e) {
        return setSelfVals(_objectSpread(_objectSpread({}, selfVals), {}, {
          y: e.target.value
        }));
      }
    })), /*#__PURE__*/React.createElement("button", {
      onClick: handleSelfSetup,
      className: "bg-blue-500 text-white px-8 py-3 rounded-xl font-bold text-xl"
    }, "\u958B\u59CB\u89E3\u7B54"), /*#__PURE__*/React.createElement("button", {
      onClick: onBack,
      className: "block w-full mt-4 text-slate-400"
    }, "\u53D6\u6D88"));
  }
  if (questions.length === 0) return /*#__PURE__*/React.createElement("div", {
    className: "pt-20 text-center"
  }, "\u6E96\u5099\u4E2D...");
  var q = questions[currentQ];
  return /*#__PURE__*/React.createElement("div", {
    className: "pt-20 px-4 h-full flex flex-col items-center"
  }, /*#__PURE__*/React.createElement("div", {
    className: "w-full max-w-md h-4 bg-gray-200 rounded-full mb-6 overflow-hidden"
  }, /*#__PURE__*/React.createElement(motion.div, {
    className: "h-full bg-blue-400",
    initial: {
      width: 0
    },
    animate: {
      width: "".concat(currentQ / questions.length * 100, "%")
    }
  })), /*#__PURE__*/React.createElement("div", {
    className: "bg-white/80 backdrop-blur rounded-3xl p-8 shadow-xl w-full max-w-md text-center border-4 border-white relative"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: function onClick() {
      return speak("".concat(q.a, "\u52A0").concat(q.b, "\u7B49\u65BC\u591A\u5C11\uFF1F"), speechRate, true);
    },
    className: "absolute top-4 right-4 text-blue-400 hover:scale-110 transition-transform"
  }, /*#__PURE__*/React.createElement(Icons.Volume2, {
    size: 32
  })), /*#__PURE__*/React.createElement("div", {
    className: "flex justify-center items-center gap-4 mb-6"
  }, /*#__PURE__*/React.createElement("span", {
    className: "font-bold text-slate-700",
    style: {
      fontSize: "".concat(fontSize * 2.5, "px")
    }
  }, q.q, " = ?")), /*#__PURE__*/React.createElement("div", {
    className: "flex justify-center gap-8 mb-4"
  }, /*#__PURE__*/React.createElement("div", {
    className: "grid grid-cols-5 gap-1 w-24 justify-items-center"
  }, _toConsumableArray(Array(q.a)).map(function (_, i) {
    return /*#__PURE__*/React.createElement("div", {
      key: i,
      className: "w-3 h-3 rounded-full bg-blue-500"
    });
  })), /*#__PURE__*/React.createElement("div", {
    className: "grid grid-cols-5 gap-1 w-24 justify-items-center"
  }, _toConsumableArray(Array(q.b)).map(function (_, i) {
    return /*#__PURE__*/React.createElement("div", {
      key: i,
      className: "w-3 h-3 rounded-full bg-green-500"
    });
  }))), /*#__PURE__*/React.createElement(AnimatePresence, null, feedback && /*#__PURE__*/React.createElement(motion.div, {
    initial: {
      scale: 0,
      opacity: 0
    },
    animate: {
      scale: 1,
      opacity: 1
    },
    exit: {
      scale: 0,
      opacity: 0
    },
    className: "absolute inset-0 z-10 flex items-center justify-center rounded-2xl bg-white/90"
  }, feedback === 'correct' ? /*#__PURE__*/React.createElement("div", {
    className: "text-center"
  }, /*#__PURE__*/React.createElement("div", {
    className: "text-6xl mb-2"
  }, "\uD83C\uDF89"), /*#__PURE__*/React.createElement("div", {
    className: "text-green-600 font-bold text-2xl"
  }, "\u7B54\u5C0D\u4E86\uFF01")) : /*#__PURE__*/React.createElement("div", {
    className: "text-center"
  }, /*#__PURE__*/React.createElement("div", {
    className: "text-6xl mb-2"
  }, "\uD83E\uDD14"), /*#__PURE__*/React.createElement("div", {
    className: "text-orange-500 font-bold text-2xl"
  }, "\u518D\u8A66\u4E00\u6B21\uFF01"), attempts >= 1 && /*#__PURE__*/React.createElement("div", {
    className: "text-sm text-slate-500 mt-2"
  }, "\u63D0\u793A\uFF1A\u53EF\u4EE5\u7528\u624B\u6307\u6578\u6578\u770B\u9EDE\u9EDE\u54E6"))))), /*#__PURE__*/React.createElement("div", {
    className: "w-full max-w-md mt-6 flex-grow"
  }, q.type === 'MCQ' ? /*#__PURE__*/React.createElement("div", {
    className: "grid grid-cols-2 gap-4"
  }, q.opts.map(function (opt, idx) {
    return /*#__PURE__*/React.createElement(motion.button, {
      key: idx,
      whileTap: {
        scale: 0.95
      },
      onClick: function onClick() {
        return handleAnswer(opt);
      },
      className: "h-24 bg-white rounded-2xl shadow-sm border-b-4 border-slate-200 font-bold text-slate-700 hover:bg-blue-50 hover:border-blue-200 transition-colors",
      style: {
        fontSize: "".concat(fontSize * 1.5, "px")
      }
    }, opt);
  })) : /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("div", {
    className: "bg-white p-4 rounded-xl text-center mb-2 border-2 border-slate-200 min-h-[4rem] flex items-center justify-center"
  }, /*#__PURE__*/React.createElement("span", {
    className: "font-bold text-slate-800",
    style: {
      fontSize: "".concat(fontSize * 1.5, "px")
    }
  }, userInput || "_")), /*#__PURE__*/React.createElement(CustomKeypad, {
    onInput: function onInput(n) {
      return setUserInput(function (prev) {
        return prev.length < 2 ? prev + n : prev;
      });
    },
    onDelete: function onDelete() {
      return setUserInput(function (prev) {
        return prev.slice(0, -1);
      });
    },
    onSubmit: function onSubmit() {
      return userInput && handleAnswer(userInput);
    },
    disabled: feedback !== null
  }))));
};

// 4. Claw Machine Game
var ClawMachine = function ClawMachine(_ref6) {
  var user = _ref6.user,
    score = _ref6.score,
    onPlayEnd = _ref6.onPlayEnd,
    fontSize = _ref6.fontSize;
  // Logic: 3rd try guarantee.
  // We simulate this by checking score.tries % 3
  // 0: Drop halfway
  // 1: Drop at rim
  // 2: Success

  var _useState19 = useState('IDLE'),
    _useState20 = _slicedToArray(_useState19, 2),
    status = _useState20[0],
    setStatus = _useState20[1]; // IDLE, MOVING, DROPPING, RESULT
  var _useState21 = useState(0),
    _useState22 = _slicedToArray(_useState21, 2),
    clawX = _useState22[0],
    setClawX = _useState22[1];
  var _useState23 = useState(""),
    _useState24 = _slicedToArray(_useState23, 2),
    resultMsg = _useState24[0],
    setResultMsg = _useState24[1];

  // Random prize list
  var prizes = [{
    name: "暖暖杯",
    icon: "🍵",
    desc: "給媽媽暖暖身"
  }, {
    name: "按摩槌",
    icon: "🔨",
    desc: "幫爸爸搥背"
  }, {
    name: "愛心便當",
    icon: "🍱",
    desc: "家人吃得飽"
  }, {
    name: "大擁抱",
    icon: "🤗",
    desc: "免費的愛"
  }];
  var play = function play() {
    if (status !== 'IDLE') return;
    setStatus('MOVING');

    // Determine outcome based on a mock "attempts" counter logic
    // For this demo, let's use a randomizer that favors success heavily for demo purposes
    // Or follow strict rule: 3rd time success.
    // Let's create a local storage or state based attempt counter in parent, but here we mock:
    var attempt = (score.clawAttempts || 0) % 3;
    var isWin = attempt === 2;

    // Animation Sequence
    setTimeout(function () {
      setStatus('DROPPING');
      setTimeout(function () {
        if (isWin) {
          setStatus('RESULT');
          var prize = prizes[Math.floor(Math.random() * prizes.length)];
          setResultMsg(prize);
          setTimeout(function () {
            return onPlayEnd(true, prize);
          }, 3000);
        } else {
          setStatus('IDLE');
          // Determine fail message based on attempt
          var failMsg = attempt === 0 ? "哎呀！滑掉了！" : "差一點點！下次一定中！";
          speak(failMsg);
          onPlayEnd(false, null); // Consume token, no prize
        }
      }, 1500);
    }, 2000);
  };
  return /*#__PURE__*/React.createElement("div", {
    className: "pt-20 px-4 h-full flex flex-col items-center justify-between pb-8"
  }, /*#__PURE__*/React.createElement("div", {
    className: "bg-white/50 px-6 py-2 rounded-full mb-4"
  }, /*#__PURE__*/React.createElement("span", {
    className: "font-bold text-slate-700"
  }, "\u5269\u9918\u4EE3\u5E63: ", score.tokens)), /*#__PURE__*/React.createElement("div", {
    className: "relative w-full max-w-md h-[50vh] bg-pink-100 rounded-t-3xl border-4 border-pink-300 overflow-hidden shadow-2xl"
  }, /*#__PURE__*/React.createElement("div", {
    className: "absolute inset-0 bg-blue-100/20 z-10 pointer-events-none border-b-8 border-pink-200"
  }), /*#__PURE__*/React.createElement("div", {
    className: "absolute top-0 left-0 right-0 h-4 bg-gray-300 z-0"
  }), /*#__PURE__*/React.createElement(motion.div, {
    className: "absolute top-0 left-1/2 w-2 h-20 bg-gray-400 z-0 origin-top",
    animate: {
      x: status === 'MOVING' ? [0, -100, 100, 0] : 0,
      height: status === 'DROPPING' ? 250 : 80
    },
    transition: {
      duration: status === 'MOVING' ? 2 : 1
    }
  }, /*#__PURE__*/React.createElement("div", {
    className: "absolute bottom-0 -left-6 w-14 h-10 border-4 border-gray-600 rounded-b-full"
  })), /*#__PURE__*/React.createElement("div", {
    className: "absolute bottom-0 left-0 right-0 h-32 flex items-end justify-around p-4"
  }, prizes.map(function (p, i) {
    return /*#__PURE__*/React.createElement(motion.div, {
      key: i,
      className: "text-5xl",
      animate: {
        y: [0, -5, 0]
      },
      transition: {
        repeat: Infinity,
        duration: 2,
        delay: i * 0.5
      }
    }, p.icon);
  })), /*#__PURE__*/React.createElement(AnimatePresence, null, status === 'RESULT' && resultMsg && /*#__PURE__*/React.createElement(motion.div, {
    initial: {
      scale: 0
    },
    animate: {
      scale: 1
    },
    className: "absolute inset-0 z-20 flex items-center justify-center bg-black/50"
  }, /*#__PURE__*/React.createElement("div", {
    className: "bg-white p-6 rounded-2xl text-center animate-bounce"
  }, /*#__PURE__*/React.createElement("div", {
    className: "text-6xl mb-2"
  }, resultMsg.icon), /*#__PURE__*/React.createElement("h3", {
    className: "text-xl font-bold text-pink-500"
  }, "\u593E\u5230\u4E86\uFF01"), /*#__PURE__*/React.createElement("p", {
    className: "text-slate-600"
  }, resultMsg.name), /*#__PURE__*/React.createElement("p", {
    className: "text-xs text-gray-400 mt-2"
  }, "(", resultMsg.desc, ")"))))), /*#__PURE__*/React.createElement("div", {
    className: "w-full max-w-md bg-pink-500 p-6 rounded-b-3xl shadow-xl flex justify-center relative"
  }, /*#__PURE__*/React.createElement("div", {
    className: "absolute left-6 top-8 w-8 h-12 bg-gray-800 rounded-md border-2 border-gray-600"
  }), /*#__PURE__*/React.createElement("button", {
    onClick: play,
    disabled: status !== 'IDLE' || score.tokens <= 0,
    className: "w-24 h-24 rounded-full border-b-8 shadow-xl flex items-center justify-center transition-transform active:scale-95 ".concat(score.tokens > 0 ? 'bg-yellow-400 border-yellow-600' : 'bg-gray-400 border-gray-600')
  }, /*#__PURE__*/React.createElement("span", {
    className: "font-bold text-yellow-900 text-xl"
  }, "GRAB!"))), /*#__PURE__*/React.createElement("button", {
    onClick: function onClick() {
      return onPlayEnd(false);
    },
    className: "mt-4 text-slate-500 underline"
  }, "\u8FD4\u56DE"));
};

// 5. Report Screen
var ReportScreen = function ReportScreen(_ref7) {
  var score = _ref7.score,
    onRestart = _ref7.onRestart,
    fontSize = _ref7.fontSize;
  // Logic: Total Score = (Correct * 10) + (Errors * 1)
  // Assuming we pass raw data or calculated in parent. 
  // For this demo, let's assume 'score.points' includes the logic, 
  // and we track 'score.errors' separately.

  // Reconstruct visuals based on prompt
  var totalScore = score.correct * 10 + score.errors * 1;
  return /*#__PURE__*/React.createElement("div", {
    className: "pt-20 px-4 max-w-2xl mx-auto pb-20"
  }, /*#__PURE__*/React.createElement("div", {
    className: "text-center mb-8"
  }, /*#__PURE__*/React.createElement("div", {
    className: "inline-block p-4 bg-yellow-100 rounded-full mb-4"
  }, /*#__PURE__*/React.createElement(Icons.Star, {
    size: 48,
    className: "text-yellow-500"
  })), /*#__PURE__*/React.createElement("h2", {
    className: "text-3xl font-bold text-slate-800 mb-2"
  }, "\u597D\u68D2\uFF01\u5B8C\u6210\u4EFB\u52D9\uFF01"), /*#__PURE__*/React.createElement("p", {
    className: "text-slate-500"
  }, "\u770B\u770B\u4F60\u7684\u5B78\u7FD2\u6210\u679C")), /*#__PURE__*/React.createElement("div", {
    className: "bg-white rounded-3xl shadow-xl overflow-hidden mb-6"
  }, /*#__PURE__*/React.createElement("div", {
    className: "bg-blue-600 p-6 text-white text-center"
  }, /*#__PURE__*/React.createElement("div", {
    className: "text-sm opacity-80"
  }, "\u7E3D\u6210\u5C31\u5206"), /*#__PURE__*/React.createElement("div", {
    className: "text-6xl font-bold"
  }, totalScore)), /*#__PURE__*/React.createElement("div", {
    className: "p-6"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex justify-between items-center mb-4 border-b pb-4"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center gap-2"
  }, /*#__PURE__*/React.createElement("div", {
    className: "p-2 bg-green-100 rounded-lg text-green-600"
  }, /*#__PURE__*/React.createElement(Icons.Check, null)), /*#__PURE__*/React.createElement("span", {
    className: "font-bold text-slate-700"
  }, "\u80FD\u529B\u5F97\u5206")), /*#__PURE__*/React.createElement("span", {
    className: "font-bold text-green-600"
  }, score.correct * 10, " \u5206")), /*#__PURE__*/React.createElement("div", {
    className: "flex justify-between items-center"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center gap-2"
  }, /*#__PURE__*/React.createElement("div", {
    className: "p-2 bg-orange-100 rounded-lg text-orange-600"
  }, /*#__PURE__*/React.createElement(Icons.RefreshCw, null)), /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("span", {
    className: "font-bold text-slate-700"
  }, "\u52AA\u529B\u5617\u8A66"), /*#__PURE__*/React.createElement("div", {
    className: "text-xs text-slate-400"
  }, "\u6BCF\u4E00\u6B21\u932F\u8AA4\u90FD\u662F\u5B78\u7FD2\u7684\u6A5F\u6703\uFF01"))), /*#__PURE__*/React.createElement("span", {
    className: "font-bold text-orange-600"
  }, "+ ", score.errors, " \u5206")))), /*#__PURE__*/React.createElement("div", {
    className: "bg-white rounded-3xl shadow-sm p-6 mb-6 border border-slate-100"
  }, /*#__PURE__*/React.createElement("h3", {
    className: "font-bold text-slate-700 mb-4"
  }, "\u7D66\u5C0F\u5C08\u5BB6\u7684\u5EFA\u8B70 \uD83D\uDCA1"), /*#__PURE__*/React.createElement("ul", {
    className: "space-y-3"
  }, /*#__PURE__*/React.createElement("li", {
    className: "flex gap-3"
  }, /*#__PURE__*/React.createElement("span", {
    className: "text-xl"
  }, "\uD83D\uDE80"), /*#__PURE__*/React.createElement("span", {
    className: "text-slate-600"
  }, "\u4F60\u4ECA\u5929\u5F88\u68D2\uFF0C\u7279\u5225\u662F\u5805\u6301\u5B8C\u6210\u4E86\u6311\u6230\uFF01")), /*#__PURE__*/React.createElement("li", {
    className: "flex gap-3"
  }, /*#__PURE__*/React.createElement("span", {
    className: "text-xl"
  }, "\uD83E\uDDE9"), /*#__PURE__*/React.createElement("span", {
    className: "text-slate-600"
  }, "\u53EF\u4EE5\u8A66\u8457\u7DF4\u7FD2\u300C9\u7684\u9032\u4F4D\u300D\uFF0C\u5C31\u50CF\u642D\u7A4D\u6728\u4E00\u6A23\u7C21\u55AE\uFF01")))), /*#__PURE__*/React.createElement("h3", {
    className: "font-bold text-slate-700 mb-4"
  }, "\u4F60\u7684\u6230\u5229\u54C1 \uD83C\uDF81"), /*#__PURE__*/React.createElement("div", {
    className: "grid grid-cols-2 gap-4 mb-8"
  }, score.gifts.length > 0 ? score.gifts.map(function (g, i) {
    return /*#__PURE__*/React.createElement("div", {
      key: i,
      className: "bg-pink-50 p-4 rounded-xl flex items-center gap-3 border border-pink-100"
    }, /*#__PURE__*/React.createElement("span", {
      className: "text-3xl"
    }, g.icon), /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("div", {
      className: "font-bold text-slate-700"
    }, g.name), /*#__PURE__*/React.createElement("div", {
      className: "text-xs text-pink-400"
    }, "\u7D66\u5BB6\u4EBA\u7684\u79AE\u7269")));
  }) : /*#__PURE__*/React.createElement("div", {
    className: "col-span-2 text-center text-gray-400 py-4 bg-gray-50 rounded-xl"
  }, "\u9084\u6C92\u593E\u5230\u79AE\u7269\uFF0C\u518D\u53BB\u8A66\u8A66\uFF01")), /*#__PURE__*/React.createElement("button", {
    onClick: onRestart,
    className: "w-full bg-slate-800 text-white font-bold py-4 rounded-xl shadow-lg hover:bg-slate-700 transition-colors"
  }, "\u56DE\u5230\u9996\u9801"));
};

// --- Main App Component ---
var App = function App() {
  // State
  var _useState25 = useState('WELCOME'),
    _useState26 = _slicedToArray(_useState25, 2),
    view = _useState26[0],
    setView = _useState26[1]; // WELCOME, DASHBOARD, GAME, CLAW, REPORT
  var _useState27 = useState({
      fontSizeIdx: 2,
      speechRateIdx: 5,
      soundOn: true
    }),
    _useState28 = _slicedToArray(_useState27, 2),
    settings = _useState28[0],
    setSettings = _useState28[1]; // Default idx 2 (18px), 5 (1.0x)
  var _useState29 = useState({
      name: ""
    }),
    _useState30 = _slicedToArray(_useState29, 2),
    user = _useState30[0],
    setUser = _useState30[1];
  var _useState31 = useState({
      level: null,
      tokens: 0,
      correct: 0,
      errors: 0,
      clawAttempts: 0,
      gifts: []
    }),
    _useState32 = _slicedToArray(_useState31, 2),
    gameState = _useState32[0],
    setGameState = _useState32[1];

  // Derived Settings
  var fontSize = [14, 16, 18, 22, 26, 32][settings.fontSizeIdx];
  var speechRate = [0.5, 0.6, 0.7, 0.8, 0.9, 1.0][settings.speechRateIdx];
  useEffect(function () {
    lucide.createIcons();
  }, [view]);

  // Handlers
  var startGame = function startGame(name) {
    setUser({
      name: name
    });
    setView('DASHBOARD');
  };
  var selectLevel = function selectLevel(lvlId) {
    if (lvlId === 'REPORT') {
      setView('REPORT');
    } else {
      setGameState(function (prev) {
        return _objectSpread(_objectSpread({}, prev), {}, {
          level: lvlId
        });
      });
      setView('GAME');
    }
  };
  var handleTokenEarned = function handleTokenEarned(pointsToAdd) {
    // pointsToAdd logic handled inside GameInterface visual score, 
    // here we just add token and track global stats
    setGameState(function (prev) {
      return _objectSpread(_objectSpread({}, prev), {}, {
        tokens: prev.tokens + 1,
        correct: prev.correct + 1 // Simply counting correct Qs
      });
    });
  };
  var handleGameComplete = function handleGameComplete(sessionErrors) {
    setGameState(function (prev) {
      return _objectSpread(_objectSpread({}, prev), {}, {
        errors: prev.errors + sessionErrors
      });
    });
    // Go to claw machine if tokens > 0, else Dashboard
    setTimeout(function () {
      if (gameState.tokens > 0) {
        // Prompt user: Go to claw? For flow simplicity, let's go Dashboard
        // Or show a modal. Let's go Dashboard to let them choose.
        setView('DASHBOARD');
      } else {
        setView('DASHBOARD');
      }
    }, 500);
  };
  var enterClaw = function enterClaw() {
    setView('CLAW');
  };
  var handleClawEnd = function handleClawEnd(success, prize) {
    setGameState(function (prev) {
      return _objectSpread(_objectSpread({}, prev), {}, {
        tokens: Math.max(0, prev.tokens - 1),
        clawAttempts: prev.clawAttempts + 1,
        gifts: success ? [].concat(_toConsumableArray(prev.gifts), [prize]) : prev.gifts
      });
    });
    if (success) {
      speak("\u606D\u559C\uFF01\u4F60\u593E\u5230\u4E86".concat(prize.name), speechRate);
    }
  };

  // Floating Action Button
  var FAB = function FAB() {
    return /*#__PURE__*/React.createElement("div", {
      className: "fixed bottom-4 right-4 z-50 holographic text-slate-800 px-4 py-2 rounded-full font-bold text-xs flex items-center gap-2 cursor-pointer hover:scale-105 transition-transform"
    }, /*#__PURE__*/React.createElement(Icons.Computer, {
      size: 14
    }), /*#__PURE__*/React.createElement("span", null, "WMC \u7A0B\u8001\u5E2B \u8A2D\u8A08"));
  };

  // Footer
  var Footer = function Footer() {
    return /*#__PURE__*/React.createElement("footer", {
      className: "w-full text-center py-4 text-slate-400 text-xs mt-auto"
    }, "\xA92025 WMC");
  };

  // Global Back Button (except Welcome)
  var BackBtn = function BackBtn() {
    return view !== 'WELCOME' && /*#__PURE__*/React.createElement("button", {
      onClick: function onClick() {
        return setView('DASHBOARD');
      },
      className: "fixed top-4 left-4 z-40 bg-white/80 backdrop-blur p-2 rounded-xl shadow-sm border border-slate-200 text-slate-600 hover:bg-slate-100"
    }, /*#__PURE__*/React.createElement(Icons.Home, null));
  };

  // Token Widget (Clickable to go to Claw)
  var TokenWidget = function TokenWidget() {
    return view === 'DASHBOARD' && gameState.tokens > 0 && /*#__PURE__*/React.createElement(motion.button, {
      initial: {
        scale: 0
      },
      animate: {
        scale: 1
      },
      className: "fixed bottom-20 right-4 z-40 bg-pink-500 text-white p-4 rounded-full shadow-xl border-4 border-white flex items-center justify-center gap-2 animate-bounce",
      onClick: enterClaw
    }, /*#__PURE__*/React.createElement(Icons.Gift, null), /*#__PURE__*/React.createElement("span", {
      className: "font-bold"
    }, "\u53BB\u593E\u516C\u4ED4!"), /*#__PURE__*/React.createElement("span", {
      className: "bg-white text-pink-500 rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold"
    }, gameState.tokens));
  };
  return /*#__PURE__*/React.createElement("div", {
    className: "min-h-screen flex flex-col relative bg-yellow-50/50"
  }, /*#__PURE__*/React.createElement(SettingsModule, {
    settings: settings,
    setSettings: setSettings
  }), /*#__PURE__*/React.createElement(BackBtn, null), /*#__PURE__*/React.createElement("main", {
    className: "flex-grow"
  }, /*#__PURE__*/React.createElement(AnimatePresence, {
    mode: "wait"
  }, view === 'WELCOME' && /*#__PURE__*/React.createElement(motion.div, {
    key: "welcome",
    initial: {
      opacity: 0
    },
    animate: {
      opacity: 1
    },
    exit: {
      opacity: 0
    }
  }, /*#__PURE__*/React.createElement(WelcomeScreen, {
    onStart: startGame,
    fontSize: fontSize
  })), view === 'DASHBOARD' && /*#__PURE__*/React.createElement(motion.div, {
    key: "dash",
    initial: {
      opacity: 0
    },
    animate: {
      opacity: 1
    },
    exit: {
      opacity: 0
    }
  }, /*#__PURE__*/React.createElement(Dashboard, {
    user: user.name,
    score: gameState,
    onSelectLevel: selectLevel,
    fontSize: fontSize
  })), view === 'GAME' && /*#__PURE__*/React.createElement(motion.div, {
    key: "game",
    initial: {
      x: 300,
      opacity: 0
    },
    animate: {
      x: 0,
      opacity: 1
    },
    exit: {
      x: -300,
      opacity: 0
    },
    className: "h-screen"
  }, /*#__PURE__*/React.createElement(GameInterface, {
    levelId: gameState.level,
    fontSize: fontSize,
    speechRate: speechRate,
    onBack: function onBack() {
      return setView('DASHBOARD');
    },
    onEarnToken: handleTokenEarned,
    onComplete: handleGameComplete
  })), view === 'CLAW' && /*#__PURE__*/React.createElement(motion.div, {
    key: "claw",
    initial: {
      y: 500,
      opacity: 0
    },
    animate: {
      y: 0,
      opacity: 1
    },
    exit: {
      y: 500,
      opacity: 0
    },
    className: "h-screen"
  }, /*#__PURE__*/React.createElement(ClawMachine, {
    user: user.name,
    score: gameState,
    onPlayEnd: handleClawEnd,
    fontSize: fontSize
  })), view === 'REPORT' && /*#__PURE__*/React.createElement(motion.div, {
    key: "report",
    initial: {
      opacity: 0
    },
    animate: {
      opacity: 1
    },
    exit: {
      opacity: 0
    }
  }, /*#__PURE__*/React.createElement(ReportScreen, {
    score: gameState,
    onRestart: function onRestart() {
      return setView('DASHBOARD');
    },
    fontSize: fontSize
  })))), /*#__PURE__*/React.createElement(TokenWidget, null), /*#__PURE__*/React.createElement(DownloadBtn, null), /*#__PURE__*/React.createElement(FAB, null), /*#__PURE__*/React.createElement(Footer, null));
};
var root = ReactDOM.createRoot(document.getElementById('root'));
root.render(/*#__PURE__*/React.createElement(App, null));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfUmVhY3QiLCJSZWFjdCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlTWVtbyIsIl93aW5kb3ckTW90aW9uIiwid2luZG93IiwiTW90aW9uIiwibW90aW9uIiwiQW5pbWF0ZVByZXNlbmNlIiwiSWNvbnMiLCJTZXR0aW5ncyIsImNyZWF0ZUVsZW1lbnQiLCJIb21lIiwiVm9sdW1lMiIsIlZvbHVtZVgiLCJQbGF5IiwiQXJyb3dMZWZ0IiwiRGVsZXRlIiwiQ2hlY2siLCJDb2lucyIsIkdpZnQiLCJVc2VyIiwiU3RhciIsIlJlZnJlc2hDdyIsIlR1cnRsZSIsIlJhYmJpdCIsIkNvbXB1dGVyIiwiRG93bmxvYWQiLCJzcGVhayIsInRleHQiLCJyYXRlIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiZm9yY2UiLCJzcGVlY2hTeW50aGVzaXMiLCJjYW5jZWwiLCJ1dHRlcmFuY2UiLCJTcGVlY2hTeW50aGVzaXNVdHRlcmFuY2UiLCJsYW5nIiwiU2V0dGluZ3NNb2R1bGUiLCJfcmVmIiwic2V0dGluZ3MiLCJzZXRTZXR0aW5ncyIsIl91c2VTdGF0ZSIsIl91c2VTdGF0ZTIiLCJfc2xpY2VkVG9BcnJheSIsImlzT3BlbiIsInNldElzT3BlbiIsImZvbnRTaXplcyIsInNwZWVjaFJhdGVzIiwibHVjaWRlIiwiY3JlYXRlSWNvbnMiLCJGcmFnbWVudCIsImJ1dHRvbiIsImNsYXNzTmFtZSIsIndoaWxlVGFwIiwic2NhbGUiLCJvbkNsaWNrIiwiZGl2IiwiaW5pdGlhbCIsIm9wYWNpdHkiLCJhbmltYXRlIiwiZXhpdCIsIngiLCJmb250U2l6ZUlkeCIsInR5cGUiLCJtaW4iLCJtYXgiLCJzdGVwIiwidmFsdWUiLCJvbkNoYW5nZSIsImUiLCJfb2JqZWN0U3ByZWFkIiwicGFyc2VJbnQiLCJ0YXJnZXQiLCJzcGVlY2hSYXRlSWR4Iiwic2l6ZSIsInNvdW5kT24iLCJjb25jYXQiLCJEb3dubG9hZEJ0biIsImhhbmRsZURvd25sb2FkIiwiaHRtbENvbnRlbnQiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsIm91dGVySFRNTCIsImJsb2IiLCJCbG9iIiwidXJsIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiYSIsImhyZWYiLCJkb3dubG9hZCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImNsaWNrIiwicmVtb3ZlQ2hpbGQiLCJyZXZva2VPYmplY3RVUkwiLCJ0aXRsZSIsIkN1c3RvbUtleXBhZCIsIl9yZWYyIiwib25JbnB1dCIsIm9uRGVsZXRlIiwib25TdWJtaXQiLCJkaXNhYmxlZCIsImtleXMiLCJtYXAiLCJrIiwia2V5IiwiV2VsY29tZVNjcmVlbiIsIl9yZWYzIiwib25TdGFydCIsImZvbnRTaXplIiwiX3VzZVN0YXRlMyIsIl91c2VTdGF0ZTQiLCJuYW1lIiwic2V0TmFtZSIsInkiLCJzdHlsZSIsInBsYWNlaG9sZGVyIiwid2hpbGVIb3ZlciIsInRyaW0iLCJEYXNoYm9hcmQiLCJfcmVmNCIsInVzZXIiLCJzY29yZSIsIm9uU2VsZWN0TGV2ZWwiLCJsZXZlbHMiLCJpZCIsInN1YiIsImljb24iLCJjb2xvciIsInRva2VucyIsImx2bCIsIkdhbWVJbnRlcmZhY2UiLCJfcmVmNSIsImxldmVsSWQiLCJzcGVlY2hSYXRlIiwib25CYWNrIiwib25Db21wbGV0ZSIsIm9uRWFyblRva2VuIiwiX3VzZVN0YXRlNSIsIl91c2VTdGF0ZTYiLCJjdXJyZW50USIsInNldEN1cnJlbnRRIiwiX3VzZVN0YXRlNyIsIl91c2VTdGF0ZTgiLCJxdWVzdGlvbnMiLCJzZXRRdWVzdGlvbnMiLCJfdXNlU3RhdGU5IiwiX3VzZVN0YXRlMCIsInVzZXJJbnB1dCIsInNldFVzZXJJbnB1dCIsIl91c2VTdGF0ZTEiLCJfdXNlU3RhdGUxMCIsImZlZWRiYWNrIiwic2V0RmVlZGJhY2siLCJfdXNlU3RhdGUxMSIsIl91c2VTdGF0ZTEyIiwiYXR0ZW1wdHMiLCJzZXRBdHRlbXB0cyIsIl91c2VTdGF0ZTEzIiwiX3VzZVN0YXRlMTQiLCJ0b3RhbFdyb25nIiwic2V0VG90YWxXcm9uZyIsIl91c2VTdGF0ZTE1IiwiX3VzZVN0YXRlMTYiLCJzZWxmU2V0dXAiLCJzZXRTZWxmU2V0dXAiLCJfdXNlU3RhdGUxNyIsIl91c2VTdGF0ZTE4Iiwic2VsZlZhbHMiLCJzZXRTZWxmVmFscyIsInFMaXN0IiwiaSIsImIiLCJxIiwiYW5zIiwib3B0cyIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImZha2UxIiwiZmFrZTIiLCJmYWtlMyIsInNvcnQiLCJwdXNoIiwicGxheVNvdW5kIiwiaGFuZGxlQW5zd2VyIiwidmFsIiwiY3VycmVudFF1ZXN0aW9uIiwic2V0VGltZW91dCIsImMiLCJwcmV2IiwiaGFuZGxlU2VsZlNldHVwIiwid2lkdGgiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJBcnJheSIsIl8iLCJvcHQiLCJpZHgiLCJuIiwic2xpY2UiLCJDbGF3TWFjaGluZSIsIl9yZWY2Iiwib25QbGF5RW5kIiwiX3VzZVN0YXRlMTkiLCJfdXNlU3RhdGUyMCIsInN0YXR1cyIsInNldFN0YXR1cyIsIl91c2VTdGF0ZTIxIiwiX3VzZVN0YXRlMjIiLCJjbGF3WCIsInNldENsYXdYIiwiX3VzZVN0YXRlMjMiLCJfdXNlU3RhdGUyNCIsInJlc3VsdE1zZyIsInNldFJlc3VsdE1zZyIsInByaXplcyIsImRlc2MiLCJwbGF5IiwiYXR0ZW1wdCIsImNsYXdBdHRlbXB0cyIsImlzV2luIiwicHJpemUiLCJmYWlsTXNnIiwiaGVpZ2h0IiwidHJhbnNpdGlvbiIsImR1cmF0aW9uIiwicCIsInJlcGVhdCIsIkluZmluaXR5IiwiZGVsYXkiLCJSZXBvcnRTY3JlZW4iLCJfcmVmNyIsIm9uUmVzdGFydCIsInRvdGFsU2NvcmUiLCJjb3JyZWN0IiwiZXJyb3JzIiwiZ2lmdHMiLCJnIiwiQXBwIiwiX3VzZVN0YXRlMjUiLCJfdXNlU3RhdGUyNiIsInZpZXciLCJzZXRWaWV3IiwiX3VzZVN0YXRlMjciLCJfdXNlU3RhdGUyOCIsIl91c2VTdGF0ZTI5IiwiX3VzZVN0YXRlMzAiLCJzZXRVc2VyIiwiX3VzZVN0YXRlMzEiLCJsZXZlbCIsIl91c2VTdGF0ZTMyIiwiZ2FtZVN0YXRlIiwic2V0R2FtZVN0YXRlIiwic3RhcnRHYW1lIiwic2VsZWN0TGV2ZWwiLCJsdmxJZCIsImhhbmRsZVRva2VuRWFybmVkIiwicG9pbnRzVG9BZGQiLCJoYW5kbGVHYW1lQ29tcGxldGUiLCJzZXNzaW9uRXJyb3JzIiwiZW50ZXJDbGF3IiwiaGFuZGxlQ2xhd0VuZCIsInN1Y2Nlc3MiLCJGQUIiLCJGb290ZXIiLCJCYWNrQnRuIiwiVG9rZW5XaWRnZXQiLCJtb2RlIiwicm9vdCIsIlJlYWN0RE9NIiwiY3JlYXRlUm9vdCIsImdldEVsZW1lbnRCeUlkIiwicmVuZGVyIl0sInNvdXJjZXMiOlsiSW5saW5lIEJhYmVsIHNjcmlwdCJdLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgY29uc3QgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZU1lbW8gfSA9IFJlYWN0O1xuICAgICAgICBjb25zdCB7IG1vdGlvbiwgQW5pbWF0ZVByZXNlbmNlIH0gPSB3aW5kb3cuTW90aW9uO1xuICAgICAgICBcbiAgICAgICAgLy8gLS0tIEljb25zIC0tLVxuICAgICAgICBjb25zdCBJY29ucyA9IHtcbiAgICAgICAgICAgIFNldHRpbmdzOiAoKSA9PiA8aSBkYXRhLWx1Y2lkZT1cInNsaWRlcnMtaG9yaXpvbnRhbFwiPjwvaT4sXG4gICAgICAgICAgICBIb21lOiAoKSA9PiA8aSBkYXRhLWx1Y2lkZT1cImhvbWVcIj48L2k+LFxuICAgICAgICAgICAgVm9sdW1lMjogKCkgPT4gPGkgZGF0YS1sdWNpZGU9XCJ2b2x1bWUtMlwiPjwvaT4sXG4gICAgICAgICAgICBWb2x1bWVYOiAoKSA9PiA8aSBkYXRhLWx1Y2lkZT1cInZvbHVtZS14XCI+PC9pPixcbiAgICAgICAgICAgIFBsYXk6ICgpID0+IDxpIGRhdGEtbHVjaWRlPVwicGxheVwiPjwvaT4sXG4gICAgICAgICAgICBBcnJvd0xlZnQ6ICgpID0+IDxpIGRhdGEtbHVjaWRlPVwiYXJyb3ctbGVmdFwiPjwvaT4sXG4gICAgICAgICAgICBEZWxldGU6ICgpID0+IDxpIGRhdGEtbHVjaWRlPVwiZGVsZXRlXCI+PC9pPixcbiAgICAgICAgICAgIENoZWNrOiAoKSA9PiA8aSBkYXRhLWx1Y2lkZT1cImNoZWNrXCI+PC9pPixcbiAgICAgICAgICAgIENvaW5zOiAoKSA9PiA8aSBkYXRhLWx1Y2lkZT1cImNvaW5zXCI+PC9pPixcbiAgICAgICAgICAgIEdpZnQ6ICgpID0+IDxpIGRhdGEtbHVjaWRlPVwiZ2lmdFwiPjwvaT4sXG4gICAgICAgICAgICBVc2VyOiAoKSA9PiA8aSBkYXRhLWx1Y2lkZT1cInVzZXJcIj48L2k+LFxuICAgICAgICAgICAgU3RhcjogKCkgPT4gPGkgZGF0YS1sdWNpZGU9XCJzdGFyXCI+PC9pPixcbiAgICAgICAgICAgIFJlZnJlc2hDdzogKCkgPT4gPGkgZGF0YS1sdWNpZGU9XCJyZWZyZXNoLWN3XCI+PC9pPixcbiAgICAgICAgICAgIFR1cnRsZTogKCkgPT4gPGkgZGF0YS1sdWNpZGU9XCJ0dXJ0bGVcIj48L2k+LFxuICAgICAgICAgICAgUmFiYml0OiAoKSA9PiA8aSBkYXRhLWx1Y2lkZT1cInJhYmJpdFwiPjwvaT4sXG4gICAgICAgICAgICBDb21wdXRlcjogKCkgPT4gPGkgZGF0YS1sdWNpZGU9XCJtb25pdG9yXCI+PC9pPixcbiAgICAgICAgICAgIERvd25sb2FkOiAoKSA9PiA8aSBkYXRhLWx1Y2lkZT1cImRvd25sb2FkXCI+PC9pPlxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIC0tLSBVdGlsaXR5OiBUVFMgLS0tXG4gICAgICAgIGNvbnN0IHNwZWFrID0gKHRleHQsIHJhdGUgPSAxLCBmb3JjZSA9IGZhbHNlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXdpbmRvdy5zcGVlY2hTeW50aGVzaXMpIHJldHVybjtcbiAgICAgICAgICAgIC8vIENhbmNlbCBwcmV2aW91cyBzcGVlY2ggaWYgZm9yY2luZyBhIG5ldyBvbmVcbiAgICAgICAgICAgIGlmIChmb3JjZSkgd2luZG93LnNwZWVjaFN5bnRoZXNpcy5jYW5jZWwoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdXR0ZXJhbmNlID0gbmV3IFNwZWVjaFN5bnRoZXNpc1V0dGVyYW5jZSh0ZXh0KTtcbiAgICAgICAgICAgIHV0dGVyYW5jZS5sYW5nID0gJ3poLUhLJzsgLy8gRGVmYXVsdCB0byBDYW50b25lc2VcbiAgICAgICAgICAgIHV0dGVyYW5jZS5yYXRlID0gcmF0ZTtcbiAgICAgICAgICAgIHdpbmRvdy5zcGVlY2hTeW50aGVzaXMuc3BlYWsodXR0ZXJhbmNlKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyAtLS0gQ29tcG9uZW50cyAtLS1cblxuICAgICAgICAvLyAxLiBTZXR0aW5ncyBNb2R1bGVcbiAgICAgICAgY29uc3QgU2V0dGluZ3NNb2R1bGUgPSAoeyBzZXR0aW5ncywgc2V0U2V0dGluZ3MgfSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgW2lzT3Blbiwgc2V0SXNPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICAgICAgICAgICAgLy8gRm9udCBTaXplcyBtYXBwaW5nICgxLTYpXG4gICAgICAgICAgICBjb25zdCBmb250U2l6ZXMgPSBbMTQsIDE2LCAxOCwgMjIsIDI2LCAzMl07XG4gICAgICAgICAgICAvLyBTcGVlY2ggUmF0ZXMgbWFwcGluZyAoMS02KVxuICAgICAgICAgICAgY29uc3Qgc3BlZWNoUmF0ZXMgPSBbMC41LCAwLjYsIDAuNywgMC44LCAwLjksIDEuMF07XG5cbiAgICAgICAgICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgbHVjaWRlLmNyZWF0ZUljb25zKCk7XG4gICAgICAgICAgICB9LCBbaXNPcGVuXSk7XG5cbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgey8qIFRvZ2dsZSBCdXR0b24gKi99XG4gICAgICAgICAgICAgICAgICAgIDxtb3Rpb24uYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmaXhlZCB0b3AtNCByaWdodC00IHotNTAgdy0xMiBoLTEyIGJnLWJsdWUtNTAwIHRleHQtd2hpdGUgcm91bmRlZC14bCBzaGFkb3ctbGcgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgaG92ZXI6YmctYmx1ZS02MDAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctNCBmb2N1czpyaW5nLWJsdWUtMzAwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlVGFwPXt7IHNjYWxlOiAwLjkgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldElzT3BlbighaXNPcGVuKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XCLlgY/lpb3oqK3lrppcIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SWNvbnMuU2V0dGluZ3MgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9tb3Rpb24uYnV0dG9uPlxuXG4gICAgICAgICAgICAgICAgICAgIHsvKiBEcmF3ZXIgKi99XG4gICAgICAgICAgICAgICAgICAgIDxBbmltYXRlUHJlc2VuY2U+XG4gICAgICAgICAgICAgICAgICAgICAgICB7aXNPcGVuICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bW90aW9uLmRpdiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZpeGVkIGluc2V0LTAgYmctYmxhY2svMjAgei00MFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsPXt7IG9wYWNpdHk6IDAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGU9e3sgb3BhY2l0eTogMSB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpdD17eyBvcGFjaXR5OiAwIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRJc09wZW4oZmFsc2UpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bW90aW9uLmRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgdG9wLTIwIHJpZ2h0LTQgdy04MCBiZy13aGl0ZSByb3VuZGVkLTJ4bCBzaGFkb3ctMnhsIHotNTAgcC02IGJvcmRlci0yIGJvcmRlci1ibHVlLTEwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsPXt7IHg6IDEwMCwgb3BhY2l0eTogMCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZT17eyB4OiAwLCBvcGFjaXR5OiAxIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGl0PXt7IHg6IDEwMCwgb3BhY2l0eTogMCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LWJvbGQgdGV4dC1zbGF0ZS03MDAgbWItNiBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29ucy5TZXR0aW5ncyAvPiDoqK3lrppcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBGb250IFNpemUgQ29udHJvbCAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItOFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNsYXRlLTYwMCBmb250LW1lZGl1bVwiPuWtl+mrlOWkp+Wwjzwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ibHVlLTYwMCBmb250LWJvbGRcIj57Zm9udFNpemVzW3NldHRpbmdzLmZvbnRTaXplSWR4XX1weDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJyYW5nZVwiIG1pbj1cIjBcIiBtYXg9XCI1XCIgc3RlcD1cIjFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17c2V0dGluZ3MuZm9udFNpemVJZHh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0U2V0dGluZ3Moey4uLnNldHRpbmdzLCBmb250U2l6ZUlkeDogcGFyc2VJbnQoZS50YXJnZXQudmFsdWUpfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLTMgYmctZ3JheS0yMDAgcm91bmRlZC1sZyBhcHBlYXJhbmNlLW5vbmUgY3Vyc29yLXBvaW50ZXIgYWNjZW50LWJsdWUtNTAwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdGV4dC14cyB0ZXh0LWdyYXktNDAwIG10LTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+5bCPPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj7lpKc8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qIFNwZWVjaCBSYXRlIENvbnRyb2wgKi99XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gbWItMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNsYXRlLTYwMCBmb250LW1lZGl1bVwiPuiqquipsemAn+W6pjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ibHVlLTYwMCBmb250LWJvbGRcIj57c3BlZWNoUmF0ZXNbc2V0dGluZ3Muc3BlZWNoUmF0ZUlkeF19eDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJyYW5nZVwiIG1pbj1cIjBcIiBtYXg9XCI1XCIgc3RlcD1cIjFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17c2V0dGluZ3Muc3BlZWNoUmF0ZUlkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRTZXR0aW5ncyh7Li4uc2V0dGluZ3MsIHNwZWVjaFJhdGVJZHg6IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKX0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgaC0zIGJnLWdyYXktMjAwIHJvdW5kZWQtbGcgYXBwZWFyYW5jZS1ub25lIGN1cnNvci1wb2ludGVyIGFjY2VudC1ncmVlbi01MDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgdGV4dC1ncmF5LTUwMCBtdC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTFcIj48SWNvbnMuVHVydGxlIHNpemU9ezE2fS8+IOaFojwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0xXCI+5b+rIDxJY29ucy5SYWJiaXQgc2l6ZT17MTZ9Lz48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7LyogQXVkaW8gVG9nZ2xlICovfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC04IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBwLTMgYmctYmx1ZS01MCByb3VuZGVkLXhsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1zbGF0ZS03MDAgZm9udC1tZWRpdW1cIj7pn7PmlYjplovpl5w8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2V0dGluZ3Moey4uLnNldHRpbmdzLCBzb3VuZE9uOiAhc2V0dGluZ3Muc291bmRPbn0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2B3LTEyIGgtNyByb3VuZGVkLWZ1bGwgcC0xIHRyYW5zaXRpb24tY29sb3JzICR7c2V0dGluZ3Muc291bmRPbiA/ICdiZy1ncmVlbi01MDAnIDogJ2JnLWdyYXktMzAwJ31gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2B3LTUgaC01IGJnLXdoaXRlIHJvdW5kZWQtZnVsbCBzaGFkb3ctc20gdHJhbnNmb3JtIHRyYW5zaXRpb24tdHJhbnNmb3JtICR7c2V0dGluZ3Muc291bmRPbiA/ICd0cmFuc2xhdGUteC01JyA6ICd0cmFuc2xhdGUteC0wJ31gfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbW90aW9uLmRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvQW5pbWF0ZVByZXNlbmNlPlxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBOZXcgQ29tcG9uZW50OiBEb3dubG9hZCBIVE1MIEJ1dHRvblxuICAgICAgICBjb25zdCBEb3dubG9hZEJ0biA9ICgpID0+IHtcbiAgICAgICAgICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgbHVjaWRlLmNyZWF0ZUljb25zKCk7XG4gICAgICAgICAgICB9LCBbXSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZURvd25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgZnVsbCBIVE1MIGNvbnRlbnRcbiAgICAgICAgICAgICAgICBjb25zdCBodG1sQ29udGVudCA9IFwiPCFET0NUWVBFIGh0bWw+XFxuXCIgKyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub3V0ZXJIVE1MO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbaHRtbENvbnRlbnRdLCB7IHR5cGU6IFwidGV4dC9odG1sXCIgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgdGVtcCBsaW5rIHRvIGRvd25sb2FkXG4gICAgICAgICAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgICAgICAgICAgICAgIGEuaHJlZiA9IHVybDtcbiAgICAgICAgICAgICAgICBhLmRvd25sb2FkID0gXCJoYXBweV9hZGRpdGlvbl9nYW1lLmh0bWxcIjtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpO1xuICAgICAgICAgICAgICAgIGEuY2xpY2soKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDbGVhbnVwXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKTtcbiAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxtb3Rpb24uYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWw9e3sgb3BhY2l0eTogMCwgeDogLTIwIH19XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGU9e3sgb3BhY2l0eTogMSwgeDogMCB9fVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVEb3dubG9hZH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgYm90dG9tLTQgbGVmdC00IHotNTAgYmctd2hpdGUvODAgYmFja2Ryb3AtYmx1ci1tZCBwLTMgcm91bmRlZC1mdWxsIHNoYWRvdy1sZyBib3JkZXIgYm9yZGVyLXNsYXRlLTIwMCB0ZXh0LXNsYXRlLTYwMCBob3ZlcjpiZy1ibHVlLTUwIGhvdmVyOnRleHQtYmx1ZS02MDAgaG92ZXI6Ym9yZGVyLWJsdWUtMjAwIHRyYW5zaXRpb24tYWxsIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGdyb3VwXCJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCLkuIvovInntrLpoIHljp/lp4vnorxcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPEljb25zLkRvd25sb2FkIC8+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm1heC13LTAgb3ZlcmZsb3ctaGlkZGVuIGdyb3VwLWhvdmVyOm1heC13LXhzIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTMwMCBlYXNlLWluLW91dCB0ZXh0LXhzIGZvbnQtYm9sZCB3aGl0ZXNwYWNlLW5vd3JhcFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAg5LiL6LyJ5Y6f5aeL56K8XG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L21vdGlvbi5idXR0b24+XG4gICAgICAgICAgICApO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIDIuIEN1c3RvbSBLZXlwYWQgKEZvciBJbnB1dCBRdWVzdGlvbnMpXG4gICAgICAgIGNvbnN0IEN1c3RvbUtleXBhZCA9ICh7IG9uSW5wdXQsIG9uRGVsZXRlLCBvblN1Ym1pdCwgZGlzYWJsZWQgfSkgPT4ge1xuICAgICAgICAgICAgY29uc3Qga2V5cyA9IFsxLCAyLCAzLCA0LCA1LCA2LCA3LCA4LCA5LCAwXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTMgZ2FwLTMgbWF4LXctc20gbXgtYXV0byBtdC02XCI+XG4gICAgICAgICAgICAgICAgICAgIHtrZXlzLm1hcChrID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxtb3Rpb24uYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtrfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlVGFwPXt7IHNjYWxlOiAwLjkgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBvbklucHV0KGspfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLTE2IGJnLXdoaXRlIGJvcmRlci0yIGJvcmRlci1ibHVlLTIwMCByb3VuZGVkLTJ4bCB0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC1zbGF0ZS03MDAgc2hhZG93LVswXzRweF8wX3JnYigyMTksMjM0LDI1NCldIGFjdGl2ZTpzaGFkb3ctbm9uZSBhY3RpdmU6dHJhbnNsYXRlLXktMSBkaXNhYmxlZDpvcGFjaXR5LTUwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7a31cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbW90aW9uLmJ1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgIDxtb3Rpb24uYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZVRhcD17eyBzY2FsZTogMC45IH19XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbkRlbGV0ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtMTYgYmctcmVkLTEwMCBib3JkZXItMiBib3JkZXItcmVkLTIwMCByb3VuZGVkLTJ4bCB0ZXh0LXJlZC02MDAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgc2hhZG93LVswXzRweF8wX3JnYigyNTQsMjI2LDIyNildIGFjdGl2ZTpzaGFkb3ctbm9uZSBhY3RpdmU6dHJhbnNsYXRlLXktMSBkaXNhYmxlZDpvcGFjaXR5LTUwXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEljb25zLkRlbGV0ZSAvPlxuICAgICAgICAgICAgICAgICAgICA8L21vdGlvbi5idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDxtb3Rpb24uYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZVRhcD17eyBzY2FsZTogMC45IH19XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtvblN1Ym1pdH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtMTYgY29sLXNwYW4tMiBiZy1ncmVlbi01MDAgYm9yZGVyLTIgYm9yZGVyLWdyZWVuLTYwMCByb3VuZGVkLTJ4bCB0ZXh0LXdoaXRlIGZvbnQtYm9sZCB0ZXh0LXhsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0yIHNoYWRvdy1bMF80cHhfMF9yZ2IoMjIsMTYzLDc0KV0gYWN0aXZlOnNoYWRvdy1ub25lIGFjdGl2ZTp0cmFuc2xhdGUteS0xIGRpc2FibGVkOm9wYWNpdHktNTBcIlxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICDnorroqo0gPEljb25zLkNoZWNrIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvbW90aW9uLmJ1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gMy4gR2FtZSBTY3JlZW5zXG4gICAgICAgIFxuICAgICAgICAvLyBXZWxjb21lIFNjcmVlblxuICAgICAgICBjb25zdCBXZWxjb21lU2NyZWVuID0gKHsgb25TdGFydCwgZm9udFNpemUgfSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgW25hbWUsIHNldE5hbWVdID0gdXNlU3RhdGUoXCJcIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPG1vdGlvbi5kaXYgXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWw9e3sgb3BhY2l0eTogMCwgeTogMjAgfX0gYW5pbWF0ZT17eyBvcGFjaXR5OiAxLCB5OiAwIH19IGV4aXQ9e3sgb3BhY2l0eTogMCwgeTogLTIwIH19XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG1pbi1oLVs4MHZoXSBwLTYgdGV4dC1jZW50ZXJcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi04IHAtNiBiZy13aGl0ZS82MCByb3VuZGVkLWZ1bGwgc2hhZG93LXhsIGJhY2tkcm9wLWJsdXItc20gYW5pbWF0ZS1mbG9hdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC04eGxcIj7wn4+X77iPPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cInRleHQtYmx1ZS02MDAgZm9udC1leHRyYWJvbGQgbWItMlwiIHN0eWxlPXt7IGZvbnRTaXplOiBgJHtmb250U2l6ZSAqIDEuNX1weGAgfX0+5b+r5qiC5a245Yqg5rOVPC9oMT5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbGF0ZS01MDAgbWItOFwiIHN0eWxlPXt7IGZvbnRTaXplOiBgJHtmb250U2l6ZX1weGAgfX0+5oiR5YCR5Y675aS+56au54mp57Wm54i454i45aq95aq95ZCn77yBPC9wPlxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgbWF4LXctbWQgYmctd2hpdGUgcC02IHJvdW5kZWQtM3hsIHNoYWRvdy14bCBib3JkZXItMiBib3JkZXIteWVsbG93LTIwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImJsb2NrIHRleHQtbGVmdCB0ZXh0LXNsYXRlLTYwMCBmb250LWJvbGQgbWItMiBtbC0xXCIgc3R5bGU9e3sgZm9udFNpemU6IGAke2ZvbnRTaXplfXB4YCB9fT7kvaDlj6vku4DpurzlkI3lrZfvvJ88L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e25hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXROYW1lKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIuS+i+Wmgu+8muWwj+aYjlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLXNsYXRlLTEwMCBib3JkZXItMiBib3JkZXItc2xhdGUtMjAwIHJvdW5kZWQteGwgcHgtNCBweS00IG1iLTYgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOmJvcmRlci1ibHVlLTQwMCB0ZXh0LWNlbnRlciBmb250LWJvbGQgdGV4dC1zbGF0ZS03MDBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgJHtmb250U2l6ZX1weGAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bW90aW9uLmJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlSG92ZXI9e3sgc2NhbGU6IDEuMDUgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZVRhcD17eyBzY2FsZTogMC45NSB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG5hbWUudHJpbSgpICYmIG9uU3RhcnQobmFtZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFuYW1lLnRyaW0oKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2B3LWZ1bGwgcHktNCByb3VuZGVkLXhsIGZvbnQtYm9sZCB0ZXh0LXdoaXRlIHNoYWRvdy1sZyB0cmFuc2l0aW9uLWFsbCAke25hbWUudHJpbSgpID8gJ2JnLWdyYWRpZW50LXRvLXIgZnJvbS1ibHVlLTUwMCB0by1pbmRpZ28tNTAwIHNoYWRvdy1ibHVlLTMwMC81MCcgOiAnYmctZ3JheS0zMDAgY3Vyc29yLW5vdC1hbGxvd2VkJ31gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgJHtmb250U2l6ZSAqIDEuMX1weGAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICDplovlp4vpgYrmiLIg8J+agFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9tb3Rpb24uYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L21vdGlvbi5kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIERhc2hib2FyZCAoTGV2ZWwgU2VsZWN0aW9uKVxuICAgICAgICBjb25zdCBEYXNoYm9hcmQgPSAoeyB1c2VyLCBzY29yZSwgb25TZWxlY3RMZXZlbCwgZm9udFNpemUgfSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGV2ZWxzID0gW1xuICAgICAgICAgICAgICAgIHsgaWQ6ICdMMScsIHRpdGxlOiAn5Yid6ZqO77ya57Ch5Zau5Yqg5rOVJywgc3ViOiAnMSsxPT8nLCBpY29uOiAn8J+NjicsIGNvbG9yOiAnYmctZ3JlZW4tMTAwIGJvcmRlci1ncmVlbi0zMDAgdGV4dC1ncmVlbi03MDAnIH0sXG4gICAgICAgICAgICAgICAgeyBpZDogJ0wyJywgdGl0bGU6ICfkuK3pmo7vvJrmuYrmiJDljYEnLCBzdWI6ICcyKzg9PycsIGljb246ICfwn5GQJywgY29sb3I6ICdiZy15ZWxsb3ctMTAwIGJvcmRlci15ZWxsb3ctMzAwIHRleHQteWVsbG93LTgwMCcgfSxcbiAgICAgICAgICAgICAgICB7IGlkOiAnTDMnLCB0aXRsZTogJ+mrmOmaju+8mumAsuS9jeWKoOazlScsIHN1YjogJzkrOT0/JywgaWNvbjogJ/CfmoAnLCBjb2xvcjogJ2JnLXJlZC0xMDAgYm9yZGVyLXJlZC0zMDAgdGV4dC1yZWQtODAwJyB9LFxuICAgICAgICAgICAgICAgIHsgaWQ6ICdTRUxGJywgdGl0bGU6ICfoh6rlrbjmqKHlvI8nLCBzdWI6ICfoh6rlt7Hlh7rpoYwnLCBpY29uOiAn8J+TnScsIGNvbG9yOiAnYmctcHVycGxlLTEwMCBib3JkZXItcHVycGxlLTMwMCB0ZXh0LXB1cnBsZS04MDAnIH0sXG4gICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC00IG1heC13LTR4bCBteC1hdXRvIHB0LTIwXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoZWFkZXIgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG1iLThcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXNsYXRlLTcwMFwiIHN0eWxlPXt7IGZvbnRTaXplOiBgJHtmb250U2l6ZSAqIDEuMn1weGAgfX0+5Zeo77yMe3VzZXJ977yBPC9oMj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNsYXRlLTUwMFwiPuS7iuWkqeaDs+aMkeaIsOS7gOm6vO+8nzwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBweC00IHB5LTIgcm91bmRlZC0yeGwgc2hhZG93LXNtIGJvcmRlciBib3JkZXItc2xhdGUtMTAwIGZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC0yeGxcIj7wn5KwPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXNsYXRlLTcwMCB0ZXh0LXhsXCI+e3Njb3JlLnRva2Vuc308L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9oZWFkZXI+XG5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0xIG1kOmdyaWQtY29scy0yIGdhcC00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7bGV2ZWxzLm1hcChsdmwgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxtb3Rpb24uYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17bHZsLmlkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZUhvdmVyPXt7IHNjYWxlOiAxLjAyLCB5OiAtMiB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZVRhcD17eyBzY2FsZTogMC45OCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBvblNlbGVjdExldmVsKGx2bC5pZCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHAtNiByb3VuZGVkLTN4bCBib3JkZXItYi00IHRleHQtbGVmdCBzaGFkb3ctc20gZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTQgJHtsdmwuY29sb3J9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC00eGxcIj57bHZsLmljb259PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtYm9sZFwiIHN0eWxlPXt7IGZvbnRTaXplOiBgJHtmb250U2l6ZX1weGAgfX0+e2x2bC50aXRsZX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3BhY2l0eS04MCB0ZXh0LXNtXCI+e2x2bC5zdWJ9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbW90aW9uLmJ1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHsvKiBSZXBvcnQgQnV0dG9uICovfVxuICAgICAgICAgICAgICAgICAgICAgPG1vdGlvbi5idXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlVGFwPXt7IHNjYWxlOiAwLjk4IH19XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBvblNlbGVjdExldmVsKCdSRVBPUlQnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm10LTggdy1mdWxsIGJnLXdoaXRlIGJvcmRlci0yIGJvcmRlci1zbGF0ZS0yMDAgcm91bmRlZC0yeGwgcC00IHRleHQtc2xhdGUtNjAwIGZvbnQtYm9sZCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnYXAtMlwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxJY29ucy5Vc2VyIC8+IOafpeeci+aIkeeahOaIkOWwseWgseWRilxuICAgICAgICAgICAgICAgICAgICA8L21vdGlvbi5idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEdhbWUgSW50ZXJmYWNlXG4gICAgICAgIGNvbnN0IEdhbWVJbnRlcmZhY2UgPSAoeyBsZXZlbElkLCBmb250U2l6ZSwgc3BlZWNoUmF0ZSwgb25CYWNrLCBvbkNvbXBsZXRlLCBvbkVhcm5Ub2tlbiB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBbY3VycmVudFEsIHNldEN1cnJlbnRRXSA9IHVzZVN0YXRlKDApO1xuICAgICAgICAgICAgY29uc3QgW3F1ZXN0aW9ucywgc2V0UXVlc3Rpb25zXSA9IHVzZVN0YXRlKFtdKTtcbiAgICAgICAgICAgIGNvbnN0IFt1c2VySW5wdXQsIHNldFVzZXJJbnB1dF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgICAgICAgICAgIGNvbnN0IFtmZWVkYmFjaywgc2V0RmVlZGJhY2tdID0gdXNlU3RhdGUobnVsbCk7IC8vICdjb3JyZWN0JyB8ICd3cm9uZycgfCBudWxsXG4gICAgICAgICAgICBjb25zdCBbYXR0ZW1wdHMsIHNldEF0dGVtcHRzXSA9IHVzZVN0YXRlKDApOyAvLyBUcmFjayB3cm9uZyBhdHRlbXB0cyBwZXIgcXVlc3Rpb25cbiAgICAgICAgICAgIGNvbnN0IFt0b3RhbFdyb25nLCBzZXRUb3RhbFdyb25nXSA9IHVzZVN0YXRlKDApOyAvLyBGb3IgZ3JpdCBzY29yZVxuICAgICAgICAgICAgY29uc3QgW3NlbGZTZXR1cCwgc2V0U2VsZlNldHVwXSA9IHVzZVN0YXRlKGxldmVsSWQgPT09ICdTRUxGJyk7IC8vIElzIHVzZXIgc2V0dGluZyB1cCBzZWxmIHF1ZXN0aW9uP1xuICAgICAgICAgICAgY29uc3QgW3NlbGZWYWxzLCBzZXRTZWxmVmFsc10gPSB1c2VTdGF0ZSh7eDogJycsIHk6ICcnfSk7XG5cbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIFF1ZXN0aW9ucyBiYXNlZCBvbiBsb2dpY1xuICAgICAgICAgICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWxJZCA9PT0gJ1NFTEYnKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICBsZXQgcUxpc3QgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTwxMDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhLCBiLCBxLCBhbnMsIG9wdHM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsZXZlbElkID09PSAnTDEnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNSk7IC8vIDAtNFxuICAgICAgICAgICAgICAgICAgICAgICAgYiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDUpOyAvLyAwLTRcbiAgICAgICAgICAgICAgICAgICAgICAgIGFucyA9IGEgKyBiO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3B0aW9uczogQ29ycmVjdCwgKzEsIC0xLCBSYW5kb21cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmYWtlMSA9IGFucyArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmFrZTIgPSBNYXRoLm1heCgwLCBhbnMgLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmYWtlMyA9IGFucyArIDI7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRzID0gW2FucywgZmFrZTEsIGZha2UyLCBmYWtlM10uc29ydCgoKSA9PiBNYXRoLnJhbmRvbSgpIC0gMC41KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHFMaXN0LnB1c2goeyBxOiBgJHthfSArICR7Yn1gLCBhbnMsIGEsIGIsIG9wdHMsIHR5cGU6ICdNQ1EnIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxldmVsSWQgPT09ICdMMicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA5KSArIDE7IC8vIDEtOVxuICAgICAgICAgICAgICAgICAgICAgICAgYiA9IDEwIC0gYTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFucyA9IDEwO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0cyA9IFsxMCwgOSwgMTEsIDhdLnNvcnQoKCkgPT4gTWF0aC5yYW5kb20oKSAtIDAuNSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBxTGlzdC5wdXNoKHsgcTogYCR7YX0gKyAke2J9YCwgYW5zLCBhLCBiLCBvcHRzLCB0eXBlOiAnTUNRJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsZXZlbElkID09PSAnTDMnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNSkgKyA1OyAvLyA1LTlcbiAgICAgICAgICAgICAgICAgICAgICAgIGIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA1KSArIDU7IC8vIDUtOVxuICAgICAgICAgICAgICAgICAgICAgICAgYW5zID0gYSArIGI7IC8vIFJlc3VsdCA+PSAxMFxuICAgICAgICAgICAgICAgICAgICAgICAgcUxpc3QucHVzaCh7IHE6IGAke2F9ICsgJHtifWAsIGFucywgYSwgYiwgdHlwZTogJ0lOUFVUJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZXRRdWVzdGlvbnMocUxpc3QpO1xuICAgICAgICAgICAgfSwgW2xldmVsSWRdKTtcblxuICAgICAgICAgICAgY29uc3QgcGxheVNvdW5kID0gKHR5cGUpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBTaW1wbGUgc3ludGggc2ltdWxhdGlvbiBvciBwbGFjZWhvbGRlclxuICAgICAgICAgICAgICAgIC8vIEluIGEgcmVhbCBhcHAsIHVzZSBBdWRpbygpIHdpdGggYXNzZXRzXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdjb3JyZWN0Jykgc3BlYWsoXCLnrZTlsI3kuobvvIHlpb3mo5LvvIFcIiwgc3BlZWNoUmF0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICd3cm9uZycpIHNwZWFrKFwi5YaN6Kmm5LiA5qyh77yBXCIsIHNwZWVjaFJhdGUpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgaGFuZGxlQW5zd2VyID0gKHZhbCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRRdWVzdGlvbiA9IHF1ZXN0aW9uc1tjdXJyZW50UV07XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KHZhbCkgPT09IGN1cnJlbnRRdWVzdGlvbi5hbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdFxuICAgICAgICAgICAgICAgICAgICBzZXRGZWVkYmFjaygnY29ycmVjdCcpO1xuICAgICAgICAgICAgICAgICAgICBwbGF5U291bmQoJ2NvcnJlY3QnKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkVhcm5Ub2tlbigxMCArIGF0dGVtcHRzKTsgLy8gU2NvcmUgbG9naWM6IEJhc2UgKyBFZmZvcnQgdHJhY2tpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRRIDwgcXVlc3Rpb25zLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRGZWVkYmFjayhudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50UShjID0+IGMgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRVc2VySW5wdXQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0QXR0ZW1wdHMoMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29tcGxldGUodG90YWxXcm9uZyArIGF0dGVtcHRzKTsgLy8gUGFzcyB0b3RhbCBlcnJvcnMgZm9yIEdyaXQgY2FsY3VsYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgMjAwMCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV3JvbmdcbiAgICAgICAgICAgICAgICAgICAgc2V0RmVlZGJhY2soJ3dyb25nJyk7XG4gICAgICAgICAgICAgICAgICAgIHBsYXlTb3VuZCgnd3JvbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0QXR0ZW1wdHMocHJldiA9PiBwcmV2ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIHNldFRvdGFsV3JvbmcocHJldiA9PiBwcmV2ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBTaGFrZSBlZmZlY3QgbG9naWMgaGVyZSB2aXN1YWxseSB2aWEgRnJhbWVyIE1vdGlvblxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHNldEZlZWRiYWNrKG51bGwpLCAxNTAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCBoYW5kbGVTZWxmU2V0dXAgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYoIXNlbGZWYWxzLnggfHwgIXNlbGZWYWxzLnkpIHJldHVybjtcbiAgICAgICAgICAgICAgICBjb25zdCBhID0gcGFyc2VJbnQoc2VsZlZhbHMueCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYiA9IHBhcnNlSW50KHNlbGZWYWxzLnkpO1xuICAgICAgICAgICAgICAgIGlmKGErYiA+IDIwKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwZWFrKFwi562U5qGI5LiN6IO95aSn5pa8MjDlk6ZcIiwgc3BlZWNoUmF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2V0UXVlc3Rpb25zKFt7IHE6IGAke2F9ICsgJHtifWAsIGFuczogYStiLCBhLCBiLCB0eXBlOiAnSU5QVVQnIH1dKTtcbiAgICAgICAgICAgICAgICBzZXRTZWxmU2V0dXAoZmFsc2UpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gUmVuZGVyc1xuICAgICAgICAgICAgaWYgKHNlbGZTZXR1cCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHQtMjAgcHgtNCBtYXgtdy1tZCBteC1hdXRvIHRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQteGwgZm9udC1ib2xkIG1iLTRcIj7oh6rlt7Hlh7rpoYzogIPogIPoh6rlt7HvvIE8L2gyPlxuICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTQgdGV4dC00eGwgZm9udC1ib2xkIG1iLThcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIGNsYXNzTmFtZT1cInctMjAgcC0yIHJvdW5kZWQteGwgdGV4dC1jZW50ZXJcIiB2YWx1ZT17c2VsZlZhbHMueH0gb25DaGFuZ2U9e2U9PnNldFNlbGZWYWxzKHsuLi5zZWxmVmFscywgeDplLnRhcmdldC52YWx1ZX0pfS8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+Kzwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIGNsYXNzTmFtZT1cInctMjAgcC0yIHJvdW5kZWQteGwgdGV4dC1jZW50ZXJcIiB2YWx1ZT17c2VsZlZhbHMueX0gb25DaGFuZ2U9e2U9PnNldFNlbGZWYWxzKHsuLi5zZWxmVmFscywgeTplLnRhcmdldC52YWx1ZX0pfS8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtoYW5kbGVTZWxmU2V0dXB9IGNsYXNzTmFtZT1cImJnLWJsdWUtNTAwIHRleHQtd2hpdGUgcHgtOCBweS0zIHJvdW5kZWQteGwgZm9udC1ib2xkIHRleHQteGxcIj7plovlp4vop6PnrZQ8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e29uQmFja30gY2xhc3NOYW1lPVwiYmxvY2sgdy1mdWxsIG10LTQgdGV4dC1zbGF0ZS00MDBcIj7lj5bmtog8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHF1ZXN0aW9ucy5sZW5ndGggPT09IDApIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cInB0LTIwIHRleHQtY2VudGVyXCI+5rqW5YKZ5LitLi4uPC9kaXY+O1xuXG4gICAgICAgICAgICBjb25zdCBxID0gcXVlc3Rpb25zW2N1cnJlbnRRXTtcblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB0LTIwIHB4LTQgaC1mdWxsIGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIHsvKiBQcm9ncmVzcyAqL31cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgbWF4LXctbWQgaC00IGJnLWdyYXktMjAwIHJvdW5kZWQtZnVsbCBtYi02IG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPG1vdGlvbi5kaXYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC1mdWxsIGJnLWJsdWUtNDAwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsPXt7IHdpZHRoOiAwIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZT17eyB3aWR0aDogYCR7KChjdXJyZW50USkgLyBxdWVzdGlvbnMubGVuZ3RoKSAqIDEwMH0lYCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgey8qIFF1ZXN0aW9uIENhcmQgKi99XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUvODAgYmFja2Ryb3AtYmx1ciByb3VuZGVkLTN4bCBwLTggc2hhZG93LXhsIHctZnVsbCBtYXgtdy1tZCB0ZXh0LWNlbnRlciBib3JkZXItNCBib3JkZXItd2hpdGUgcmVsYXRpdmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICB7LyogVFRTIEJ1dHRvbiAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNwZWFrKGAke3EuYX3liqAke3EuYn3nrYnmlrzlpJrlsJHvvJ9gLCBzcGVlY2hSYXRlLCB0cnVlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtNCByaWdodC00IHRleHQtYmx1ZS00MDAgaG92ZXI6c2NhbGUtMTEwIHRyYW5zaXRpb24tdHJhbnNmb3JtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvbnMuVm9sdW1lMiBzaXplPXszMn0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXIgaXRlbXMtY2VudGVyIGdhcC00IG1iLTZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC1zbGF0ZS03MDBcIiBzdHlsZT17eyBmb250U2l6ZTogYCR7Zm9udFNpemUgKiAyLjV9cHhgIH19PntxLnF9ID0gPzwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogVmlzdWFsIEFpZHMgKi99XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXIgZ2FwLTggbWItNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtNSBnYXAtMSB3LTI0IGp1c3RpZnktaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtbLi4uQXJyYXkocS5hKV0ubWFwKChfLCBpKSA9PiA8ZGl2IGtleT17aX0gY2xhc3NOYW1lPVwidy0zIGgtMyByb3VuZGVkLWZ1bGwgYmctYmx1ZS01MDBcIj48L2Rpdj4pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtNSBnYXAtMSB3LTI0IGp1c3RpZnktaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtbLi4uQXJyYXkocS5iKV0ubWFwKChfLCBpKSA9PiA8ZGl2IGtleT17aX0gY2xhc3NOYW1lPVwidy0zIGgtMyByb3VuZGVkLWZ1bGwgYmctZ3JlZW4tNTAwXCI+PC9kaXY+KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogRmVlZGJhY2sgT3ZlcmxheSAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgIDxBbmltYXRlUHJlc2VuY2U+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2ZlZWRiYWNrICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG1vdGlvbi5kaXYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsPXt7IHNjYWxlOiAwLCBvcGFjaXR5OiAwIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRlPXt7IHNjYWxlOiAxLCBvcGFjaXR5OiAxIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGl0PXt7IHNjYWxlOiAwLCBvcGFjaXR5OiAwIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIHotMTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcm91bmRlZC0yeGwgYmctd2hpdGUvOTBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZmVlZGJhY2sgPT09ICdjb3JyZWN0JyA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC02eGwgbWItMlwiPvCfjok8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWdyZWVuLTYwMCBmb250LWJvbGQgdGV4dC0yeGxcIj7nrZTlsI3kuobvvIE8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtNnhsIG1iLTJcIj7wn6SUPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1vcmFuZ2UtNTAwIGZvbnQtYm9sZCB0ZXh0LTJ4bFwiPuWGjeippuS4gOasoe+8gTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YXR0ZW1wdHMgPj0gMSAmJiA8ZGl2IGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1zbGF0ZS01MDAgbXQtMlwiPuaPkOekuu+8muWPr+S7peeUqOaJi+aMh+aVuOaVuOeci+m7num7nuWTpjwvZGl2Pn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbW90aW9uLmRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9BbmltYXRlUHJlc2VuY2U+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgIHsvKiBJbnB1dCBBcmVhICovfVxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbCBtYXgtdy1tZCBtdC02IGZsZXgtZ3Jvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAge3EudHlwZSA9PT0gJ01DUScgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0yIGdhcC00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtxLm9wdHMubWFwKChvcHQsIGlkeCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG1vdGlvbi5idXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2lkeH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZVRhcD17eyBzY2FsZTogMC45NSB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZUFuc3dlcihvcHQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImgtMjQgYmctd2hpdGUgcm91bmRlZC0yeGwgc2hhZG93LXNtIGJvcmRlci1iLTQgYm9yZGVyLXNsYXRlLTIwMCBmb250LWJvbGQgdGV4dC1zbGF0ZS03MDAgaG92ZXI6YmctYmx1ZS01MCBob3Zlcjpib3JkZXItYmx1ZS0yMDAgdHJhbnNpdGlvbi1jb2xvcnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGZvbnRTaXplOiBgJHtmb250U2l6ZSAqIDEuNX1weGAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b3B0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9tb3Rpb24uYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBwLTQgcm91bmRlZC14bCB0ZXh0LWNlbnRlciBtYi0yIGJvcmRlci0yIGJvcmRlci1zbGF0ZS0yMDAgbWluLWgtWzRyZW1dIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC1zbGF0ZS04MDBcIiBzdHlsZT17eyBmb250U2l6ZTogYCR7Zm9udFNpemUgKiAxLjV9cHhgIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt1c2VySW5wdXQgfHwgXCJfXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q3VzdG9tS2V5cGFkIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25JbnB1dD17KG4pID0+IHNldFVzZXJJbnB1dChwcmV2ID0+IChwcmV2Lmxlbmd0aCA8IDIgPyBwcmV2ICsgbiA6IHByZXYpKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRGVsZXRlPXsoKSA9PiBzZXRVc2VySW5wdXQocHJldiA9PiBwcmV2LnNsaWNlKDAsIC0xKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblN1Ym1pdD17KCkgPT4gdXNlcklucHV0ICYmIGhhbmRsZUFuc3dlcih1c2VySW5wdXQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2ZlZWRiYWNrICE9PSBudWxsfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIDQuIENsYXcgTWFjaGluZSBHYW1lXG4gICAgICAgIGNvbnN0IENsYXdNYWNoaW5lID0gKHsgdXNlciwgc2NvcmUsIG9uUGxheUVuZCwgZm9udFNpemUgfSkgPT4ge1xuICAgICAgICAgICAgLy8gTG9naWM6IDNyZCB0cnkgZ3VhcmFudGVlLlxuICAgICAgICAgICAgLy8gV2Ugc2ltdWxhdGUgdGhpcyBieSBjaGVja2luZyBzY29yZS50cmllcyAlIDNcbiAgICAgICAgICAgIC8vIDA6IERyb3AgaGFsZndheVxuICAgICAgICAgICAgLy8gMTogRHJvcCBhdCByaW1cbiAgICAgICAgICAgIC8vIDI6IFN1Y2Nlc3NcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgW3N0YXR1cywgc2V0U3RhdHVzXSA9IHVzZVN0YXRlKCdJRExFJyk7IC8vIElETEUsIE1PVklORywgRFJPUFBJTkcsIFJFU1VMVFxuICAgICAgICAgICAgY29uc3QgW2NsYXdYLCBzZXRDbGF3WF0gPSB1c2VTdGF0ZSgwKTtcbiAgICAgICAgICAgIGNvbnN0IFtyZXN1bHRNc2csIHNldFJlc3VsdE1zZ10gPSB1c2VTdGF0ZShcIlwiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmFuZG9tIHByaXplIGxpc3RcbiAgICAgICAgICAgIGNvbnN0IHByaXplcyA9IFtcbiAgICAgICAgICAgICAgICB7IG5hbWU6IFwi5pqW5pqW5p2vXCIsIGljb246IFwi8J+NtVwiLCBkZXNjOiBcIue1puWqveWqveaaluaalui6q1wiIH0sXG4gICAgICAgICAgICAgICAgeyBuYW1lOiBcIuaMieaRqeanjFwiLCBpY29uOiBcIvCflKhcIiwgZGVzYzogXCLluavniLjniLjmkKXog4xcIiB9LFxuICAgICAgICAgICAgICAgIHsgbmFtZTogXCLmhJvlv4Pkvr/nlbZcIiwgaWNvbjogXCLwn42xXCIsIGRlc2M6IFwi5a625Lq65ZCD5b6X6aO9XCIgfSxcbiAgICAgICAgICAgICAgICB7IG5hbWU6IFwi5aSn5pOB5oqxXCIsIGljb246IFwi8J+kl1wiLCBkZXNjOiBcIuWFjeiyu+eahOaEm1wiIH1cbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIGNvbnN0IHBsYXkgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cyAhPT0gJ0lETEUnKSByZXR1cm47XG4gICAgICAgICAgICAgICAgc2V0U3RhdHVzKCdNT1ZJTkcnKTtcblxuICAgICAgICAgICAgICAgIC8vIERldGVybWluZSBvdXRjb21lIGJhc2VkIG9uIGEgbW9jayBcImF0dGVtcHRzXCIgY291bnRlciBsb2dpY1xuICAgICAgICAgICAgICAgIC8vIEZvciB0aGlzIGRlbW8sIGxldCdzIHVzZSBhIHJhbmRvbWl6ZXIgdGhhdCBmYXZvcnMgc3VjY2VzcyBoZWF2aWx5IGZvciBkZW1vIHB1cnBvc2VzXG4gICAgICAgICAgICAgICAgLy8gT3IgZm9sbG93IHN0cmljdCBydWxlOiAzcmQgdGltZSBzdWNjZXNzLlxuICAgICAgICAgICAgICAgIC8vIExldCdzIGNyZWF0ZSBhIGxvY2FsIHN0b3JhZ2Ugb3Igc3RhdGUgYmFzZWQgYXR0ZW1wdCBjb3VudGVyIGluIHBhcmVudCwgYnV0IGhlcmUgd2UgbW9jazpcbiAgICAgICAgICAgICAgICBjb25zdCBhdHRlbXB0ID0gKHNjb3JlLmNsYXdBdHRlbXB0cyB8fCAwKSAlIDM7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNXaW4gPSBhdHRlbXB0ID09PSAyOyBcblxuICAgICAgICAgICAgICAgIC8vIEFuaW1hdGlvbiBTZXF1ZW5jZVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRTdGF0dXMoJ0RST1BQSU5HJyk7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzV2luKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0U3RhdHVzKCdSRVNVTFQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcml6ZSA9IHByaXplc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwcml6ZXMubGVuZ3RoKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzdWx0TXNnKHByaXplKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IG9uUGxheUVuZCh0cnVlLCBwcml6ZSksIDMwMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTdGF0dXMoJ0lETEUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEZXRlcm1pbmUgZmFpbCBtZXNzYWdlIGJhc2VkIG9uIGF0dGVtcHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmYWlsTXNnID0gYXR0ZW1wdCA9PT0gMCA/IFwi5ZOO5ZGA77yB5ruR5o6J5LqG77yBXCIgOiBcIuW3ruS4gOm7num7nu+8geS4i+asoeS4gOWumuS4re+8gVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwZWFrKGZhaWxNc2cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUGxheUVuZChmYWxzZSwgbnVsbCk7IC8vIENvbnN1bWUgdG9rZW4sIG5vIHByaXplXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIDE1MDApO1xuICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB0LTIwIHB4LTQgaC1mdWxsIGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBwYi04XCI+XG4gICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlLzUwIHB4LTYgcHktMiByb3VuZGVkLWZ1bGwgbWItNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQtc2xhdGUtNzAwXCI+5Ymp6aSY5Luj5bmjOiB7c2NvcmUudG9rZW5zfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgey8qIE1hY2hpbmUgVUkgKi99XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgdy1mdWxsIG1heC13LW1kIGgtWzUwdmhdIGJnLXBpbmstMTAwIHJvdW5kZWQtdC0zeGwgYm9yZGVyLTQgYm9yZGVyLXBpbmstMzAwIG92ZXJmbG93LWhpZGRlbiBzaGFkb3ctMnhsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogR2xhc3MgKi99XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LTAgYmctYmx1ZS0xMDAvMjAgei0xMCBwb2ludGVyLWV2ZW50cy1ub25lIGJvcmRlci1iLTggYm9yZGVyLXBpbmstMjAwXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBDbGF3IFRyYWNrICovfVxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSB0b3AtMCBsZWZ0LTAgcmlnaHQtMCBoLTQgYmctZ3JheS0zMDAgei0wXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBUaGUgQ2xhdyAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgIDxtb3Rpb24uZGl2IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHRvcC0wIGxlZnQtMS8yIHctMiBoLTIwIGJnLWdyYXktNDAwIHotMCBvcmlnaW4tdG9wXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRlPXt7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBzdGF0dXMgPT09ICdNT1ZJTkcnID8gWzAsIC0xMDAsIDEwMCwgMF0gOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHN0YXR1cyA9PT0gJ0RST1BQSU5HJyA/IDI1MCA6IDgwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uPXt7IGR1cmF0aW9uOiBzdGF0dXMgPT09ICdNT1ZJTkcnID8gMiA6IDEgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIGJvdHRvbS0wIC1sZWZ0LTYgdy0xNCBoLTEwIGJvcmRlci00IGJvcmRlci1ncmF5LTYwMCByb3VuZGVkLWItZnVsbFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9tb3Rpb24uZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogUHJpemVzIGF0IGJvdHRvbSAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgYm90dG9tLTAgbGVmdC0wIHJpZ2h0LTAgaC0zMiBmbGV4IGl0ZW1zLWVuZCBqdXN0aWZ5LWFyb3VuZCBwLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3ByaXplcy5tYXAoKHAsIGkpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxtb3Rpb24uZGl2IGtleT17aX0gY2xhc3NOYW1lPVwidGV4dC01eGxcIiBhbmltYXRlPXt7IHk6IFswLCAtNSwgMF0gfX0gdHJhbnNpdGlvbj17eyByZXBlYXQ6IEluZmluaXR5LCBkdXJhdGlvbjogMiwgZGVsYXk6IGkgKiAwLjUgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3AuaWNvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbW90aW9uLmRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgey8qIFByaXplIERyb3AgLyBSZXN1bHQgT3ZlcmxheSAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgIDxBbmltYXRlUHJlc2VuY2U+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3N0YXR1cyA9PT0gJ1JFU1VMVCcgJiYgcmVzdWx0TXNnICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG1vdGlvbi5kaXYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsPXt7IHNjYWxlOiAwIH19IGFuaW1hdGU9e3sgc2NhbGU6IDEgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LTAgei0yMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1ibGFjay81MFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctd2hpdGUgcC02IHJvdW5kZWQtMnhsIHRleHQtY2VudGVyIGFuaW1hdGUtYm91bmNlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LTZ4bCBtYi0yXCI+e3Jlc3VsdE1zZy5pY29ufTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LXBpbmstNTAwXCI+5aS+5Yiw5LqG77yBPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNsYXRlLTYwMFwiPntyZXN1bHRNc2cubmFtZX08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWdyYXktNDAwIG10LTJcIj4oe3Jlc3VsdE1zZy5kZXNjfSk8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9tb3Rpb24uZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0FuaW1hdGVQcmVzZW5jZT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB7LyogQ29udHJvbHMgKi99XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy1mdWxsIG1heC13LW1kIGJnLXBpbmstNTAwIHAtNiByb3VuZGVkLWItM3hsIHNoYWRvdy14bCBmbGV4IGp1c3RpZnktY2VudGVyIHJlbGF0aXZlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogQ29pbiBzbG90IGRlY29yYXRpb24gKi99XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIGxlZnQtNiB0b3AtOCB3LTggaC0xMiBiZy1ncmF5LTgwMCByb3VuZGVkLW1kIGJvcmRlci0yIGJvcmRlci1ncmF5LTYwMFwiPjwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3BsYXl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3N0YXR1cyAhPT0gJ0lETEUnIHx8IHNjb3JlLnRva2VucyA8PSAwfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHctMjQgaC0yNCByb3VuZGVkLWZ1bGwgYm9yZGVyLWItOCBzaGFkb3cteGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdHJhbnNpdGlvbi10cmFuc2Zvcm0gYWN0aXZlOnNjYWxlLTk1ICR7c2NvcmUudG9rZW5zID4gMCA/ICdiZy15ZWxsb3ctNDAwIGJvcmRlci15ZWxsb3ctNjAwJyA6ICdiZy1ncmF5LTQwMCBib3JkZXItZ3JheS02MDAnfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1ib2xkIHRleHQteWVsbG93LTkwMCB0ZXh0LXhsXCI+R1JBQiE8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpID0+IG9uUGxheUVuZChmYWxzZSl9IGNsYXNzTmFtZT1cIm10LTQgdGV4dC1zbGF0ZS01MDAgdW5kZXJsaW5lXCI+6L+U5ZuePC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIDUuIFJlcG9ydCBTY3JlZW5cbiAgICAgICAgY29uc3QgUmVwb3J0U2NyZWVuID0gKHsgc2NvcmUsIG9uUmVzdGFydCwgZm9udFNpemUgfSkgPT4ge1xuICAgICAgICAgICAgLy8gTG9naWM6IFRvdGFsIFNjb3JlID0gKENvcnJlY3QgKiAxMCkgKyAoRXJyb3JzICogMSlcbiAgICAgICAgICAgIC8vIEFzc3VtaW5nIHdlIHBhc3MgcmF3IGRhdGEgb3IgY2FsY3VsYXRlZCBpbiBwYXJlbnQuIFxuICAgICAgICAgICAgLy8gRm9yIHRoaXMgZGVtbywgbGV0J3MgYXNzdW1lICdzY29yZS5wb2ludHMnIGluY2x1ZGVzIHRoZSBsb2dpYywgXG4gICAgICAgICAgICAvLyBhbmQgd2UgdHJhY2sgJ3Njb3JlLmVycm9ycycgc2VwYXJhdGVseS5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmVjb25zdHJ1Y3QgdmlzdWFscyBiYXNlZCBvbiBwcm9tcHRcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsU2NvcmUgPSAoc2NvcmUuY29ycmVjdCAqIDEwKSArIChzY29yZS5lcnJvcnMgKiAxKTtcblxuICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB0LTIwIHB4LTQgbWF4LXctMnhsIG14LWF1dG8gcGItMjBcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBtYi04XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbmxpbmUtYmxvY2sgcC00IGJnLXllbGxvdy0xMDAgcm91bmRlZC1mdWxsIG1iLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SWNvbnMuU3RhciBzaXplPXs0OH0gY2xhc3NOYW1lPVwidGV4dC15ZWxsb3ctNTAwXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC0zeGwgZm9udC1ib2xkIHRleHQtc2xhdGUtODAwIG1iLTJcIj7lpb3mo5LvvIHlrozmiJDku7vli5nvvIE8L2gyPlxuICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc2xhdGUtNTAwXCI+55yL55yL5L2g55qE5a2457+S5oiQ5p6cPC9wPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHJvdW5kZWQtM3hsIHNoYWRvdy14bCBvdmVyZmxvdy1oaWRkZW4gbWItNlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1ibHVlLTYwMCBwLTYgdGV4dC13aGl0ZSB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSBvcGFjaXR5LTgwXCI+57i95oiQ5bCx5YiGPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LTZ4bCBmb250LWJvbGRcIj57dG90YWxTY29yZX08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtYi00IGJvcmRlci1iIHBiLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTIgYmctZ3JlZW4tMTAwIHJvdW5kZWQtbGcgdGV4dC1ncmVlbi02MDBcIj48SWNvbnMuQ2hlY2sgLz48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXNsYXRlLTcwMFwiPuiDveWKm+W+l+WIhjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LWdyZWVuLTYwMFwiPntzY29yZS5jb3JyZWN0ICogMTB9IOWIhjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtMiBiZy1vcmFuZ2UtMTAwIHJvdW5kZWQtbGcgdGV4dC1vcmFuZ2UtNjAwXCI+PEljb25zLlJlZnJlc2hDdyAvPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb250LWJvbGQgdGV4dC1zbGF0ZS03MDBcIj7liqrlipvlmJfoqaY8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtc2xhdGUtNDAwXCI+5q+P5LiA5qyh6Yyv6Kqk6YO95piv5a2457+S55qE5qmf5pyD77yBPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LW9yYW5nZS02MDBcIj4rIHtzY29yZS5lcnJvcnN9IOWIhjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHJvdW5kZWQtM3hsIHNoYWRvdy1zbSBwLTYgbWItNiBib3JkZXIgYm9yZGVyLXNsYXRlLTEwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXNsYXRlLTcwMCBtYi00XCI+57Wm5bCP5bCI5a6255qE5bu66K2wIPCfkqE8L2gzPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzTmFtZT1cInNwYWNlLXktM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzc05hbWU9XCJmbGV4IGdhcC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteGxcIj7wn5qAPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNsYXRlLTYwMFwiPuS9oOS7iuWkqeW+iOajku+8jOeJueWIpeaYr+WgheaMgeWujOaIkOS6huaMkeaIsO+8gTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzc05hbWU9XCJmbGV4IGdhcC0zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteGxcIj7wn6epPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXNsYXRlLTYwMFwiPuWPr+S7peippuiRl+e3tOe/kuOAjDnnmoTpgLLkvY3jgI3vvIzlsLHlg4/mkK3nqY3mnKjkuIDmqKPnsKHllq7vvIE8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXNsYXRlLTcwMCBtYi00XCI+5L2g55qE5oiw5Yip5ZOBIPCfjoE8L2gzPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTQgbWItOFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge3Njb3JlLmdpZnRzLmxlbmd0aCA+IDAgPyBzY29yZS5naWZ0cy5tYXAoKGcsIGkpID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17aX0gY2xhc3NOYW1lPVwiYmctcGluay01MCBwLTQgcm91bmRlZC14bCBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyBib3JkZXIgYm9yZGVyLXBpbmstMTAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtM3hsXCI+e2cuaWNvbn08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtYm9sZCB0ZXh0LXNsYXRlLTcwMFwiPntnLm5hbWV9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQteHMgdGV4dC1waW5rLTQwMFwiPue1puWutuS6uueahOemrueJqTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICkpIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMiB0ZXh0LWNlbnRlciB0ZXh0LWdyYXktNDAwIHB5LTQgYmctZ3JheS01MCByb3VuZGVkLXhsXCI+6YKE5rKS5aS+5Yiw56au54mp77yM5YaN5Y676Kmm6Kmm77yBPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17b25SZXN0YXJ0fVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLXNsYXRlLTgwMCB0ZXh0LXdoaXRlIGZvbnQtYm9sZCBweS00IHJvdW5kZWQteGwgc2hhZG93LWxnIGhvdmVyOmJnLXNsYXRlLTcwMCB0cmFuc2l0aW9uLWNvbG9yc1wiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIOWbnuWIsOmmlumggVxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gLS0tIE1haW4gQXBwIENvbXBvbmVudCAtLS1cbiAgICAgICAgY29uc3QgQXBwID0gKCkgPT4ge1xuICAgICAgICAgICAgLy8gU3RhdGVcbiAgICAgICAgICAgIGNvbnN0IFt2aWV3LCBzZXRWaWV3XSA9IHVzZVN0YXRlKCdXRUxDT01FJyk7IC8vIFdFTENPTUUsIERBU0hCT0FSRCwgR0FNRSwgQ0xBVywgUkVQT1JUXG4gICAgICAgICAgICBjb25zdCBbc2V0dGluZ3MsIHNldFNldHRpbmdzXSA9IHVzZVN0YXRlKHsgZm9udFNpemVJZHg6IDIsIHNwZWVjaFJhdGVJZHg6IDUsIHNvdW5kT246IHRydWUgfSk7IC8vIERlZmF1bHQgaWR4IDIgKDE4cHgpLCA1ICgxLjB4KVxuICAgICAgICAgICAgY29uc3QgW3VzZXIsIHNldFVzZXJdID0gdXNlU3RhdGUoeyBuYW1lOiBcIlwiIH0pO1xuICAgICAgICAgICAgY29uc3QgW2dhbWVTdGF0ZSwgc2V0R2FtZVN0YXRlXSA9IHVzZVN0YXRlKHtcbiAgICAgICAgICAgICAgICBsZXZlbDogbnVsbCxcbiAgICAgICAgICAgICAgICB0b2tlbnM6IDAsXG4gICAgICAgICAgICAgICAgY29ycmVjdDogMCxcbiAgICAgICAgICAgICAgICBlcnJvcnM6IDAsXG4gICAgICAgICAgICAgICAgY2xhd0F0dGVtcHRzOiAwLFxuICAgICAgICAgICAgICAgIGdpZnRzOiBbXVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIERlcml2ZWQgU2V0dGluZ3NcbiAgICAgICAgICAgIGNvbnN0IGZvbnRTaXplID0gWzE0LCAxNiwgMTgsIDIyLCAyNiwgMzJdW3NldHRpbmdzLmZvbnRTaXplSWR4XTtcbiAgICAgICAgICAgIGNvbnN0IHNwZWVjaFJhdGUgPSBbMC41LCAwLjYsIDAuNywgMC44LCAwLjksIDEuMF1bc2V0dGluZ3Muc3BlZWNoUmF0ZUlkeF07XG5cbiAgICAgICAgICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgbHVjaWRlLmNyZWF0ZUljb25zKCk7XG4gICAgICAgICAgICB9LCBbdmlld10pO1xuXG4gICAgICAgICAgICAvLyBIYW5kbGVyc1xuICAgICAgICAgICAgY29uc3Qgc3RhcnRHYW1lID0gKG5hbWUpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRVc2VyKHsgbmFtZSB9KTtcbiAgICAgICAgICAgICAgICBzZXRWaWV3KCdEQVNIQk9BUkQnKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdExldmVsID0gKGx2bElkKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYobHZsSWQgPT09ICdSRVBPUlQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFZpZXcoJ1JFUE9SVCcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEdhbWVTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGxldmVsOiBsdmxJZCB9KSk7XG4gICAgICAgICAgICAgICAgICAgIHNldFZpZXcoJ0dBTUUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCBoYW5kbGVUb2tlbkVhcm5lZCA9IChwb2ludHNUb0FkZCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIHBvaW50c1RvQWRkIGxvZ2ljIGhhbmRsZWQgaW5zaWRlIEdhbWVJbnRlcmZhY2UgdmlzdWFsIHNjb3JlLCBcbiAgICAgICAgICAgICAgICAvLyBoZXJlIHdlIGp1c3QgYWRkIHRva2VuIGFuZCB0cmFjayBnbG9iYWwgc3RhdHNcbiAgICAgICAgICAgICAgICBzZXRHYW1lU3RhdGUocHJldiA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAuLi5wcmV2LFxuICAgICAgICAgICAgICAgICAgICB0b2tlbnM6IHByZXYudG9rZW5zICsgMSxcbiAgICAgICAgICAgICAgICAgICAgY29ycmVjdDogcHJldi5jb3JyZWN0ICsgMSAvLyBTaW1wbHkgY291bnRpbmcgY29ycmVjdCBRc1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUdhbWVDb21wbGV0ZSA9IChzZXNzaW9uRXJyb3JzKSA9PiB7XG4gICAgICAgICAgICAgICAgIHNldEdhbWVTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIC4uLnByZXYsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yczogcHJldi5lcnJvcnMgKyBzZXNzaW9uRXJyb3JzXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIC8vIEdvIHRvIGNsYXcgbWFjaGluZSBpZiB0b2tlbnMgPiAwLCBlbHNlIERhc2hib2FyZFxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZVN0YXRlLnRva2VucyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQcm9tcHQgdXNlcjogR28gdG8gY2xhdz8gRm9yIGZsb3cgc2ltcGxpY2l0eSwgbGV0J3MgZ28gRGFzaGJvYXJkXG4gICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3Igc2hvdyBhIG1vZGFsLiBMZXQncyBnbyBEYXNoYm9hcmQgdG8gbGV0IHRoZW0gY2hvb3NlLlxuICAgICAgICAgICAgICAgICAgICAgICAgIHNldFZpZXcoJ0RBU0hCT0FSRCcpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgIHNldFZpZXcoJ0RBU0hCT0FSRCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IGVudGVyQ2xhdyA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRWaWV3KCdDTEFXJyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjb25zdCBoYW5kbGVDbGF3RW5kID0gKHN1Y2Nlc3MsIHByaXplKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0R2FtZVN0YXRlKHByZXYgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5zOiBNYXRoLm1heCgwLCBwcmV2LnRva2VucyAtIDEpLFxuICAgICAgICAgICAgICAgICAgICBjbGF3QXR0ZW1wdHM6IHByZXYuY2xhd0F0dGVtcHRzICsgMSxcbiAgICAgICAgICAgICAgICAgICAgZ2lmdHM6IHN1Y2Nlc3MgPyBbLi4ucHJldi5naWZ0cywgcHJpemVdIDogcHJldi5naWZ0c1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBpZihzdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwZWFrKGDmga3llpzvvIHkvaDlpL7liLDkuoYke3ByaXplLm5hbWV9YCwgc3BlZWNoUmF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gRmxvYXRpbmcgQWN0aW9uIEJ1dHRvblxuICAgICAgICAgICAgY29uc3QgRkFCID0gKCkgPT4gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgYm90dG9tLTQgcmlnaHQtNCB6LTUwIGhvbG9ncmFwaGljIHRleHQtc2xhdGUtODAwIHB4LTQgcHktMiByb3VuZGVkLWZ1bGwgZm9udC1ib2xkIHRleHQteHMgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgY3Vyc29yLXBvaW50ZXIgaG92ZXI6c2NhbGUtMTA1IHRyYW5zaXRpb24tdHJhbnNmb3JtXCI+XG4gICAgICAgICAgICAgICAgICAgIDxJY29ucy5Db21wdXRlciBzaXplPXsxNH0gLz5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+V01DIOeoi+iAgeW4qyDoqK3oqIg8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBGb290ZXJcbiAgICAgICAgICAgIGNvbnN0IEZvb3RlciA9ICgpID0+IChcbiAgICAgICAgICAgICAgICA8Zm9vdGVyIGNsYXNzTmFtZT1cInctZnVsbCB0ZXh0LWNlbnRlciBweS00IHRleHQtc2xhdGUtNDAwIHRleHQteHMgbXQtYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICDCqTIwMjUgV01DXG4gICAgICAgICAgICAgICAgPC9mb290ZXI+XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBHbG9iYWwgQmFjayBCdXR0b24gKGV4Y2VwdCBXZWxjb21lKVxuICAgICAgICAgICAgY29uc3QgQmFja0J0biA9ICgpID0+IChcbiAgICAgICAgICAgICAgICB2aWV3ICE9PSAnV0VMQ09NRScgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0VmlldygnREFTSEJPQVJEJyl9IFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZml4ZWQgdG9wLTQgbGVmdC00IHotNDAgYmctd2hpdGUvODAgYmFja2Ryb3AtYmx1ciBwLTIgcm91bmRlZC14bCBzaGFkb3ctc20gYm9yZGVyIGJvcmRlci1zbGF0ZS0yMDAgdGV4dC1zbGF0ZS02MDAgaG92ZXI6Ymctc2xhdGUtMTAwXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEljb25zLkhvbWUgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gVG9rZW4gV2lkZ2V0IChDbGlja2FibGUgdG8gZ28gdG8gQ2xhdylcbiAgICAgICAgICAgIGNvbnN0IFRva2VuV2lkZ2V0ID0gKCkgPT4gKFxuICAgICAgICAgICAgICAgIHZpZXcgPT09ICdEQVNIQk9BUkQnICYmIGdhbWVTdGF0ZS50b2tlbnMgPiAwICYmIChcbiAgICAgICAgICAgICAgICAgICAgPG1vdGlvbi5idXR0b24gXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsPXt7IHNjYWxlOiAwIH19IGFuaW1hdGU9e3sgc2NhbGU6IDEgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZpeGVkIGJvdHRvbS0yMCByaWdodC00IHotNDAgYmctcGluay01MDAgdGV4dC13aGl0ZSBwLTQgcm91bmRlZC1mdWxsIHNoYWRvdy14bCBib3JkZXItNCBib3JkZXItd2hpdGUgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTIgYW5pbWF0ZS1ib3VuY2VcIlxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17ZW50ZXJDbGF3fVxuICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SWNvbnMuR2lmdCAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1ib2xkXCI+5Y675aS+5YWs5LuUITwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImJnLXdoaXRlIHRleHQtcGluay01MDAgcm91bmRlZC1mdWxsIHctNiBoLTYgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC14cyBmb250LWJvbGRcIj57Z2FtZVN0YXRlLnRva2Vuc308L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvbW90aW9uLmJ1dHRvbj5cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGZsZXggZmxleC1jb2wgcmVsYXRpdmUgYmcteWVsbG93LTUwLzUwXCI+XG4gICAgICAgICAgICAgICAgICAgIDxTZXR0aW5nc01vZHVsZSBzZXR0aW5ncz17c2V0dGluZ3N9IHNldFNldHRpbmdzPXtzZXRTZXR0aW5nc30gLz5cbiAgICAgICAgICAgICAgICAgICAgPEJhY2tCdG4gLz5cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIDxtYWluIGNsYXNzTmFtZT1cImZsZXgtZ3Jvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPEFuaW1hdGVQcmVzZW5jZSBtb2RlPVwid2FpdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2aWV3ID09PSAnV0VMQ09NRScgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bW90aW9uLmRpdiBrZXk9XCJ3ZWxjb21lXCIgaW5pdGlhbD17e29wYWNpdHk6MH19IGFuaW1hdGU9e3tvcGFjaXR5OjF9fSBleGl0PXt7b3BhY2l0eTowfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8V2VsY29tZVNjcmVlbiBvblN0YXJ0PXtzdGFydEdhbWV9IGZvbnRTaXplPXtmb250U2l6ZX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9tb3Rpb24uZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3ZpZXcgPT09ICdEQVNIQk9BUkQnICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG1vdGlvbi5kaXYga2V5PVwiZGFzaFwiIGluaXRpYWw9e3tvcGFjaXR5OjB9fSBhbmltYXRlPXt7b3BhY2l0eToxfX0gZXhpdD17e29wYWNpdHk6MH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPERhc2hib2FyZCB1c2VyPXt1c2VyLm5hbWV9IHNjb3JlPXtnYW1lU3RhdGV9IG9uU2VsZWN0TGV2ZWw9e3NlbGVjdExldmVsfSBmb250U2l6ZT17Zm9udFNpemV9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbW90aW9uLmRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2aWV3ID09PSAnR0FNRScgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bW90aW9uLmRpdiBrZXk9XCJnYW1lXCIgaW5pdGlhbD17e3g6MzAwLCBvcGFjaXR5OjB9fSBhbmltYXRlPXt7eDowLCBvcGFjaXR5OjF9fSBleGl0PXt7eDotMzAwLCBvcGFjaXR5OjB9fSBjbGFzc05hbWU9XCJoLXNjcmVlblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEdhbWVJbnRlcmZhY2UgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWxJZD17Z2FtZVN0YXRlLmxldmVsfSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZT17Zm9udFNpemV9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwZWVjaFJhdGU9e3NwZWVjaFJhdGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25CYWNrPXsoKSA9PiBzZXRWaWV3KCdEQVNIQk9BUkQnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVhcm5Ub2tlbj17aGFuZGxlVG9rZW5FYXJuZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZT17aGFuZGxlR2FtZUNvbXBsZXRlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9tb3Rpb24uZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3ZpZXcgPT09ICdDTEFXJyAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxtb3Rpb24uZGl2IGtleT1cImNsYXdcIiBpbml0aWFsPXt7eTo1MDAsIG9wYWNpdHk6MH19IGFuaW1hdGU9e3t5OjAsIG9wYWNpdHk6MX19IGV4aXQ9e3t5OjUwMCwgb3BhY2l0eTowfX0gY2xhc3NOYW1lPVwiaC1zY3JlZW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxDbGF3TWFjaGluZSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyPXt1c2VyLm5hbWV9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3JlPXtnYW1lU3RhdGV9IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUGxheUVuZD17aGFuZGxlQ2xhd0VuZH0gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU9e2ZvbnRTaXplfSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbW90aW9uLmRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt2aWV3ID09PSAnUkVQT1JUJyAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxtb3Rpb24uZGl2IGtleT1cInJlcG9ydFwiIGluaXRpYWw9e3tvcGFjaXR5OjB9fSBhbmltYXRlPXt7b3BhY2l0eToxfX0gZXhpdD17e29wYWNpdHk6MH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFJlcG9ydFNjcmVlbiBzY29yZT17Z2FtZVN0YXRlfSBvblJlc3RhcnQ9eygpID0+IHNldFZpZXcoJ0RBU0hCT0FSRCcpfSBmb250U2l6ZT17Zm9udFNpemV9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbW90aW9uLmRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9BbmltYXRlUHJlc2VuY2U+XG4gICAgICAgICAgICAgICAgICAgIDwvbWFpbj5cblxuICAgICAgICAgICAgICAgICAgICA8VG9rZW5XaWRnZXQgLz5cbiAgICAgICAgICAgICAgICAgICAgPERvd25sb2FkQnRuIC8+XG4gICAgICAgICAgICAgICAgICAgIDxGQUIgLz5cbiAgICAgICAgICAgICAgICAgICAgPEZvb3RlciAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByb290ID0gUmVhY3RET00uY3JlYXRlUm9vdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpKTtcbiAgICAgICAgcm9vdC5yZW5kZXIoPEFwcCAvPik7XG4gICAgIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDUSxJQUFBQSxNQUFBLEdBQWlEQyxLQUFLO0VBQTlDQyxRQUFRLEdBQUFGLE1BQUEsQ0FBUkUsUUFBUTtFQUFFQyxTQUFTLEdBQUFILE1BQUEsQ0FBVEcsU0FBUztFQUFFQyxNQUFNLEdBQUFKLE1BQUEsQ0FBTkksTUFBTTtFQUFFQyxPQUFPLEdBQUFMLE1BQUEsQ0FBUEssT0FBTztBQUM1QyxJQUFBQyxjQUFBLEdBQW9DQyxNQUFNLENBQUNDLE1BQU07RUFBekNDLE1BQU0sR0FBQUgsY0FBQSxDQUFORyxNQUFNO0VBQUVDLGVBQWUsR0FBQUosY0FBQSxDQUFmSSxlQUFlOztBQUUvQjtBQUNBLElBQU1DLEtBQUssR0FBRztFQUNWQyxRQUFRLEVBQUUsU0FBVkEsUUFBUUEsQ0FBQTtJQUFBLG9CQUFRWCxLQUFBLENBQUFZLGFBQUE7TUFBRyxlQUFZO0lBQW9CLENBQUksQ0FBQztFQUFBO0VBQ3hEQyxJQUFJLEVBQUUsU0FBTkEsSUFBSUEsQ0FBQTtJQUFBLG9CQUFRYixLQUFBLENBQUFZLGFBQUE7TUFBRyxlQUFZO0lBQU0sQ0FBSSxDQUFDO0VBQUE7RUFD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</script></head>
<body>
    <div id="root"><div class="min-h-screen flex flex-col relative bg-yellow-50/50"><button class="fixed top-4 right-4 z-50 w-12 h-12 bg-blue-500 text-white rounded-xl shadow-lg flex items-center justify-center hover:bg-blue-600 focus:outline-none focus:ring-4 focus:ring-blue-300" aria-label="偏好設定" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="sliders-horizontal" class="lucide lucide-sliders-horizontal"><path d="M10 5H3"></path><path d="M12 19H3"></path><path d="M14 3v4"></path><path d="M16 17v4"></path><path d="M21 12h-9"></path><path d="M21 19h-5"></path><path d="M21 5h-7"></path><path d="M8 10v4"></path><path d="M8 12H3"></path></svg></button><main class="flex-grow"><div style="opacity: 1;"><div class="flex flex-col items-center justify-center min-h-[80vh] p-6 text-center" style="opacity: 1; transform: none;"><div class="mb-8 p-6 bg-white/60 rounded-full shadow-xl backdrop-blur-sm animate-float"><span class="text-8xl">🏗️</span></div><h1 class="text-blue-600 font-extrabold mb-2" style="font-size: 27px;">快樂學加法</h1><p class="text-slate-500 mb-8" style="font-size: 18px;">我們去夾禮物給爸爸媽媽吧！</p><div class="w-full max-w-md bg-white p-6 rounded-3xl shadow-xl border-2 border-yellow-200"><label class="block text-left text-slate-600 font-bold mb-2 ml-1" style="font-size: 18px;">你叫什麼名字？</label><input type="text" placeholder="例如：小明" class="w-full bg-slate-100 border-2 border-slate-200 rounded-xl px-4 py-4 mb-6 focus:outline-none focus:border-blue-400 text-center font-bold text-slate-700" value="" style="font-size: 18px;"><button disabled="" class="w-full py-4 rounded-xl font-bold text-white shadow-lg transition-all bg-gray-300 cursor-not-allowed" tabindex="0" style="font-size: 19.8px;">開始遊戲 🚀</button></div></div></div></main><button class="fixed bottom-4 left-4 z-50 bg-white/80 backdrop-blur-md p-3 rounded-full shadow-lg border border-slate-200 text-slate-600 hover:bg-blue-50 hover:text-blue-600 hover:border-blue-200 transition-all flex items-center gap-2 group" title="下載網頁原始碼" style="opacity: 1; transform: none;"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="download" class="lucide lucide-download"><path d="M12 15V3"></path><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><path d="m7 10 5 5 5-5"></path></svg><span class="max-w-0 overflow-hidden group-hover:max-w-xs transition-all duration-300 ease-in-out text-xs font-bold whitespace-nowrap">下載原始碼</span></button><div class="fixed bottom-4 right-4 z-50 holographic text-slate-800 px-4 py-2 rounded-full font-bold text-xs flex items-center gap-2 cursor-pointer hover:scale-105 transition-transform"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-lucide="monitor" class="lucide lucide-monitor"><rect width="20" height="14" x="2" y="3" rx="2"></rect><line x1="8" x2="16" y1="21" y2="21"></line><line x1="12" x2="12" y1="17" y2="21"></line></svg><span>WMC 程老師 設計</span></div><footer class="w-full text-center py-4 text-slate-400 text-xs mt-auto">©2025 WMC</footer></div></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;
        const { motion, AnimatePresence } = window.Motion;
        
        // --- Icons ---
        const Icons = {
            Settings: () => <i data-lucide="sliders-horizontal"></i>,
            Home: () => <i data-lucide="home"></i>,
            Volume2: () => <i data-lucide="volume-2"></i>,
            VolumeX: () => <i data-lucide="volume-x"></i>,
            Play: () => <i data-lucide="play"></i>,
            ArrowLeft: () => <i data-lucide="arrow-left"></i>,
            Delete: () => <i data-lucide="delete"></i>,
            Check: () => <i data-lucide="check"></i>,
            Coins: () => <i data-lucide="coins"></i>,
            Gift: () => <i data-lucide="gift"></i>,
            User: () => <i data-lucide="user"></i>,
            Star: () => <i data-lucide="star"></i>,
            RefreshCw: () => <i data-lucide="refresh-cw"></i>,
            Turtle: () => <i data-lucide="turtle"></i>,
            Rabbit: () => <i data-lucide="rabbit"></i>,
            Computer: () => <i data-lucide="monitor"></i>,
            Download: () => <i data-lucide="download"></i>
        };

        // --- Utility: TTS ---
        const speak = (text, rate = 1, force = false) => {
            if (!window.speechSynthesis) return;
            // Cancel previous speech if forcing a new one
            if (force) window.speechSynthesis.cancel();
            
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'zh-HK'; // Default to Cantonese
            utterance.rate = rate;
            window.speechSynthesis.speak(utterance);
        };

        // --- Components ---

        // 1. Settings Module
        const SettingsModule = ({ settings, setSettings }) => {
            const [isOpen, setIsOpen] = useState(false);

            // Font Sizes mapping (1-6)
            const fontSizes = [14, 16, 18, 22, 26, 32];
            // Speech Rates mapping (1-6)
            const speechRates = [0.5, 0.6, 0.7, 0.8, 0.9, 1.0];

            useEffect(() => {
                lucide.createIcons();
            }, [isOpen]);

            return (
                <>
                    {/* Toggle Button */}
                    <motion.button
                        className="fixed top-4 right-4 z-50 w-12 h-12 bg-blue-500 text-white rounded-xl shadow-lg flex items-center justify-center hover:bg-blue-600 focus:outline-none focus:ring-4 focus:ring-blue-300"
                        whileTap={{ scale: 0.9 }}
                        onClick={() => setIsOpen(!isOpen)}
                        aria-label="偏好設定"
                    >
                        <Icons.Settings />
                    </motion.button>

                    {/* Drawer */}
                    <AnimatePresence>
                        {isOpen && (
                            <>
                                <motion.div 
                                    className="fixed inset-0 bg-black/20 z-40"
                                    initial={{ opacity: 0 }}
                                    animate={{ opacity: 1 }}
                                    exit={{ opacity: 0 }}
                                    onClick={() => setIsOpen(false)}
                                />
                                <motion.div
                                    className="fixed top-20 right-4 w-80 bg-white rounded-2xl shadow-2xl z-50 p-6 border-2 border-blue-100"
                                    initial={{ x: 100, opacity: 0 }}
                                    animate={{ x: 0, opacity: 1 }}
                                    exit={{ x: 100, opacity: 0 }}
                                >
                                    <h3 className="text-xl font-bold text-slate-700 mb-6 flex items-center gap-2">
                                        <Icons.Settings /> 設定
                                    </h3>

                                    {/* Font Size Control */}
                                    <div className="mb-8">
                                        <div className="flex justify-between mb-2">
                                            <span className="text-slate-600 font-medium">字體大小</span>
                                            <span className="text-blue-600 font-bold">{fontSizes[settings.fontSizeIdx]}px</span>
                                        </div>
                                        <input 
                                            type="range" min="0" max="5" step="1"
                                            value={settings.fontSizeIdx}
                                            onChange={(e) => setSettings({...settings, fontSizeIdx: parseInt(e.target.value)})}
                                            className="w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"
                                        />
                                        <div className="flex justify-between text-xs text-gray-400 mt-1">
                                            <span>小</span>
                                            <span>大</span>
                                        </div>
                                    </div>

                                    {/* Speech Rate Control */}
                                    <div>
                                        <div className="flex justify-between mb-2">
                                            <span className="text-slate-600 font-medium">說話速度</span>
                                            <span className="text-blue-600 font-bold">{speechRates[settings.speechRateIdx]}x</span>
                                        </div>
                                        <input 
                                            type="range" min="0" max="5" step="1"
                                            value={settings.speechRateIdx}
                                            onChange={(e) => setSettings({...settings, speechRateIdx: parseInt(e.target.value)})}
                                            className="w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-green-500"
                                        />
                                        <div className="flex justify-between items-center text-gray-500 mt-2">
                                            <div className="flex items-center gap-1"><Icons.Turtle size={16}/> 慢</div>
                                            <div className="flex items-center gap-1">快 <Icons.Rabbit size={16}/></div>
                                        </div>
                                    </div>

                                    {/* Audio Toggle */}
                                    <div className="mt-8 flex items-center justify-between p-3 bg-blue-50 rounded-xl">
                                        <span className="text-slate-700 font-medium">音效開關</span>
                                        <button 
                                            onClick={() => setSettings({...settings, soundOn: !settings.soundOn})}
                                            className={`w-12 h-7 rounded-full p-1 transition-colors ${settings.soundOn ? 'bg-green-500' : 'bg-gray-300'}`}
                                        >
                                            <div className={`w-5 h-5 bg-white rounded-full shadow-sm transform transition-transform ${settings.soundOn ? 'translate-x-5' : 'translate-x-0'}`} />
                                        </button>
                                    </div>
                                </motion.div>
                            </>
                        )}
                    </AnimatePresence>
                </>
            );
        };

        // New Component: Download HTML Button
        const DownloadBtn = () => {
            useEffect(() => {
                lucide.createIcons();
            }, []);

            const handleDownload = () => {
                // Get the full HTML content
                const htmlContent = "<!DOCTYPE html>\n" + document.documentElement.outerHTML;
                const blob = new Blob([htmlContent], { type: "text/html" });
                const url = URL.createObjectURL(blob);
                
                // Create temp link to download
                const a = document.createElement("a");
                a.href = url;
                a.download = "happy_addition_game.html";
                document.body.appendChild(a);
                a.click();
                
                // Cleanup
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            };

            return (
                <motion.button
                    initial={{ opacity: 0, x: -20 }}
                    animate={{ opacity: 1, x: 0 }}
                    onClick={handleDownload}
                    className="fixed bottom-4 left-4 z-50 bg-white/80 backdrop-blur-md p-3 rounded-full shadow-lg border border-slate-200 text-slate-600 hover:bg-blue-50 hover:text-blue-600 hover:border-blue-200 transition-all flex items-center gap-2 group"
                    title="下載網頁原始碼"
                >
                    <Icons.Download />
                    <span className="max-w-0 overflow-hidden group-hover:max-w-xs transition-all duration-300 ease-in-out text-xs font-bold whitespace-nowrap">
                        下載原始碼
                    </span>
                </motion.button>
            );
        };

        // 2. Custom Keypad (For Input Questions)
        const CustomKeypad = ({ onInput, onDelete, onSubmit, disabled }) => {
            const keys = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0];
            
            return (
                <div className="grid grid-cols-3 gap-3 max-w-sm mx-auto mt-6">
                    {keys.map(k => (
                        <motion.button
                            key={k}
                            whileTap={{ scale: 0.9 }}
                            onClick={() => onInput(k)}
                            disabled={disabled}
                            className="h-16 bg-white border-2 border-blue-200 rounded-2xl text-2xl font-bold text-slate-700 shadow-[0_4px_0_rgb(219,234,254)] active:shadow-none active:translate-y-1 disabled:opacity-50"
                        >
                            {k}
                        </motion.button>
                    ))}
                    <motion.button
                        whileTap={{ scale: 0.9 }}
                        onClick={onDelete}
                        disabled={disabled}
                        className="h-16 bg-red-100 border-2 border-red-200 rounded-2xl text-red-600 flex items-center justify-center shadow-[0_4px_0_rgb(254,226,226)] active:shadow-none active:translate-y-1 disabled:opacity-50"
                    >
                        <Icons.Delete />
                    </motion.button>
                    <motion.button
                        whileTap={{ scale: 0.9 }}
                        onClick={onSubmit}
                        disabled={disabled}
                        className="h-16 col-span-2 bg-green-500 border-2 border-green-600 rounded-2xl text-white font-bold text-xl flex items-center justify-center gap-2 shadow-[0_4px_0_rgb(22,163,74)] active:shadow-none active:translate-y-1 disabled:opacity-50"
                    >
                        確認 <Icons.Check />
                    </motion.button>
                </div>
            );
        };

        // 3. Game Screens
        
        // Welcome Screen
        const WelcomeScreen = ({ onStart, fontSize }) => {
            const [name, setName] = useState("");
            
            return (
                <motion.div 
                    initial={{ opacity: 0, y: 20 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: -20 }}
                    className="flex flex-col items-center justify-center min-h-[80vh] p-6 text-center"
                >
                    <div className="mb-8 p-6 bg-white/60 rounded-full shadow-xl backdrop-blur-sm animate-float">
                        <span className="text-8xl">🏗️</span>
                    </div>
                    <h1 className="text-blue-600 font-extrabold mb-2" style={{ fontSize: `${fontSize * 1.5}px` }}>快樂學加法</h1>
                    <p className="text-slate-500 mb-8" style={{ fontSize: `${fontSize}px` }}>我們去夾禮物給爸爸媽媽吧！</p>
                    
                    <div className="w-full max-w-md bg-white p-6 rounded-3xl shadow-xl border-2 border-yellow-200">
                        <label className="block text-left text-slate-600 font-bold mb-2 ml-1" style={{ fontSize: `${fontSize}px` }}>你叫什麼名字？</label>
                        <input 
                            type="text" 
                            value={name}
                            onChange={(e) => setName(e.target.value)}
                            placeholder="例如：小明"
                            className="w-full bg-slate-100 border-2 border-slate-200 rounded-xl px-4 py-4 mb-6 focus:outline-none focus:border-blue-400 text-center font-bold text-slate-700"
                            style={{ fontSize: `${fontSize}px` }}
                        />
                        <motion.button
                            whileHover={{ scale: 1.05 }}
                            whileTap={{ scale: 0.95 }}
                            onClick={() => name.trim() && onStart(name)}
                            disabled={!name.trim()}
                            className={`w-full py-4 rounded-xl font-bold text-white shadow-lg transition-all ${name.trim() ? 'bg-gradient-to-r from-blue-500 to-indigo-500 shadow-blue-300/50' : 'bg-gray-300 cursor-not-allowed'}`}
                            style={{ fontSize: `${fontSize * 1.1}px` }}
                        >
                            開始遊戲 🚀
                        </motion.button>
                    </div>
                </motion.div>
            );
        };

        // Dashboard (Level Selection)
        const Dashboard = ({ user, score, onSelectLevel, fontSize }) => {
            const levels = [
                { id: 'L1', title: '初階：簡單加法', sub: '1+1=?', icon: '🍎', color: 'bg-green-100 border-green-300 text-green-700' },
                { id: 'L2', title: '中階：湊成十', sub: '2+8=?', icon: '👐', color: 'bg-yellow-100 border-yellow-300 text-yellow-800' },
                { id: 'L3', title: '高階：進位加法', sub: '9+9=?', icon: '🚀', color: 'bg-red-100 border-red-300 text-red-800' },
                { id: 'SELF', title: '自學模式', sub: '自己出題', icon: '📝', color: 'bg-purple-100 border-purple-300 text-purple-800' },
            ];

            return (
                <div className="p-4 max-w-4xl mx-auto pt-20">
                    <header className="flex justify-between items-center mb-8">
                        <div>
                            <h2 className="font-bold text-slate-700" style={{ fontSize: `${fontSize * 1.2}px` }}>嗨，{user}！</h2>
                            <p className="text-slate-500">今天想挑戰什麼？</p>
                        </div>
                        <div className="bg-white px-4 py-2 rounded-2xl shadow-sm border border-slate-100 flex items-center gap-2">
                            <span className="text-2xl">💰</span>
                            <span className="font-bold text-slate-700 text-xl">{score.tokens}</span>
                        </div>
                    </header>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        {levels.map(lvl => (
                            <motion.button
                                key={lvl.id}
                                whileHover={{ scale: 1.02, y: -2 }}
                                whileTap={{ scale: 0.98 }}
                                onClick={() => onSelectLevel(lvl.id)}
                                className={`p-6 rounded-3xl border-b-4 text-left shadow-sm flex items-center gap-4 ${lvl.color}`}
                            >
                                <div className="text-4xl">{lvl.icon}</div>
                                <div>
                                    <div className="font-bold" style={{ fontSize: `${fontSize}px` }}>{lvl.title}</div>
                                    <div className="opacity-80 text-sm">{lvl.sub}</div>
                                </div>
                            </motion.button>
                        ))}
                    </div>
                    
                    {/* Report Button */}
                     <motion.button
                        whileTap={{ scale: 0.98 }}
                        onClick={() => onSelectLevel('REPORT')}
                        className="mt-8 w-full bg-white border-2 border-slate-200 rounded-2xl p-4 text-slate-600 font-bold flex items-center justify-center gap-2"
                    >
                        <Icons.User /> 查看我的成就報告
                    </motion.button>
                </div>
            );
        };

        // Game Interface
        const GameInterface = ({ levelId, fontSize, speechRate, onBack, onComplete, onEarnToken }) => {
            const [currentQ, setCurrentQ] = useState(0);
            const [questions, setQuestions] = useState([]);
            const [userInput, setUserInput] = useState("");
            const [feedback, setFeedback] = useState(null); // 'correct' | 'wrong' | null
            const [attempts, setAttempts] = useState(0); // Track wrong attempts per question
            const [totalWrong, setTotalWrong] = useState(0); // For grit score
            const [selfSetup, setSelfSetup] = useState(levelId === 'SELF'); // Is user setting up self question?
            const [selfVals, setSelfVals] = useState({x: '', y: ''});

            // Generate Questions based on logic
            useEffect(() => {
                if (levelId === 'SELF') return;

                let qList = [];
                for(let i=0; i<10; i++) {
                    let a, b, q, ans, opts;
                    if (levelId === 'L1') {
                        a = Math.floor(Math.random() * 5); // 0-4
                        b = Math.floor(Math.random() * 5); // 0-4
                        ans = a + b;
                        // Options: Correct, +1, -1, Random
                        let fake1 = ans + 1;
                        let fake2 = Math.max(0, ans - 1);
                        let fake3 = ans + 2;
                        opts = [ans, fake1, fake2, fake3].sort(() => Math.random() - 0.5);
                        qList.push({ q: `${a} + ${b}`, ans, a, b, opts, type: 'MCQ' });
                    } else if (levelId === 'L2') {
                        a = Math.floor(Math.random() * 9) + 1; // 1-9
                        b = 10 - a;
                        ans = 10;
                        opts = [10, 9, 11, 8].sort(() => Math.random() - 0.5);
                        qList.push({ q: `${a} + ${b}`, ans, a, b, opts, type: 'MCQ' });
                    } else if (levelId === 'L3') {
                        a = Math.floor(Math.random() * 5) + 5; // 5-9
                        b = Math.floor(Math.random() * 5) + 5; // 5-9
                        ans = a + b; // Result >= 10
                        qList.push({ q: `${a} + ${b}`, ans, a, b, type: 'INPUT' });
                    }
                }
                setQuestions(qList);
            }, [levelId]);

            const playSound = (type) => {
                // Simple synth simulation or placeholder
                // In a real app, use Audio() with assets
                if (type === 'correct') speak("答對了！好棒！", speechRate);
                if (type === 'wrong') speak("再試一次！", speechRate);
            };

            const handleAnswer = (val) => {
                const currentQuestion = questions[currentQ];
                if (parseInt(val) === currentQuestion.ans) {
                    // Correct
                    setFeedback('correct');
                    playSound('correct');
                    setTimeout(() => {
                        onEarnToken(10 + attempts); // Score logic: Base + Effort tracking
                        
                        if (currentQ < questions.length - 1) {
                            setFeedback(null);
                            setCurrentQ(c => c + 1);
                            setUserInput("");
                            setAttempts(0);
                        } else {
                            onComplete(totalWrong + attempts); // Pass total errors for Grit calculation
                        }
                    }, 2000);
                } else {
                    // Wrong
                    setFeedback('wrong');
                    playSound('wrong');
                    setAttempts(prev => prev + 1);
                    setTotalWrong(prev => prev + 1);
                    
                    // Shake effect logic here visually via Framer Motion
                    setTimeout(() => setFeedback(null), 1500);
                }
            };

            const handleSelfSetup = () => {
                if(!selfVals.x || !selfVals.y) return;
                const a = parseInt(selfVals.x);
                const b = parseInt(selfVals.y);
                if(a+b > 20) {
                    speak("答案不能大於20哦", speechRate);
                    return;
                }
                setQuestions([{ q: `${a} + ${b}`, ans: a+b, a, b, type: 'INPUT' }]);
                setSelfSetup(false);
            };

            // Renders
            if (selfSetup) {
                return (
                    <div className="pt-20 px-4 max-w-md mx-auto text-center">
                         <h2 className="text-xl font-bold mb-4">自己出題考考自己！</h2>
                         <div className="flex items-center justify-center gap-4 text-4xl font-bold mb-8">
                            <input type="number" className="w-20 p-2 rounded-xl text-center" value={selfVals.x} onChange={e=>setSelfVals({...selfVals, x:e.target.value})}/>
                            <span>+</span>
                            <input type="number" className="w-20 p-2 rounded-xl text-center" value={selfVals.y} onChange={e=>setSelfVals({...selfVals, y:e.target.value})}/>
                         </div>
                         <button onClick={handleSelfSetup} className="bg-blue-500 text-white px-8 py-3 rounded-xl font-bold text-xl">開始解答</button>
                         <button onClick={onBack} className="block w-full mt-4 text-slate-400">取消</button>
                    </div>
                );
            }

            if (questions.length === 0) return <div className="pt-20 text-center">準備中...</div>;

            const q = questions[currentQ];

            return (
                <div className="pt-20 px-4 h-full flex flex-col items-center">
                    {/* Progress */}
                    <div className="w-full max-w-md h-4 bg-gray-200 rounded-full mb-6 overflow-hidden">
                        <motion.div 
                            className="h-full bg-blue-400"
                            initial={{ width: 0 }}
                            animate={{ width: `${((currentQ) / questions.length) * 100}%` }}
                        />
                    </div>

                    {/* Question Card */}
                    <div className="bg-white/80 backdrop-blur rounded-3xl p-8 shadow-xl w-full max-w-md text-center border-4 border-white relative">
                         {/* TTS Button */}
                         <button 
                            onClick={() => speak(`${q.a}加${q.b}等於多少？`, speechRate, true)}
                            className="absolute top-4 right-4 text-blue-400 hover:scale-110 transition-transform"
                        >
                            <Icons.Volume2 size={32} />
                        </button>

                        <div className="flex justify-center items-center gap-4 mb-6">
                            <span className="font-bold text-slate-700" style={{ fontSize: `${fontSize * 2.5}px` }}>{q.q} = ?</span>
                        </div>

                        {/* Visual Aids */}
                        <div className="flex justify-center gap-8 mb-4">
                            <div className="grid grid-cols-5 gap-1 w-24 justify-items-center">
                                {[...Array(q.a)].map((_, i) => <div key={i} className="w-3 h-3 rounded-full bg-blue-500"></div>)}
                            </div>
                            <div className="grid grid-cols-5 gap-1 w-24 justify-items-center">
                                {[...Array(q.b)].map((_, i) => <div key={i} className="w-3 h-3 rounded-full bg-green-500"></div>)}
                            </div>
                        </div>

                        {/* Feedback Overlay */}
                        <AnimatePresence>
                            {feedback && (
                                <motion.div 
                                    initial={{ scale: 0, opacity: 0 }}
                                    animate={{ scale: 1, opacity: 1 }}
                                    exit={{ scale: 0, opacity: 0 }}
                                    className="absolute inset-0 z-10 flex items-center justify-center rounded-2xl bg-white/90"
                                >
                                    {feedback === 'correct' ? (
                                        <div className="text-center">
                                            <div className="text-6xl mb-2">🎉</div>
                                            <div className="text-green-600 font-bold text-2xl">答對了！</div>
                                        </div>
                                    ) : (
                                        <div className="text-center">
                                            <div className="text-6xl mb-2">🤔</div>
                                            <div className="text-orange-500 font-bold text-2xl">再試一次！</div>
                                            {attempts >= 1 && <div className="text-sm text-slate-500 mt-2">提示：可以用手指數數看點點哦</div>}
                                        </div>
                                    )}
                                </motion.div>
                            )}
                        </AnimatePresence>
                    </div>

                    {/* Input Area */}
                    <div className="w-full max-w-md mt-6 flex-grow">
                        {q.type === 'MCQ' ? (
                            <div className="grid grid-cols-2 gap-4">
                                {q.opts.map((opt, idx) => (
                                    <motion.button
                                        key={idx}
                                        whileTap={{ scale: 0.95 }}
                                        onClick={() => handleAnswer(opt)}
                                        className="h-24 bg-white rounded-2xl shadow-sm border-b-4 border-slate-200 font-bold text-slate-700 hover:bg-blue-50 hover:border-blue-200 transition-colors"
                                        style={{ fontSize: `${fontSize * 1.5}px` }}
                                    >
                                        {opt}
                                    </motion.button>
                                ))}
                            </div>
                        ) : (
                            <div>
                                <div className="bg-white p-4 rounded-xl text-center mb-2 border-2 border-slate-200 min-h-[4rem] flex items-center justify-center">
                                    <span className="font-bold text-slate-800" style={{ fontSize: `${fontSize * 1.5}px` }}>
                                        {userInput || "_"}
                                    </span>
                                </div>
                                <CustomKeypad 
                                    onInput={(n) => setUserInput(prev => (prev.length < 2 ? prev + n : prev))}
                                    onDelete={() => setUserInput(prev => prev.slice(0, -1))}
                                    onSubmit={() => userInput && handleAnswer(userInput)}
                                    disabled={feedback !== null}
                                />
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // 4. Claw Machine Game
        const ClawMachine = ({ user, score, onPlayEnd, fontSize }) => {
            // Logic: 3rd try guarantee.
            // We simulate this by checking score.tries % 3
            // 0: Drop halfway
            // 1: Drop at rim
            // 2: Success
            
            const [status, setStatus] = useState('IDLE'); // IDLE, MOVING, DROPPING, RESULT
            const [clawX, setClawX] = useState(0);
            const [resultMsg, setResultMsg] = useState("");
            
            // Random prize list
            const prizes = [
                { name: "暖暖杯", icon: "🍵", desc: "給媽媽暖暖身" },
                { name: "按摩槌", icon: "🔨", desc: "幫爸爸搥背" },
                { name: "愛心便當", icon: "🍱", desc: "家人吃得飽" },
                { name: "大擁抱", icon: "🤗", desc: "免費的愛" }
            ];

            const play = () => {
                if (status !== 'IDLE') return;
                setStatus('MOVING');

                // Determine outcome based on a mock "attempts" counter logic
                // For this demo, let's use a randomizer that favors success heavily for demo purposes
                // Or follow strict rule: 3rd time success.
                // Let's create a local storage or state based attempt counter in parent, but here we mock:
                const attempt = (score.clawAttempts || 0) % 3;
                const isWin = attempt === 2; 

                // Animation Sequence
                setTimeout(() => {
                    setStatus('DROPPING');
                    setTimeout(() => {
                        if (isWin) {
                            setStatus('RESULT');
                            const prize = prizes[Math.floor(Math.random() * prizes.length)];
                            setResultMsg(prize);
                            setTimeout(() => onPlayEnd(true, prize), 3000);
                        } else {
                            setStatus('IDLE');
                            // Determine fail message based on attempt
                            const failMsg = attempt === 0 ? "哎呀！滑掉了！" : "差一點點！下次一定中！";
                            speak(failMsg);
                            onPlayEnd(false, null); // Consume token, no prize
                        }
                    }, 1500);
                }, 2000);
            };

            return (
                <div className="pt-20 px-4 h-full flex flex-col items-center justify-between pb-8">
                     <div className="bg-white/50 px-6 py-2 rounded-full mb-4">
                        <span className="font-bold text-slate-700">剩餘代幣: {score.tokens}</span>
                    </div>

                    {/* Machine UI */}
                    <div className="relative w-full max-w-md h-[50vh] bg-pink-100 rounded-t-3xl border-4 border-pink-300 overflow-hidden shadow-2xl">
                        {/* Glass */}
                        <div className="absolute inset-0 bg-blue-100/20 z-10 pointer-events-none border-b-8 border-pink-200"></div>
                        
                        {/* Claw Track */}
                        <div className="absolute top-0 left-0 right-0 h-4 bg-gray-300 z-0"></div>
                        
                        {/* The Claw */}
                        <motion.div 
                            className="absolute top-0 left-1/2 w-2 h-20 bg-gray-400 z-0 origin-top"
                            animate={{ 
                                x: status === 'MOVING' ? [0, -100, 100, 0] : 0,
                                height: status === 'DROPPING' ? 250 : 80
                            }}
                            transition={{ duration: status === 'MOVING' ? 2 : 1 }}
                        >
                            <div className="absolute bottom-0 -left-6 w-14 h-10 border-4 border-gray-600 rounded-b-full"></div>
                        </motion.div>

                        {/* Prizes at bottom */}
                        <div className="absolute bottom-0 left-0 right-0 h-32 flex items-end justify-around p-4">
                             {prizes.map((p, i) => (
                                 <motion.div key={i} className="text-5xl" animate={{ y: [0, -5, 0] }} transition={{ repeat: Infinity, duration: 2, delay: i * 0.5 }}>
                                     {p.icon}
                                 </motion.div>
                             ))}
                        </div>
                        
                        {/* Prize Drop / Result Overlay */}
                        <AnimatePresence>
                            {status === 'RESULT' && resultMsg && (
                                <motion.div 
                                    initial={{ scale: 0 }} animate={{ scale: 1 }}
                                    className="absolute inset-0 z-20 flex items-center justify-center bg-black/50"
                                >
                                    <div className="bg-white p-6 rounded-2xl text-center animate-bounce">
                                        <div className="text-6xl mb-2">{resultMsg.icon}</div>
                                        <h3 className="text-xl font-bold text-pink-500">夾到了！</h3>
                                        <p className="text-slate-600">{resultMsg.name}</p>
                                        <p className="text-xs text-gray-400 mt-2">({resultMsg.desc})</p>
                                    </div>
                                </motion.div>
                            )}
                        </AnimatePresence>
                    </div>
                    
                    {/* Controls */}
                    <div className="w-full max-w-md bg-pink-500 p-6 rounded-b-3xl shadow-xl flex justify-center relative">
                        {/* Coin slot decoration */}
                        <div className="absolute left-6 top-8 w-8 h-12 bg-gray-800 rounded-md border-2 border-gray-600"></div>

                        <button 
                            onClick={play}
                            disabled={status !== 'IDLE' || score.tokens <= 0}
                            className={`w-24 h-24 rounded-full border-b-8 shadow-xl flex items-center justify-center transition-transform active:scale-95 ${score.tokens > 0 ? 'bg-yellow-400 border-yellow-600' : 'bg-gray-400 border-gray-600'}`}
                        >
                            <span className="font-bold text-yellow-900 text-xl">GRAB!</span>
                        </button>
                    </div>
                    
                    <button onClick={() => onPlayEnd(false)} className="mt-4 text-slate-500 underline">返回</button>
                </div>
            );
        };

        // 5. Report Screen
        const ReportScreen = ({ score, onRestart, fontSize }) => {
            // Logic: Total Score = (Correct * 10) + (Errors * 1)
            // Assuming we pass raw data or calculated in parent. 
            // For this demo, let's assume 'score.points' includes the logic, 
            // and we track 'score.errors' separately.
            
            // Reconstruct visuals based on prompt
            const totalScore = (score.correct * 10) + (score.errors * 1);

            return (
                <div className="pt-20 px-4 max-w-2xl mx-auto pb-20">
                    <div className="text-center mb-8">
                         <div className="inline-block p-4 bg-yellow-100 rounded-full mb-4">
                            <Icons.Star size={48} className="text-yellow-500" />
                         </div>
                         <h2 className="text-3xl font-bold text-slate-800 mb-2">好棒！完成任務！</h2>
                         <p className="text-slate-500">看看你的學習成果</p>
                    </div>

                    <div className="bg-white rounded-3xl shadow-xl overflow-hidden mb-6">
                        <div className="bg-blue-600 p-6 text-white text-center">
                            <div className="text-sm opacity-80">總成就分</div>
                            <div className="text-6xl font-bold">{totalScore}</div>
                        </div>
                        <div className="p-6">
                            <div className="flex justify-between items-center mb-4 border-b pb-4">
                                <div className="flex items-center gap-2">
                                    <div className="p-2 bg-green-100 rounded-lg text-green-600"><Icons.Check /></div>
                                    <span className="font-bold text-slate-700">能力得分</span>
                                </div>
                                <span className="font-bold text-green-600">{score.correct * 10} 分</span>
                            </div>
                            <div className="flex justify-between items-center">
                                <div className="flex items-center gap-2">
                                    <div className="p-2 bg-orange-100 rounded-lg text-orange-600"><Icons.RefreshCw /></div>
                                    <div>
                                        <span className="font-bold text-slate-700">努力嘗試</span>
                                        <div className="text-xs text-slate-400">每一次錯誤都是學習的機會！</div>
                                    </div>
                                </div>
                                <span className="font-bold text-orange-600">+ {score.errors} 分</span>
                            </div>
                        </div>
                    </div>

                    <div className="bg-white rounded-3xl shadow-sm p-6 mb-6 border border-slate-100">
                        <h3 className="font-bold text-slate-700 mb-4">給小專家的建議 💡</h3>
                        <ul className="space-y-3">
                            <li className="flex gap-3">
                                <span className="text-xl">🚀</span>
                                <span className="text-slate-600">你今天很棒，特別是堅持完成了挑戰！</span>
                            </li>
                            <li className="flex gap-3">
                                <span className="text-xl">🧩</span>
                                <span className="text-slate-600">可以試著練習「9的進位」，就像搭積木一樣簡單！</span>
                            </li>
                        </ul>
                    </div>
                    
                    <h3 className="font-bold text-slate-700 mb-4">你的戰利品 🎁</h3>
                    <div className="grid grid-cols-2 gap-4 mb-8">
                        {score.gifts.length > 0 ? score.gifts.map((g, i) => (
                            <div key={i} className="bg-pink-50 p-4 rounded-xl flex items-center gap-3 border border-pink-100">
                                <span className="text-3xl">{g.icon}</span>
                                <div>
                                    <div className="font-bold text-slate-700">{g.name}</div>
                                    <div className="text-xs text-pink-400">給家人的禮物</div>
                                </div>
                            </div>
                        )) : (
                            <div className="col-span-2 text-center text-gray-400 py-4 bg-gray-50 rounded-xl">還沒夾到禮物，再去試試！</div>
                        )}
                    </div>

                    <button 
                        onClick={onRestart}
                        className="w-full bg-slate-800 text-white font-bold py-4 rounded-xl shadow-lg hover:bg-slate-700 transition-colors"
                    >
                        回到首頁
                    </button>
                </div>
            );
        };

        // --- Main App Component ---
        const App = () => {
            // State
            const [view, setView] = useState('WELCOME'); // WELCOME, DASHBOARD, GAME, CLAW, REPORT
            const [settings, setSettings] = useState({ fontSizeIdx: 2, speechRateIdx: 5, soundOn: true }); // Default idx 2 (18px), 5 (1.0x)
            const [user, setUser] = useState({ name: "" });
            const [gameState, setGameState] = useState({
                level: null,
                tokens: 0,
                correct: 0,
                errors: 0,
                clawAttempts: 0,
                gifts: []
            });

            // Derived Settings
            const fontSize = [14, 16, 18, 22, 26, 32][settings.fontSizeIdx];
            const speechRate = [0.5, 0.6, 0.7, 0.8, 0.9, 1.0][settings.speechRateIdx];

            useEffect(() => {
                lucide.createIcons();
            }, [view]);

            // Handlers
            const startGame = (name) => {
                setUser({ name });
                setView('DASHBOARD');
            };

            const selectLevel = (lvlId) => {
                if(lvlId === 'REPORT') {
                    setView('REPORT');
                } else {
                    setGameState(prev => ({ ...prev, level: lvlId }));
                    setView('GAME');
                }
            };

            const handleTokenEarned = (pointsToAdd) => {
                // pointsToAdd logic handled inside GameInterface visual score, 
                // here we just add token and track global stats
                setGameState(prev => ({
                    ...prev,
                    tokens: prev.tokens + 1,
                    correct: prev.correct + 1 // Simply counting correct Qs
                }));
            };

            const handleGameComplete = (sessionErrors) => {
                 setGameState(prev => ({
                    ...prev,
                    errors: prev.errors + sessionErrors
                }));
                // Go to claw machine if tokens > 0, else Dashboard
                setTimeout(() => {
                    if (gameState.tokens > 0) {
                         // Prompt user: Go to claw? For flow simplicity, let's go Dashboard
                         // Or show a modal. Let's go Dashboard to let them choose.
                         setView('DASHBOARD');
                    } else {
                         setView('DASHBOARD');
                    }
                }, 500);
            };

            const enterClaw = () => {
                setView('CLAW');
            };

            const handleClawEnd = (success, prize) => {
                setGameState(prev => ({
                    ...prev,
                    tokens: Math.max(0, prev.tokens - 1),
                    clawAttempts: prev.clawAttempts + 1,
                    gifts: success ? [...prev.gifts, prize] : prev.gifts
                }));
                if(success) {
                    speak(`恭喜！你夾到了${prize.name}`, speechRate);
                }
            };

            // Floating Action Button
            const FAB = () => (
                <div className="fixed bottom-4 right-4 z-50 holographic text-slate-800 px-4 py-2 rounded-full font-bold text-xs flex items-center gap-2 cursor-pointer hover:scale-105 transition-transform">
                    <Icons.Computer size={14} />
                    <span>WMC 程老師 設計</span>
                </div>
            );

            // Footer
            const Footer = () => (
                <footer className="w-full text-center py-4 text-slate-400 text-xs mt-auto">
                    ©2025 WMC
                </footer>
            );

            // Global Back Button (except Welcome)
            const BackBtn = () => (
                view !== 'WELCOME' && (
                    <button 
                        onClick={() => setView('DASHBOARD')} 
                        className="fixed top-4 left-4 z-40 bg-white/80 backdrop-blur p-2 rounded-xl shadow-sm border border-slate-200 text-slate-600 hover:bg-slate-100"
                    >
                        <Icons.Home />
                    </button>
                )
            );

            // Token Widget (Clickable to go to Claw)
            const TokenWidget = () => (
                view === 'DASHBOARD' && gameState.tokens > 0 && (
                    <motion.button 
                        initial={{ scale: 0 }} animate={{ scale: 1 }}
                        className="fixed bottom-20 right-4 z-40 bg-pink-500 text-white p-4 rounded-full shadow-xl border-4 border-white flex items-center justify-center gap-2 animate-bounce"
                        onClick={enterClaw}
                    >
                        <Icons.Gift />
                        <span className="font-bold">去夾公仔!</span>
                        <span className="bg-white text-pink-500 rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold">{gameState.tokens}</span>
                    </motion.button>
                )
            );

            return (
                <div className="min-h-screen flex flex-col relative bg-yellow-50/50">
                    <SettingsModule settings={settings} setSettings={setSettings} />
                    <BackBtn />
                    
                    <main className="flex-grow">
                        <AnimatePresence mode="wait">
                            {view === 'WELCOME' && (
                                <motion.div key="welcome" initial={{opacity:0}} animate={{opacity:1}} exit={{opacity:0}}>
                                    <WelcomeScreen onStart={startGame} fontSize={fontSize} />
                                </motion.div>
                            )}
                            {view === 'DASHBOARD' && (
                                <motion.div key="dash" initial={{opacity:0}} animate={{opacity:1}} exit={{opacity:0}}>
                                    <Dashboard user={user.name} score={gameState} onSelectLevel={selectLevel} fontSize={fontSize} />
                                </motion.div>
                            )}
                            {view === 'GAME' && (
                                <motion.div key="game" initial={{x:300, opacity:0}} animate={{x:0, opacity:1}} exit={{x:-300, opacity:0}} className="h-screen">
                                    <GameInterface 
                                        levelId={gameState.level} 
                                        fontSize={fontSize} 
                                        speechRate={speechRate}
                                        onBack={() => setView('DASHBOARD')}
                                        onEarnToken={handleTokenEarned}
                                        onComplete={handleGameComplete}
                                    />
                                </motion.div>
                            )}
                            {view === 'CLAW' && (
                                <motion.div key="claw" initial={{y:500, opacity:0}} animate={{y:0, opacity:1}} exit={{y:500, opacity:0}} className="h-screen">
                                    <ClawMachine 
                                        user={user.name} 
                                        score={gameState} 
                                        onPlayEnd={handleClawEnd} 
                                        fontSize={fontSize} 
                                    />
                                </motion.div>
                            )}
                            {view === 'REPORT' && (
                                <motion.div key="report" initial={{opacity:0}} animate={{opacity:1}} exit={{opacity:0}}>
                                    <ReportScreen score={gameState} onRestart={() => setView('DASHBOARD')} fontSize={fontSize} />
                                </motion.div>
                            )}
                        </AnimatePresence>
                    </main>

                    <TokenWidget />
                    <DownloadBtn />
                    <FAB />
                    <Footer />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>

</body></html>
